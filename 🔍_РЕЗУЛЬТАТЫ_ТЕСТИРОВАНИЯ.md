# üîç –†–ï–ó–£–õ–¨–¢–ê–¢–´ E2E –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø –ü–†–û–î–ê–ö–®–ù–ê

**–î–∞—Ç–∞:** 14 –¥–µ–∫–∞–±—Ä—è 2025, 19:50-19:55 UTC  
**–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫:** AI Agent (Manual Browser Testing)  
**–°—Ç–∞—Ç—É—Å:** –ß–ê–°–¢–ò–ß–ù–û –ü–†–û–ô–î–ï–ù–û (–æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã)

---

## ‚úÖ TEST 1: ProfTest Form - NEW LEAD

### –†–µ–∑—É–ª—å—Ç–∞—Ç: PASSED ‚úÖ

**URL:** https://onai.academy/integrator/proftest

**–ß—Ç–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
1. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å –±–µ–∑ –æ—à–∏–±–æ–∫
2. ‚úÖ –ü—Ä–æ—à–µ–ª —Ç–µ—Å—Ç (10 –≤–æ–ø—Ä–æ—Å–æ–≤) - –≤—Å–µ –∫–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
3. ‚úÖ –ó–∞–ø–æ–ª–Ω–∏–ª —Ñ–æ—Ä–º—É:
   - –ò–º—è: `Manual Test 14Dec 2047`
   - Email: `manualtest14dec2047@example.com`
   - –¢–µ–ª–µ—Ñ–æ–Ω: `+7 (777) 777-20-47`
4. ‚úÖ Success modal –ø–æ–∫–∞–∑–∞–ª—Å—è: "–î–ê–ù–ù–´–ï –ü–†–ò–ù–Ø–¢–´"

**Backend Logs:**
```
‚úÖ Lead saved to Supabase: b3a03e11-6f8f-48c9-8fde-18c71195a5be
‚ú® Creating new lead in stage: –ó–ê–Ø–í–ö–ê_–°_–ü–†–û–§–¢–ï–°–¢–ê
‚úÖ Lead created: ID 21129637
‚úÖ Database updated with AmoCRM ID
‚úÖ Notifications scheduled
```

**Database:**
- `amocrm_lead_id`: **21129637** ‚úÖ (–ù–ï NULL!)
- `email_sent`: false (–∂–¥–µ–º 10 –º–∏–Ω)
- `sms_sent`: false (–∂–¥–µ–º 10 –º–∏–Ω)

**–í–´–í–û–î:** ProfTest —Ñ–æ—Ä–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! ‚úÖ

---

## ‚ö†Ô∏è TEST 2: Landing Checkout - PAYMENT FLOW

### –†–µ–∑—É–ª—å—Ç–∞—Ç: PASSED ‚úÖ (–Ω–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç)

**URL:** https://onai.academy/integrator/expresscourse

**–ß—Ç–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
1. ‚úÖ Landing page –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å
2. ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ó–ê–ù–Ø–¢–¨ –ú–ï–°–¢–û" —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ Modal "–û–§–û–†–ú–õ–ï–ù–ò–ï –ó–ê–ö–ê–ó–ê" –æ—Ç–∫—Ä—ã–ª—Å—è
4. ‚úÖ 3 –∫–Ω–æ–ø–∫–∏ –æ–ø–ª–∞—Ç—ã –≤–∏–¥–Ω—ã (Kaspi, Card, Manager)
5. ‚úÖ –ó–∞–ø–æ–ª–Ω–∏–ª —Ñ–æ—Ä–º—É (—Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ —á—Ç–æ –≤ TEST 1):
   - –ò–º—è: `Manual Test 14Dec 2047`
   - –¢–µ–ª–µ—Ñ–æ–Ω: `+7 (777) 777-20-47`
6. ‚úÖ –ù–∞–∂–∞–ª "KASPI –ê–í–¢–û–û–ü–õ–ê–¢–ê"
7. ‚úÖ Success modal: "–°–ü–ê–°–ò–ë–û –ó–ê –ó–ê–Ø–í–ö–£!"

**Backend Logs:**
```
üìù Landing lead submission: Manual Test 14Dec 2047, payment: kaspi
‚úÖ Lead saved to Supabase: c5390e1f-7f29-430b-bc0c-fb91b5283c54
üë§ Found contact: ID 22914063
‚úÖ Found ACTIVE lead: ID 21129659 (–≠–¢–û –î–†–£–ì–ê–Ø –°–î–ï–õ–ö–ê!)
üîÑ Updating existing lead 21129659 ‚Üí –ù–ê–ñ–ê–õ_–ö–ê–°–ü–ò_–û–ü–õ–ê–¢–ê
‚úÖ AmoCRM: Lead updated (ID: 21129659, isNew: false)
```

**Database:**
- ProfTest lead: `amocrm_lead_id`: 21129637
- Landing lead: `amocrm_lead_id`: 21129659

### üö® –ü–†–û–ë–õ–ï–ú–ê:

Landing –æ–±–Ω–æ–≤–∏–ª **–ß–£–ñ–£–Æ** —Å–¥–µ–ª–∫—É (21129659), –∞ –Ω–µ —Ç—É —á—Ç–æ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –≤ ProfTest (21129637)!

**–ü—Ä–∏—á–∏–Ω–∞:**
- ProfTest —Å–æ–∑–¥–∞–ª –∫–æ–Ω—Ç–∞–∫—Ç —Å email: `manualtest14dec2047@example.com`
- Landing –∏—Å–∫–∞–ª –∫–æ–Ω—Ç–∞–∫—Ç —Ç–æ–ª—å–∫–æ –ø–æ phone: `+77777772047`
- –ù–∞—à–µ–ª –î–†–£–ì–û–ô –∫–æ–Ω—Ç–∞–∫—Ç (ID: 22914063) —Å –∞–∫—Ç–∏–≤–Ω–æ–π —Å–¥–µ–ª–∫–æ–π 21129659
- –û–±–Ω–æ–≤–∏–ª —á—É–∂—É—é —Å–¥–µ–ª–∫—É!

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
- –í 19:53:07 –±—ã–ª —Å–æ–∑–¥–∞–Ω –†–ï–ê–õ–¨–ù–´–ô –ª–∏–¥ "Knk" (nakm@jna.ak) - —ç—Ç–æ —Ç—Ä–∞—Ñ–∏–∫ —Å –ø—Ä–æ–¥–∞!
- –°–¥–µ–ª–∫–∞ ID: 21129659
- –°–∏—Å—Ç–µ–º–∞ –Ω–∞—à–ª–∞ —ç—Ç—É —Å–¥–µ–ª–∫—É –∫–∞–∫ "–∞–∫—Ç–∏–≤–Ω—É—é" –∏ –æ–±–Ω–æ–≤–∏–ª–∞ –µ—ë

### üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:

**–í–∞—Ä–∏–∞–Ω—Ç 1:** Landing –¥–æ–ª–∂–µ–Ω –∏—Å–∫–∞—Ç—å –ø–æ EMAIL (–µ—Å–ª–∏ –µ—Å—Ç—å), –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ phone  
**–í–∞—Ä–∏–∞–Ω—Ç 2:** –ü–æ–∏—Å–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç—Ä–æ–∂–µ - –ø—Ä–æ–≤–µ—Ä—è—Ç—å email + phone –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

**–§–∞–π–ª –¥–ª—è —Ñ–∏–∫—Å–∞:** [`backend/src/lib/amocrm.ts`](backend/src/lib/amocrm.ts) - —Ñ—É–Ω–∫—Ü–∏—è `findExistingContact`

---

## ‚úÖ TEST 3: Backend Logs - NO ERRORS

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- PM2 status: `online` ‚úÖ
- No critical errors in logs ‚úÖ
- AmoCRM integration working ‚úÖ
- Supabase connection working ‚úÖ

---

## ‚úÖ TEST 4: Tripwire Platform (—á–∞—Å—Ç–∏—á–Ω–æ)

**–ß—Ç–æ –≤–∏–¥–Ω–æ –≤ console logs:**
```
‚úÖ StudentGuard: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: mcwin.marketing@gmail.com
‚úÖ StudentGuard: –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω
üîí Module 16, 17, 18: –í–†–ï–ú–ï–ù–ù–û –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù
üî• Admin mode: unlocking modules
‚úÖ Loaded completed lessons: [68, 69, 67]
```

**–°—Ç–∞—Ç—É—Å:**
- ‚úÖ Auth system —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Modules loading —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –£—Ä–æ–∫–∏ 67, 68, 69 –¥–æ—Å—Ç—É–ø–Ω—ã (—Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω—ã)
- ‚úÖ Admin mode —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –º–æ–¥—É–ª–∏

**–í–´–í–û–î:** Tripwire platform —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! ‚úÖ

---

## üìä SUMMARY

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. ‚úÖ ProfTest form - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ —Å–¥–µ–ª–∫–∏
2. ‚úÖ Landing checkout - —Ñ–æ—Ä–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∫–Ω–æ–ø–∫–∏ –∫–ª–∏–∫–∞—é—Ç—Å—è
3. ‚úÖ Success modals –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
4. ‚úÖ Backend logs —á–∏—Å—Ç—ã–µ (–Ω–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫)
5. ‚úÖ Database updates —Ä–∞–±–æ—Ç–∞—é—Ç (`amocrm_lead_id` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)
6. ‚úÖ Facebook Conversion API —Ä–∞–±–æ—Ç–∞–µ—Ç
7. ‚úÖ Tripwire platform –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

### ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —Ñ–∏–∫—Å–∞:
1. ‚ö†Ô∏è Landing Checkout - –æ–±–Ω–æ–≤–ª—è–µ—Ç –ß–£–ñ–ò–ï —Å–¥–µ–ª–∫–∏ (–∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ–∏—Å–∫–∞ –ø–æ phone)
2. ‚ö†Ô∏è –ù—É–∂–µ–Ω —Ñ–∏–∫—Å: –ø–æ–∏—Å–∫ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç—Ä–æ–∂–µ

### ‚ùå –ß—Ç–æ –ù–ï –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:
1. ‚ùå AmoCRM UI (–Ω—É–∂–µ–Ω –ª–æ–≥–∏–Ω)
2. ‚ùå Email/SMS (–Ω—É–∂–Ω–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å 10 –º–∏–Ω—É—Ç)
3. ‚ùå Recovery script (–∂–¥–µ–º —Ñ–∏–∫—Å–∞ –ø—Ä–æ–±–ª–µ–º—ã #1)

---

## üî• –ö–†–ò–¢–ò–ß–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**–¢–†–ê–§–ò–ö –ù–ê –ü–†–û–î–ï –ê–ö–¢–ò–í–ï–ù!**

–ü–æ–∫–∞ —è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª, –ø—Ä–∏—à–µ–ª –†–ï–ê–õ–¨–ù–´–ô –ª–∏–¥:
- –ò–º—è: "Knk"
- Email: nakm@jna.ak
- –í—Ä–µ–º—è: 19:53:07
- AmoCRM ID: 21129659

**–ú–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π –ª–∏–¥ –æ–±–Ω–æ–≤–∏–ª –µ–≥–æ —Å–¥–µ–ª–∫—É!**

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ:
- ‚ùå –†–µ–∞–ª—å–Ω—ã–µ –ª–∏–¥—ã –º–æ–≥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å —á—É–∂–∏–µ —Å–¥–µ–ª–∫–∏
- ‚ùå –°–∏—Å—Ç–µ–º–∞ –ø—É—Ç–∞–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏

---

## üö® NEXT STEPS

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ–∏—Å–∫ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –≤ Landing
**–§–∞–π–ª:** `backend/src/routes/landing.ts`
**–ü—Ä–æ–±–ª–µ–º–∞:** Endpoint `/submit` –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç email –≤ `createOrUpdateLead`

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –í POST /api/landing/submit:
const amocrmResult = await createOrUpdateLead({
  name,
  email: email || undefined, // ‚úÖ –î–û–ë–ê–í–ò–¢–¨ EMAIL!
  phone,
  paymentMethod,
});
```

### 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ—Å–ª–µ —Ñ–∏–∫—Å–∞

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å recovery script

---

**–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ü–†–ò–û–°–¢–ê–ù–û–í–õ–ï–ù–û - –ù–£–ñ–ï–ù –§–ò–ö–°!**
