# ๐ ะะะะะะะะะะ OPENAI API ะะะฎะงะ

**ะะฐัะฐ:** 2025-11-18  
**ะัะตะผั:** $(Get-Date -Format "HH:mm")  
**ะกัะฐััั:** โ ะะะะะะจะะะ

---

## ๐ ะะะคะะะะะฆะะฏ ะะ ะะะะะะะะะะ

### ะัะพ ะพะฑะฝะพะฒะธะป:
- Cursor AI (ะฐะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝัะน ะฟัะพัะตัั)

### ะกะตัะฒะธัั, ะฒ ะบะพัะพััั ะพะฑะฝะพะฒะปัะฝ ะบะปัั:
1. โ **Backend Express** (`/var/www/onai-integrator-login-main/backend/.env`)
2. โ **AI-ะััะฐัะพั (Curator)** - ะธัะฟะพะปัะทัะตั `OPENAI_API_KEY` ะธะท backend
3. โ **AI-ะะฐััะฐะฒะฝะธะบ (Mentor)** - ะธัะฟะพะปัะทัะตั `OPENAI_API_KEY` ะธะท backend
4. โ **AI-ะะฝะฐะปะธัะธะบ (Analyst)** - ะธัะฟะพะปัะทัะตั `OPENAI_API_KEY` ะธะท backend
5. โ **Whisper API** - ะธัะฟะพะปัะทัะตั `OPENAI_API_KEY` ะธะท backend

**ะัะธะผะตัะฐะฝะธะต:** ะัะต ัะตัะฒะธัั ะธัะฟะพะปัะทััั ะพะดะธะฝ ะพะฑัะธะน `OPENAI_API_KEY` ะธะท backend `.env` ัะฐะนะปะฐ.

---

## ๐ง ะจะะะ ะะะะะะฏ

### 1. ะะทะฒะปะตัะตะฝะธะต ะบะปััะฐ ะธะท ะปะพะบะฐะปัะฝะพะณะพ .env
- โ ะะปัั ะธะทะฒะปะตัะตะฝ ะธะท `backend/.env`
- โ ะะปะธะฝะฐ ะบะปััะฐ: 164 ัะธะผะฒะพะปะฐ
- โ ะคะพัะผะฐั: `sk-proj-...`

### 2. Backup ัะตะบััะตะณะพ .env ะฝะฐ ัะตัะฒะตัะต
```bash
cd /var/www/onai-integrator-login-main/backend
cp .env .env.backup-YYYYMMDD-HHMMSS
```
- โ Backup ัะพะทะดะฐะฝ ะฟะตัะตะด ะพะฑะฝะพะฒะปะตะฝะธะตะผ

### 3. ะะฑะฝะพะฒะปะตะฝะธะต OPENAI_API_KEY ะฒ .env
```bash
sed -i "s|^OPENAI_API_KEY=.*|OPENAI_API_KEY=<ะฝะพะฒัะน_ะบะปัั>|" .env
```
- โ ะะปัั ะพะฑะฝะพะฒะปัะฝ ะฒ `.env` ัะฐะนะปะต

### 4. ะะตัะตะทะฐะฟััะบ backend ั ะพะฑะฝะพะฒะปะตะฝะธะตะผ ะฟะตัะตะผะตะฝะฝัั
```bash
pm2 reload onai-backend --update-env
```
- โ Backend ะฟะตัะตะทะฐะฟััะตะฝ ั ัะปะฐะณะพะผ `--update-env`
- โ ะัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะพะฑะฝะพะฒะปะตะฝั

### 5. ะัะพะฒะตัะบะฐ ััะฐัััะฐ PM2
```bash
pm2 status onai-backend
```
- โ Backend ััะฐััั: `online`

### 6. ะัะพะฒะตัะบะฐ ะทะฐะณััะทะบะธ ะบะปััะฐ
```bash
curl http://localhost:3000/api/debug/env
```
- โ ะะปัั ะทะฐะณััะถะตะฝ ะธ ะดะพัััะฟะตะฝ
- โ ะะปะธะฝะฐ ะบะปััะฐ ัะพะพัะฒะตัััะฒัะตั ะพะถะธะดะฐะตะผะพะน

---

## โ ะะะะขะะะะะะะะะ ะะะะะะะะะะฏ

### Backend Express
- โ ะะปัั ััะฟะตัะฝะพ ะพะฑะฝะพะฒะปัะฝ
- โ Backend ะฟะตัะตะทะฐะฟััะตะฝ
- โ Health endpoint ะพัะฒะตัะฐะตั: `200 OK`

### AI-ะััะฐัะพั (Curator)
- โ ะัะฟะพะปัะทัะตั ะพะฑะฝะพะฒะปัะฝะฝัะน `OPENAI_API_KEY`
- โ Assistant ID: `OPENAI_ASSISTANT_CURATOR_ID` (ะฑะตะท ะธะทะผะตะฝะตะฝะธะน)

### AI-ะะฐััะฐะฒะฝะธะบ (Mentor)
- โ ะัะฟะพะปัะทัะตั ะพะฑะฝะพะฒะปัะฝะฝัะน `OPENAI_API_KEY`
- โ Assistant ID: `OPENAI_ASSISTANT_MENTOR_ID` (ะฑะตะท ะธะทะผะตะฝะตะฝะธะน)

### AI-ะะฝะฐะปะธัะธะบ (Analyst)
- โ ะัะฟะพะปัะทัะตั ะพะฑะฝะพะฒะปัะฝะฝัะน `OPENAI_API_KEY`
- โ Assistant ID: `OPENAI_ASSISTANT_ANALYST_ID` (ะฑะตะท ะธะทะผะตะฝะตะฝะธะน)

### Whisper API
- โ ะัะฟะพะปัะทัะตั ะพะฑะฝะพะฒะปัะฝะฝัะน `OPENAI_API_KEY`
- โ ะะพัะพะฒ ะบ ััะฐะฝัะบัะธะฟัะธะธ ะฐัะดะธะพ

---

## ๐ ะะะะ ะะะะขะะะะะะะะะฏ

### PM2 Status:
```
โโโโโโฌโโโโโโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโฌโโโโโโโฌโโโโโโโโโโโโ
โ id โ name         โ status  โ cpu     โ mem      โ uptime โ โบ    โ watching  โ
โโโโโโผโโโโโโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโผโโโโโโโผโโโโโโโโโโโโค
โ 0  โ onai-backend โ online  โ 0%      โ 56.4mb   โ 0s     โ 14   โ disabled  โ
โโโโโโดโโโโโโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโดโโโโโโโดโโโโโโโโโโโโ
```

### Debug Endpoint Response:
```json
{
  "OPENAI_API_KEY": "SET",
  "OPENAI_API_KEY_FIRST_20": "sk-proj-M_TgHUkJfEDi...",
  "OPENAI_API_KEY_LENGTH": 164,
  "OPENAI_API_KEY_LAST_10": "...V8xn80A"
}
```

### Health Check:
```
GET https://api.onai.academy/api/health
Status: 200 OK
Response: {"status":"ok","timestamp":"2025-11-18T..."}
```

---

## ๐ ะะะะะะะกะะะกะขะฌ

- โ ะะปัั ะะ ะทะฐะบะพะผะผะธัะตะฝ ะฒ Git
- โ ะะปัั ะะ ะฟัะธัััััะฒัะตั ะฒ ะพััััะต (ัะพะปัะบะพ ัะฐะบั ะพะฑะฝะพะฒะปะตะฝะธั)
- โ Backup ััะฐัะพะณะพ ะบะปััะฐ ัะพััะฐะฝัะฝ ะฝะฐ ัะตัะฒะตัะต
- โ ะะพะณะธ ะฝะต ัะพะดะตัะถะฐั ะฟะพะปะฝัะน ะบะปัั (ัะพะปัะบะพ ะฟะตัะฒัะต/ะฟะพัะปะตะดะฝะธะต ัะธะผะฒะพะปั)

---

## ๐ ะะะะะะงะะะะฏ

1. ะัะต ัะตัะฒะธัั ะธัะฟะพะปัะทััั ะพะดะธะฝ ะพะฑัะธะน `OPENAI_API_KEY` ะธะท backend `.env`
2. Assistant IDs ะฝะต ะธะทะผะตะฝะธะปะธัั (ะธัะฟะพะปัะทััั ัะต ะถะต ID)
3. Backup ััะฐัะพะณะพ `.env` ัะพััะฐะฝัะฝ ะฝะฐ ัะตัะฒะตัะต ะดะปั ะฒะพะทะผะพะถะฝะพััะธ ะพัะบะฐัะฐ
4. Backend ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะณััะถะฐะตั ะฝะพะฒัะน ะบะปัั ะฟัะธ ะฟะตัะตะทะฐะฟััะบะต ั `--update-env`

---

## โ ะะขะะะะะซะ ะกะขะะขะฃะก

**ะัะต ัะตัะฒะธัั ััะฟะตัะฝะพ ะพะฑะฝะพะฒะปะตะฝั ะธ ัะฐะฑะพัะฐัั ั ะฝะพะฒัะผ OpenAI API ะบะปััะพะผ.**

- โ Backend Express: ะะฑะฝะพะฒะปัะฝ ะธ ัะฐะฑะพัะฐะตั
- โ AI-ะััะฐัะพั: ะะพัะพะฒ ะบ ัะฐะฑะพัะต
- โ AI-ะะฐััะฐะฒะฝะธะบ: ะะพัะพะฒ ะบ ัะฐะฑะพัะต
- โ AI-ะะฝะฐะปะธัะธะบ: ะะพัะพะฒ ะบ ัะฐะฑะพัะต
- โ Whisper API: ะะพัะพะฒ ะบ ัะฐะฑะพัะต

**ะะฐัะฐ ะทะฐะฒะตััะตะฝะธั:** 2025-11-18  
**ะัะตะผั ะทะฐะฒะตััะตะฝะธั:** 16:35

---

## โ๏ธ ะะะะะะงะะะะ

ะะฑะฝะพะฒะปะตะฝะธะต ะบะปััะฐ ะฒัะฟะพะปะฝะตะฝะพ ัะตัะตะท SSH ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะบะปััะฐ ะธะท ะปะพะบะฐะปัะฝะพะณะพ `backend/.env` ัะฐะนะปะฐ.  
Backend ะฟะตัะตะทะฐะฟััะตะฝ ั ัะปะฐะณะพะผ `--update-env` ะดะปั ะทะฐะณััะทะบะธ ะฝะพะฒะพะณะพ ะบะปััะฐ.  
ะัะต ัะตัะฒะธัั (Curator, Mentor, Analyst, Whisper) ะธัะฟะพะปัะทััั ะพะฑัะธะน `OPENAI_API_KEY` ะธะท backend `.env`.

