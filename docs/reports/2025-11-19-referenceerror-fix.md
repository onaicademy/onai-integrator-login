# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï REFERENCEERROR –ù–ê –°–¢–†–ê–ù–ò–¶–ï –ö–£–†–°–ê

**–î–∞—Ç–∞:** 2025-11-19  
**–í—Ä–µ–º—è:** 05:00  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üéØ –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø

### ‚úÖ –ü–†–û–ë–õ–ï–ú–ê #1: React Router v6 - Nested Router Issue
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–ï –ù–ê–ô–î–ï–ù–û

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- `main.tsx`: –ù–ï–¢ BrowserRouter (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- `App.tsx`: –û–î–ò–ù BrowserRouter –Ω–∞ —Å—Ç—Ä–æ–∫–µ 178 (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

### ‚úÖ –ü–†–û–ë–õ–ï–ú–ê #2: React Router v6 - –°–∏–Ω—Ç–∞–∫—Å–∏—Å Route
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å v6: `<Route path="/course/:id" element={<Course />} />`
- –ù–µ—Ç —Å—Ç–∞—Ä–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ —Å `component={}`

### ‚úÖ –ü–†–û–ë–õ–ï–ú–ê #3: Vite + process.env ReferenceError
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –û–±–Ω–æ–≤–ª—ë–Ω `vite.config.ts` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `process.env`
- –î–æ–±–∞–≤–ª–µ–Ω `loadEnv` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω `define: { 'process.env': env }`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í –∫–æ–¥–µ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `import.meta.env` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è Vite)

### ‚úÖ –ü–†–û–ë–õ–ï–ú–ê #4: React.StrictMode –ö–æ–Ω—Ñ–ª–∏–∫—Ç
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–ï –ü–†–ò–ú–ï–ù–ò–ú–û

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- StrictMode –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `main.tsx`
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### ‚úÖ –ü–†–û–ë–õ–ï–ú–ê #5: useEffect Hook - –ó–∞—â–∏—Ç–∞ –æ—Ç undefined
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `Course.tsx`:**
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `undefined id` –≤ –Ω–∞—á–∞–ª–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è `loading` –∏ `error`
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫
4. ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç `undefined` –≤ `handleModuleClick`
5. ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç `undefined` –≤ `handleSaveModule`
6. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è `courseId` –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–∞ API

---

## üìã –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### 1. –°–æ–∑–¥–∞–Ω ErrorBoundary –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
**–§–∞–π–ª:** `src/components/ErrorBoundary.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –õ–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—å
- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ / –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω Course.tsx
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `undefined id` –≤ –Ω–∞—á–∞–ª–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏—è `loading` –∏ `error`
- ‚úÖ UI –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç `undefined` –≤–æ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è `courseId` –ø–µ—Ä–µ–¥ API –∑–∞–ø—Ä–æ—Å–∞–º–∏

### 3. –û–±–Ω–æ–≤–ª—ë–Ω App.tsx
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `ErrorBoundary` –≤–æ–∫—Ä—É–≥ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω `ErrorBoundary` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

### 4. –û–±–Ω–æ–≤–ª—ë–Ω main.tsx
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ `window.addEventListener('error')` –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –æ—à–∏–±–æ–∫
- ‚úÖ `window.addEventListener('unhandledrejection')` –¥–ª—è Promise rejections
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è root —ç–ª–µ–º–µ–Ω—Ç–∞

### 5. –û–±–Ω–æ–≤–ª—ë–Ω vite.config.ts
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `loadEnv` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `define: { 'process.env': env }` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `process.env` (–µ—Å–ª–∏ –≥–¥–µ-—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

---

## ‚úÖ CHECKLIST

- [x] –¢–æ–ª—å–∫–æ –û–î–ò–ù `<BrowserRouter>` –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (–≤ App.tsx)
- [x] React Router v6 —Å–∏–Ω—Ç–∞–∫—Å–∏—Å: `element={<Component />}`
- [x] Vite env: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `import.meta.env.VITE_*` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- [x] Course.tsx: –ó–∞—â–∏—Ç–∞ –æ—Ç undefined id –∏ null course
- [x] Loading states: –û–±—Ä–∞–±–æ—Ç–∫–∞ loading/error/empty —Å–æ—Å—Ç–æ—è–Ω–∏–π
- [x] Error Boundary: –î–æ–±–∞–≤–ª–µ–Ω –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –æ—à–∏–±–æ–∫ —Ä–µ–Ω–¥–µ—Ä–∞
- [x] Console logs: –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ lifecycle
- [x] –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ main.tsx
- [x] vite.config.ts: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ process.env –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

---

## üìä –°–¢–†–£–ö–¢–£–†–ê –†–û–£–¢–ò–ù–ì–ê

### main.tsx:
```typescript
createRoot(rootElement).render(<App />);
// ‚úÖ –ù–ï–¢ BrowserRouter –∑–¥–µ—Å—å
```

### App.tsx:
```typescript
<BrowserRouter>  {/* ‚úÖ –û–î–ò–ù —Ä–æ—É—Ç–µ—Ä */}
  <AppContent />
</BrowserRouter>
```

### AppRoutes:
```typescript
<Routes>  {/* ‚úÖ –ë–ï–ó –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ BrowserRouter */}
  <Route path="/course/:id" element={<Course />} />
</Routes>
```

---

## üîç –ó–ê–©–ò–¢–´ –í Course.tsx

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ id –≤ –Ω–∞—á–∞–ª–µ:
```typescript
if (!id) {
  return <div>–û—à–∏–±–∫–∞: ID –∫—É—Ä—Å–∞ –Ω–µ —É–∫–∞–∑–∞–Ω</div>;
}
```

### 2. –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏:
```typescript
const [loading, setLoading] = useState(true);
const [error, setError] = useState<string | null>(null);
```

### 3. UI –¥–ª—è loading:
```typescript
if (loading) {
  return <div>–ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–∞...</div>;
}
```

### 4. UI –¥–ª—è error:
```typescript
if (error) {
  return <div>–û—à–∏–±–∫–∞: {error}</div>;
}
```

### 5. –ó–∞—â–∏—Ç–∞ –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö:
```typescript
const handleModuleClick = (moduleId: number) => {
  if (!id) {
    console.error('‚ùå Cannot navigate: id is undefined');
    return;
  }
  navigate(`/course/${id}/module/${moduleId}`);
};
```

---

## üöÄ –î–ï–ü–õ–û–ô

### Git:
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
- ‚úÖ Push –≤ main –≤—ã–ø–æ–ª–Ω–µ–Ω
- ‚úÖ Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç frontend

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- ‚è≥ –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å: https://onai.academy/course/:id
- ‚è≥ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –Ω–µ—Ç ReferenceError –≤ –∫–æ–Ω—Å–æ–ª–∏
- ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## ‚úÖ –ò–¢–û–ì

**–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:**

1. ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è (–æ–¥–∏–Ω BrowserRouter)
2. ‚úÖ Course.tsx –∑–∞—â–∏—â—ë–Ω –æ—Ç undefined/null
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω ErrorBoundary –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –æ—à–∏–±–æ–∫
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
5. ‚úÖ vite.config.ts –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç process.env
6. ‚úÖ Loading –∏ error —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã

**Frontend –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Vercel!**

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-11-19  
**–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 05:00

