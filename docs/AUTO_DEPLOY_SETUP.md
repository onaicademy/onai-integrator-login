# ü§ñ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –î–ï–ü–õ–û–ô - –ù–ê–°–¢–†–û–ô–ö–ê

**–î–∞—Ç–∞:** 2025-11-19  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

---

## üéØ –ß–¢–û –ù–ê–°–¢–†–û–ï–ù–û

### ‚úÖ Backend (DigitalOcean)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** –ø—Ä–∏ push –≤ `main` –≤–µ—Ç–∫—É
- **Workflow:** `.github/workflows/deploy-backend.yml`
- **–¢—Ä–∏–≥–≥–µ—Ä:** –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `backend/**` –∏–ª–∏ —Å–∞–º workflow —Ñ–∞–π–ª
- **–î–µ–π—Å—Ç–≤–∏—è:**
  1. Git pull –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  2. npm install
  3. npm run build
  4. PM2 reload —Å --update-env
  5. Health check

### ‚úÖ Frontend (Vercel)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** –ø—Ä–∏ push –≤ `main` –≤–µ—Ç–∫—É
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** Vercel GitHub App
- **–¢—Ä–∏–≥–≥–µ—Ä:** –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `src/**`, `public/**`, `package.json`
- **Build:** `npm run build`
- **URL:** https://onai.academy

---

## üîß –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢

### –°—Ö–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è:

```
1. git push origin main
   ‚Üì
2. GitHub –ø–æ–ª—É—á–∞–µ—Ç push
   ‚Üì
3. GitHub Actions –∑–∞–ø—É—Å–∫–∞–µ—Ç:
   ‚îú‚îÄ deploy-backend.yml ‚Üí DigitalOcean (207.154.231.30)
   ‚îî‚îÄ deploy-frontend.yml ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ build (Vercel –¥–µ–ø–ª–æ–∏—Ç —Å–∞–º)
   ‚Üì
4. Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç frontend
   ‚Üì
5. ‚úÖ –í—Å—ë –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ!
```

---

## üìã –ù–ê–°–¢–†–û–ô–ö–ê GITHUB SECRETS

### 1. SSH –∫–ª—é—á –¥–ª—è DigitalOcean (Backend):

1. **–°–æ–∑–¥–∞–π SSH –∫–ª—é—á** (–µ—Å–ª–∏ –Ω–µ—Ç):
```bash
ssh-keygen -t ed25519 -C "github-actions-deploy" -f ~/.ssh/github_actions_do
```

2. **–°–∫–æ–ø–∏—Ä—É–π –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**
```bash
ssh-copy-id -i ~/.ssh/github_actions_do.pub root@207.154.231.30
```

3. **–î–æ–±–∞–≤—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –≤ GitHub Secrets:**
   - –ü–µ—Ä–µ–π–¥–∏: https://github.com/onaicademy/onai-integrator-login/settings/secrets/actions
   - –ù–∞–∂–º–∏ "New repository secret"
   - **Name:** `DO_SSH_KEY`
   - **Value:** –°–æ–¥–µ—Ä–∂–∏–º–æ–µ `~/.ssh/github_actions_do` (–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á)

### 2. Vercel API —Ç–æ–∫–µ–Ω (Frontend - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞):

1. **–°–æ–∑–¥–∞–π —Ç–æ–∫–µ–Ω –≤ Vercel:**
   - –ü–µ—Ä–µ–π–¥–∏: https://vercel.com/account/tokens
   - –ù–∞–∂–º–∏ "Create Token"
   - –ù–∞–∑–æ–≤–∏: `github-actions-check`
   - –°–∫–æ–ø–∏—Ä—É–π —Ç–æ–∫–µ–Ω

2. **–ü–æ–ª—É—á–∏ ID –ø—Ä–æ–µ–∫—Ç–∞ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:**
   - **ORG_ID:** Vercel Dashboard ‚Üí Settings ‚Üí General ‚Üí Team ID
   - **PROJECT_ID:** Vercel Dashboard ‚Üí Project Settings ‚Üí General ‚Üí Project ID

3. **–î–æ–±–∞–≤—å –≤ GitHub Secrets:**
   - `VERCEL_TOKEN` - —Ç–æ–∫–µ–Ω –∏–∑ —à–∞–≥–∞ 1
   - `VERCEL_ORG_ID` - ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - `VERCEL_PROJECT_ID` - ID –ø—Ä–æ–µ–∫—Ç–∞

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ –Ω–µ –¥–æ–±–∞–≤–∏—à—å Vercel —Ç–æ–∫–µ–Ω—ã, –¥–µ–ø–ª–æ–π –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–∞.

---

## üöÄ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
# 1. –°–¥–µ–ª–∞–π –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "feat: –Ω–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ"
git push origin main

# 2. GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
#    - –ó–∞–¥–µ–ø–ª–æ–∏—Ç backend –Ω–∞ DigitalOcean
#    - Vercel –∑–∞–¥–µ–ø–ª–æ–∏—Ç frontend
#    - –í—Å—ë –≥–æ—Ç–æ–≤–æ —á–µ—Ä–µ–∑ 2-3 –º–∏–Ω—É—Ç—ã!
```

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):

1. –ü–µ—Ä–µ–π–¥–∏: https://github.com/onaicademy/onai-integrator-login/actions
2. –í—ã–±–µ—Ä–∏ workflow "Deploy Backend to DigitalOcean"
3. –ù–∞–∂–º–∏ "Run workflow"
4. –í—ã–±–µ—Ä–∏ –≤–µ—Ç–∫—É `main`
5. –ù–∞–∂–º–∏ "Run workflow"

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –î–ï–ü–õ–û–Ø

### Backend:
```bash
# –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å –≤ GitHub Actions
https://github.com/onaicademy/onai-integrator-login/actions

# –ü—Ä–æ–≤–µ—Ä—å health endpoint
curl https://api.onai.academy/api/health
```

### Frontend:
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ GitHub Actions
# Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç —Å—Ç–∞—Ç—É—Å Vercel –¥–µ–ø–ª–æ—è

# –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ workflow
# –ü–µ—Ä–µ–π–¥–∏: Actions ‚Üí "Check Vercel Deployment Status" ‚Üí Run workflow

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å –≤—Ä—É—á–Ω—É—é:
# - Vercel Dashboard: https://vercel.com/dashboard
# - Production URL: https://onai.academy
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ Vercel:
- ‚úÖ Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–µ–ø–ª–æ—è
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ: READY, BUILDING, ERROR –∏ —Ç.–¥.
- ‚úÖ –í—ã–≤–æ–¥–∏—Ç URL –¥–µ–ø–ª–æ—è –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
- ‚úÖ –ï—Å–ª–∏ –¥–µ–ø–ª–æ–π —Å –æ—à–∏–±–∫–æ–π - workflow –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π

---

## üîç –õ–û–ì–ò –ò –û–¢–õ–ê–î–ö–ê

### GitHub Actions –ª–æ–≥–∏:
- –ü–µ—Ä–µ–π–¥–∏ –≤ Actions ‚Üí –≤—ã–±–µ—Ä–∏ workflow run ‚Üí —Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏

### Backend –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ssh root@207.154.231.30
pm2 logs onai-backend --lines 50
```

### Vercel –ª–æ–≥–∏:
- Vercel Dashboard ‚Üí Deployments ‚Üí –≤—ã–±–µ—Ä–∏ deployment ‚Üí Logs

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

1. **Backend –¥–µ–ø–ª–æ–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `backend/**`**
   - –ï—Å–ª–∏ –º–µ–Ω—è–µ—à—å —Ç–æ–ª—å–∫–æ frontend, backend –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
   - –≠—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è –∏ —Ä–µ—Å—É—Ä—Å—ã

2. **Frontend –¥–µ–ø–ª–æ–∏—Ç—Å—è —á–µ—Ä–µ–∑ Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
   - GitHub Actions —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç build
   - –†–µ–∞–ª—å–Ω—ã–π –¥–µ–ø–ª–æ–π –¥–µ–ª–∞–µ—Ç Vercel

3. **PM2 reload —Å --update-env**
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ `.env`
   - –í–∞–∂–Ω–æ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–ª—é—á–µ–π API

4. **Health check –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ backend —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ï—Å–ª–∏ health check failed - –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏

---

## üéâ –ì–û–¢–û–í–û!

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º `git push origin main`:
- ‚úÖ Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è –Ω–∞ DigitalOcean
- ‚úÖ Frontend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ Vercel
- ‚úÖ –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞!

---

**–î–∞—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:** 2025-11-19  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–ö–¢–ò–í–ù–û

