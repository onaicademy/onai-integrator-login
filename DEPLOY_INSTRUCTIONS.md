# üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –î–ï–ü–õ–û–Æ - –ü–û–®–ê–ì–û–í–û

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê: Sentry –±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏—é TypeScript

### **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- TypeScript –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä (`tsc`) –Ω–∞—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∏ –≤ Sentry —Ç–∏–ø–∞—Ö
- –ë–∏–ª–¥ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–∞–º–∏
- –î–µ–ø–ª–æ–π –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–µ–ø–ª–æ–π –ë–ï–ó –±–∏–ª–¥–∞ –ª–æ–∫–∞–ª—å–Ω–æ

---

## üéØ –®–ê–ì –ó–ê –®–ê–ì–û–ú (–¥–ª—è –¥—Ä—É–≥–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞):

### **1Ô∏è‚É£ –ü–†–û–í–ï–†–¨ –ß–¢–û –ò–ó–ú–ï–ù–ò–õ–û–°–¨**

```bash
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
git status
```

**–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:**
```
Changes to be committed:
  modified:   backend/src/services/scheduledNotifications.ts
  new file:   SHORT_LINKS_IMPLEMENTATION.md
  new file:   SHORT_LINK_FLOW_EXAMPLE.md
```

---

### **2Ô∏è‚É£ –ó–ê–ö–û–ú–ú–ò–¢–¨ –ò–ó–ú–ï–ù–ï–ù–ò–Ø (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –∑–∞–∫–æ–º–º–∏—á–µ–Ω–æ)**

```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
git add .

# –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å:
git commit -m "Add short links for Email notifications"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª–æ—Å—å:
git log --oneline -1
```

**–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:**
```
f63a1de Add short links for Email notifications
```

---

### **3Ô∏è‚É£ –ó–ê–ü–£–®–ò–¢–¨ –ù–ê GITHUB**

```bash
git push origin main
```

**–ï—Å–ª–∏ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–æ upstream:**
```bash
git push -u origin main
```

---

### **4Ô∏è‚É£ –ù–ê –°–ï–†–í–ï–†–ï (Digital Ocean) - –î–ï–ü–õ–û–ô**

**–ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:**
```bash
ssh root@your-digital-ocean-ip
```

**–ü–µ—Ä–µ–π–¥–∏ –≤ –ø—Ä–æ–µ–∫—Ç:**
```bash
cd /root/onai-integrator-login
```

**–ü–æ—Å–º–æ—Ç—Ä–∏ —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É:**
```bash
git branch
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
* main
```

---

### **5Ô∏è‚É£ –ü–û–î–¢–Ø–ù–ò –ò–ó–ú–ï–ù–ï–ù–ò–Ø –° GITHUB**

```bash
# –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å:
git status

# –ï—Å–ª–∏ –µ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è - —Å–æ—Ö—Ä–∞–Ω–∏ –∏—Ö:
git stash

# –ü–æ–¥—Ç—è–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
git pull origin main

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø–æ–¥—Ç—è–Ω—É–ª–æ—Å—å:
git log --oneline -3
```

**–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:**
```
f63a1de Add short links for Email notifications
...
```

---

### **6Ô∏è‚É£ –£–°–¢–ê–ù–û–í–ò –ó–ê–í–ò–°–ò–ú–û–°–¢–ò (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)**

```bash
# –ü–µ—Ä–µ–π–¥–∏ –≤ backend:
cd /root/onai-integrator-login/backend

# –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏–ª–∏—Å—å –Ω–æ–≤—ã–µ):
npm install

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—Å—ë –û–ö –±–µ–∑ –æ—à–∏–±–æ–∫
```

---

### **7Ô∏è‚É£ –ù–ï –î–ï–õ–ê–ô `npm run build`! –°–†–ê–ó–£ –ü–ï–†–ï–ó–ê–ü–£–°–¢–ò PM2**

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ù–ï –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å `npm run build` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!

**–ü–æ—á–µ–º—É?**
- Backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ts-node` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ TypeScript –Ω–∞–ø—Ä—è–º—É—é
- PM2 –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç TypeScript –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- `npm run build` –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å –∏–∑-–∑–∞ Sentry —Ç–∏–ø–æ–≤, –Ω–æ —ç—Ç–æ –ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É

**–ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ PM2:**

```bash
cd /root/onai-integrator-login/backend

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ backend:
pm2 restart onai-backend

# –ò–ª–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
pm2 restart onai-backend --update-env

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è:
pm2 status
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ id  ‚îÇ name           ‚îÇ mode        ‚îÇ ‚Ü∫       ‚îÇ status  ‚îÇ cpu      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 0   ‚îÇ onai-backend   ‚îÇ fork        ‚îÇ 15      ‚îÇ online  ‚îÇ 0%       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### **8Ô∏è‚É£ –ü–†–û–í–ï–†–¨ –õ–û–ì–ò**

```bash
# –°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
pm2 logs onai-backend --lines 100

# –ò–ª–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫:
pm2 logs onai-backend --lines 50 --nostream
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –ª–æ–≥–∞—Ö:**

‚úÖ **–£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫:**
```
‚úÖ Sentry initialized for backend monitoring
üîó Creating short link for Email (lead 123)...
‚úÖ Short link created for Email: https://onai.academy/l/xY7Zk2
üìä Saved 27 characters (47% reduction)
```

‚ùå **–û—à–∏–±–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å):**
```
‚ùå Error: Cannot find module...
‚ùå TypeError: ...
```

---

### **9Ô∏è‚É£ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï**

**–°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ª–∏–¥–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ—Ñ—Ç–µ—Å—Ç:**

```bash
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π curl –¥–ª—è —Ç–µ—Å—Ç–∞:
curl -X POST https://api.onai.academy/api/landing/proftest \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Test User",
    "email": "test@example.com",
    "phone": "+77771234567",
    "answers": []
  }'
```

**–ü—Ä–æ–≤–µ—Ä—å –≤ –ª–æ–≥–∞—Ö:**
```bash
pm2 logs onai-backend --lines 50
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
üîó Creating short link for Email (lead abc-123)...
‚úÖ Short link created for Email: https://onai.academy/l/xY7Zk2
üìß Email sent successfully
```

---

### **üîü FRONTEND (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å)**

**–ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—ã–ª–∏ —Ç–æ–ª—å–∫–æ –≤ backend - –§–†–û–ù–¢–ï–ù–î –ù–ï –ù–£–ñ–ù–û –ü–ï–†–ï–°–û–ë–ò–†–ê–¢–¨!**

**–ù–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ:**

```bash
cd /root/onai-integrator-login

# –£–±–µ–¥–∏—Å—å —á—Ç–æ .env —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç DSN:
cat .env | grep VITE_SENTRY_DSN

# –ï—Å–ª–∏ –µ—Å—Ç—å - –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏:
npm run build

# Nginx –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –Ω–æ–≤—ã–π –±–∏–ª–¥
```

---

## üêõ –ï–°–õ–ò –ß–¢–û-–¢–û –ü–û–®–õ–û –ù–ï –¢–ê–ö:

### **–ü—Ä–æ–±–ª–µ–º–∞ 1: `pm2 restart` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**

```bash
# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ PM2:
pm2 delete onai-backend
pm2 start ecosystem.config.js

# –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å:
pm2 status
pm2 logs onai-backend --lines 50
```

---

### **–ü—Ä–æ–±–ª–µ–º–∞ 2: –û—à–∏–±–∫–∞ "Cannot find module"**

```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
cd /root/onai-integrator-login/backend
rm -rf node_modules
npm install

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏:
pm2 restart onai-backend
```

---

### **–ü—Ä–æ–±–ª–µ–º–∞ 3: –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç**

```bash
# –ù–∞–π–¥–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 3000:
lsof -i :3000

# –£–±–µ–π –ø—Ä–æ—Ü–µ—Å—Å:
kill -9 <PID>

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ PM2:
pm2 restart onai-backend
```

---

### **–ü—Ä–æ–±–ª–µ–º–∞ 4: Git –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã**

```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏ —Å—Ç–∞—Ç—É—Å:
git status

# –°–æ—Ö—Ä–∞–Ω–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
git stash

# –ü–æ–¥—Ç—è–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
git pull origin main

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ - –≤–µ—Ä–Ω–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
git stash pop
```

---

## üìä –ü–†–û–í–ï–†–ö–ê –ß–¢–û –í–°–Å –†–ê–ë–û–¢–ê–ï–¢:

### **1. Backend –∑–∞–ø—É—â–µ–Ω:**
```bash
pm2 status
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: status = online
```

### **2. –õ–æ–≥–∏ –±–µ–∑ –æ—à–∏–±–æ–∫:**
```bash
pm2 logs onai-backend --lines 50
# –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫—Ä–∞—Å–Ω—ã—Ö ERROR
```

### **3. –ö–æ—Ä–æ—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç:**
```bash
# –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—É—é —Å—Å—ã–ª–∫—É:
curl -X POST https://api.onai.academy/api/short-links/create \
  -H "Content-Type: application/json" \
  -d '{
    "originalUrl": "https://onai.academy/integrator/expresscourse?test=1",
    "leadId": "test-123",
    "campaign": "test",
    "source": "manual"
  }'

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
# {"success":true,"data":{"shortCode":"aB3xY9","shortUrl":"https://onai.academy/l/aB3xY9"}}
```

### **4. –†–µ–¥–∏—Ä–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
# –û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π curl):
curl -I https://onai.academy/l/aB3xY9

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
# HTTP/1.1 302 Found
# Location: https://onai.academy/integrator/expresscourse?test=1
```

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –ß–ï–ö-–õ–ò–°–¢:

- [ ] –ó–∞–∫–æ–º–º–∏—Ç–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è: `git commit -m "..."`
- [ ] –ó–∞–ø—É—à–∏–ª –Ω–∞ GitHub: `git push origin main`
- [ ] –ü–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É: `ssh root@...`
- [ ] –ü–µ—Ä–µ—à—ë–ª –≤ –ø—Ä–æ–µ–∫—Ç: `cd /root/onai-integrator-login`
- [ ] –ü–æ–¥—Ç—è–Ω—É–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è: `git pull origin main`
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª PM2: `pm2 restart onai-backend`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏: `pm2 logs onai-backend --lines 50`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª —Å—Ç–∞—Ç—É—Å: `pm2 status` (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `online`)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏
- [ ] –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ

---

## üéØ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ö–û–ü–ò–ü–ê–°–¢–ê:

**–ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π (–≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ–¥—Ä—è–¥):**

```bash
# –ù–ê –°–ï–†–í–ï–†–ï:
ssh root@your-server
cd /root/onai-integrator-login
git pull origin main
cd backend
npm install
pm2 restart onai-backend --update-env
pm2 logs onai-backend --lines 50
```

**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å - –ø–æ–ª–Ω—ã–π reset:**

```bash
# –ù–ê –°–ï–†–í–ï–†–ï:
cd /root/onai-integrator-login/backend
pm2 delete onai-backend
rm -rf node_modules
npm install
pm2 start ecosystem.config.js
pm2 logs onai-backend --lines 50
```

---

**–í–°–Å! –î–ï–ü–õ–û–ô –ì–û–¢–û–í –ë–ï–ó –ë–ò–õ–î–ê!** üöÄ
