# üìä COURSE API - COMPLETE IMPLEMENTATION REPORT

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 15 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## üì¶ –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´

### 1. TypeScript Types (1 —Ñ–∞–π–ª, 142 —Å—Ç—Ä–æ–∫–∏)
- ‚úÖ `backend/src/types/courses.types.ts` - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –∫—É—Ä—Å–æ–≤, –º–æ–¥—É–ª–µ–π, —É—Ä–æ–∫–æ–≤, –≤–∏–¥–µ–æ, –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

### 2. Services (5 —Ñ–∞–π–ª–æ–≤, ~900 —Å—Ç—Ä–æ–∫)
- ‚úÖ `backend/src/services/courseService.ts` - CRUD –¥–ª—è –∫—É—Ä—Å–æ–≤
- ‚úÖ `backend/src/services/moduleService.ts` - CRUD –¥–ª—è –º–æ–¥—É–ª–µ–π
- ‚úÖ `backend/src/services/lessonService.ts` - CRUD –¥–ª—è —É—Ä–æ–∫–æ–≤
- ‚úÖ `backend/src/services/videoService.ts` - –ó–∞–≥—Ä—É–∑–∫–∞ –≤ R2, signed URLs, —É–¥–∞–ª–µ–Ω–∏–µ
- ‚úÖ `backend/src/services/materialService.ts` - CRUD –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

### 3. Controllers (5 —Ñ–∞–π–ª–æ–≤, ~550 —Å—Ç—Ä–æ–∫)
- ‚úÖ `backend/src/controllers/courseController.ts` - HTTP –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –∫—É—Ä—Å–æ–≤
- ‚úÖ `backend/src/controllers/moduleController.ts` - HTTP –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –º–æ–¥—É–ª–µ–π
- ‚úÖ `backend/src/controllers/lessonController.ts` - HTTP –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —É—Ä–æ–∫–æ–≤
- ‚úÖ `backend/src/controllers/videoController.ts` - HTTP –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –≤–∏–¥–µ–æ
- ‚úÖ `backend/src/controllers/materialController.ts` - HTTP –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

### 4. Routes (5 —Ñ–∞–π–ª–æ–≤, ~150 —Å—Ç—Ä–æ–∫)
- ‚úÖ `backend/src/routes/courses.ts` - –†–æ—É—Ç—ã –¥–ª—è –∫—É—Ä—Å–æ–≤ –∏ –º–æ–¥—É–ª–µ–π
- ‚úÖ `backend/src/routes/modules.ts` - –†–æ—É—Ç—ã –¥–ª—è –º–æ–¥—É–ª–µ–π –∏ —É—Ä–æ–∫–æ–≤
- ‚úÖ `backend/src/routes/lessons.ts` - –†–æ—É—Ç—ã –¥–ª—è —É—Ä–æ–∫–æ–≤, –≤–∏–¥–µ–æ, –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- ‚úÖ `backend/src/routes/videos.ts` - –†–æ—É—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ (Multer)
- ‚úÖ `backend/src/routes/materials.ts` - –†–æ—É—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

### 5. –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (1 —Ñ–∞–π–ª)
- ‚úÖ `backend/src/server.ts` - –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è 5 –Ω–æ–≤—ã—Ö —Ä–æ—É—Ç–æ–≤

---

## üõ£Ô∏è API –≠–ù–î–ü–û–ò–ù–¢–´

### COURSES (6 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)

| –ú–µ—Ç–æ–¥ | URL | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | Body |
|-------|-----|------------|------|
| POST | `/api/courses` | –°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å | `{title, description?, thumbnail_url?}` |
| GET | `/api/courses` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫—É—Ä—Å—ã | - |
| GET | `/api/courses/:courseId` | –ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å —Å –º–æ–¥—É–ª—è–º–∏ | - |
| PUT | `/api/courses/:courseId` | –û–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å | `{title?, description?, thumbnail_url?}` |
| DELETE | `/api/courses/:courseId` | –£–¥–∞–ª–∏—Ç—å –∫—É—Ä—Å | - |
| POST | `/api/courses/:courseId/modules` | –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å –≤ –∫—É—Ä—Å–µ | `{title, order_index}` |
| GET | `/api/courses/:courseId/modules` | –ü–æ–ª—É—á–∏—Ç—å –º–æ–¥—É–ª–∏ –∫—É—Ä—Å–∞ | - |

### MODULES (5 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)

| –ú–µ—Ç–æ–¥ | URL | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | Body |
|-------|-----|------------|------|
| GET | `/api/modules/:moduleId` | –ü–æ–ª—É—á–∏—Ç—å –º–æ–¥—É–ª—å —Å —É—Ä–æ–∫–∞–º–∏ | - |
| PUT | `/api/modules/:moduleId` | –û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥—É–ª—å | `{title?, order_index?}` |
| DELETE | `/api/modules/:moduleId` | –£–¥–∞–ª–∏—Ç—å –º–æ–¥—É–ª—å | - |
| POST | `/api/modules/:moduleId/lessons` | –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫ –≤ –º–æ–¥—É–ª–µ | `{title, description?, order_index}` |
| GET | `/api/modules/:moduleId/lessons` | –ü–æ–ª—É—á–∏—Ç—å —É—Ä–æ–∫–∏ –º–æ–¥—É–ª—è | - |

### LESSONS (5 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)

| –ú–µ—Ç–æ–¥ | URL | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | Body |
|-------|-----|------------|------|
| GET | `/api/lessons/:lessonId` | –ü–æ–ª—É—á–∏—Ç—å —É—Ä–æ–∫ —Å –≤–∏–¥–µ–æ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ | - |
| PUT | `/api/lessons/:lessonId` | –û–±–Ω–æ–≤–∏—Ç—å —É—Ä–æ–∫ | `{title?, description?, order_index?, video_url?, video_duration?}` |
| DELETE | `/api/lessons/:lessonId` | –£–¥–∞–ª–∏—Ç—å —É—Ä–æ–∫ | - |
| GET | `/api/lessons/:lessonId/video` | –ü–æ–ª—É—á–∏—Ç—å –≤–∏–¥–µ–æ (—Å signed URL) | - |
| DELETE | `/api/lessons/:lessonId/video` | –£–¥–∞–ª–∏—Ç—å –≤–∏–¥–µ–æ | - |

### VIDEOS (1 —ç–Ω–¥–ø–æ–∏–Ω—Ç)

| –ú–µ—Ç–æ–¥ | URL | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | Body |
|-------|-----|------------|------|
| POST | `/api/videos/lessons/:lessonId/video` | –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ (Multer) | `FormData: {video: File, duration?: number}` |

**–í–∞–∂–Ω–æ:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤–∏–¥–µ–æ: **3 GB**  
**–§–æ—Ä–º–∞—Ç—ã:** MP4, WebM, OGG, MOV

### MATERIALS (3 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞)

| –ú–µ—Ç–æ–¥ | URL | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | Body |
|-------|-----|------------|------|
| POST | `/api/lessons/:lessonId/materials` | –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª | `{title, file_url, file_type, file_size?}` |
| GET | `/api/lessons/:lessonId/materials` | –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã —É—Ä–æ–∫–∞ | - |
| DELETE | `/api/materials/:materialId` | –£–¥–∞–ª–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª | - |

**–í—Å–µ–≥–æ:** 20 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

---

## üìù –ü–†–ò–ú–ï–†–´ –ó–ê–ü–†–û–°–û–í (CURL)

### 1. –°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å
```bash
curl -X POST "http://localhost:3000/api/courses" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "AI –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö",
    "description": "–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å –ø–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É",
    "thumbnail_url": "https://example.com/thumbnail.jpg"
  }'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": "1",
    "title": "AI –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö",
    "description": "–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å –ø–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É",
    "thumbnail_url": "https://example.com/thumbnail.jpg",
    "created_at": "2025-11-15T10:00:00Z",
    "updated_at": "2025-11-15T10:00:00Z"
  }
}
```

---

### 2. –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å
```bash
curl -X POST "http://localhost:3000/api/courses/1/modules" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ AI",
    "order_index": 1
  }'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": "uuid-module-1",
    "course_id": "1",
    "title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ AI",
    "order_index": 1,
    "created_at": "2025-11-15T10:01:00Z"
  }
}
```

---

### 3. –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫
```bash
curl -X POST "http://localhost:3000/api/modules/uuid-module-1/lessons" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–ß—Ç–æ —Ç–∞–∫–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç?",
    "description": "–û–±–∑–æ—Ä AI –∏ –µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è",
    "order_index": 1
  }'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": "uuid-lesson-1",
    "module_id": "uuid-module-1",
    "title": "–ß—Ç–æ —Ç–∞–∫–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç?",
    "description": "–û–±–∑–æ—Ä AI –∏ –µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è",
    "order_index": 1,
    "video_url": null,
    "video_duration": null,
    "created_at": "2025-11-15T10:02:00Z",
    "updated_at": "2025-11-15T10:02:00Z"
  }
}
```

---

### 4. –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ
```bash
curl -X POST "http://localhost:3000/api/videos/lessons/uuid-lesson-1/video" \
  -F "video=@/path/to/video.mp4" \
  -F "duration=1200"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": "uuid-video-1",
    "lesson_id": "uuid-lesson-1",
    "r2_key": "videos/1731673200000_video.mp4",
    "r2_url": "https://r2-public-url/videos/1731673200000_video.mp4",
    "title": "–ß—Ç–æ —Ç–∞–∫–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç?",
    "duration_seconds": 1200,
    "file_size_bytes": 150000000,
    "mime_type": "video/mp4",
    "status": "ready",
    "created_at": "2025-11-15T10:03:00Z"
  }
}
```

---

### 5. –ü–æ–ª—É—á–∏—Ç—å –≤–∏–¥–µ–æ —Å signed URL
```bash
curl -X GET "http://localhost:3000/api/lessons/uuid-lesson-1/video" \
  -H "Content-Type: application/json"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": "uuid-video-1",
    "lesson_id": "uuid-lesson-1",
    "r2_key": "videos/1731673200000_video.mp4",
    "r2_url": "https://r2-public-url/videos/1731673200000_video.mp4",
    "title": "–ß—Ç–æ —Ç–∞–∫–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç?",
    "duration_seconds": 1200,
    "file_size_bytes": 150000000,
    "mime_type": "video/mp4",
    "status": "ready",
    "created_at": "2025-11-15T10:03:00Z",
    "signed_url": "https://r2.cloudflarestorage.com/...?X-Amz-Expires=7200..."
  }
}
```

**–í–∞–∂–Ω–æ:** `signed_url` –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω **2 —á–∞—Å–∞** (7200 —Å–µ–∫—É–Ω–¥)

---

### 6. –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª –∫ —É—Ä–æ–∫—É
```bash
curl -X POST "http://localhost:3000/api/lessons/uuid-lesson-1/materials" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è AI –æ—Å–Ω–æ–≤—ã",
    "file_url": "https://supabase-storage-url/materials/presentation.pdf",
    "file_type": "application/pdf",
    "file_size": 2500000
  }'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": "uuid-material-1",
    "lesson_id": "uuid-lesson-1",
    "title": "–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è AI –æ—Å–Ω–æ–≤—ã",
    "file_url": "https://supabase-storage-url/materials/presentation.pdf",
    "file_type": "application/pdf",
    "file_size": 2500000,
    "created_at": "2025-11-15T10:04:00Z"
  }
}
```

---

### 7. –ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å —Å –º–æ–¥—É–ª—è–º–∏
```bash
curl -X GET "http://localhost:3000/api/courses/1" \
  -H "Content-Type: application/json"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": "1",
    "title": "AI –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö",
    "description": "–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å –ø–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É",
    "thumbnail_url": "https://example.com/thumbnail.jpg",
    "created_at": "2025-11-15T10:00:00Z",
    "updated_at": "2025-11-15T10:00:00Z",
    "modules": [
      {
        "id": "uuid-module-1",
        "course_id": "1",
        "title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ AI",
        "order_index": 1,
        "created_at": "2025-11-15T10:01:00Z"
      }
    ]
  }
}
```

---

## üé¨ –°–•–ï–ú–ê –†–ê–ë–û–¢–´ –ó–ê–ì–†–£–ó–ö–ò –í–ò–î–ï–û

### –®–∞–≥ –∑–∞ —à–∞–≥–æ–º:

1. **Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏–¥–µ–æ:**
   - `POST /api/videos/lessons/:lessonId/video`
   - FormData —Å –ø–æ–ª–µ–º `video` (File)
   - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: `duration` (—Å–µ–∫—É–Ω–¥—ã)

2. **Multer –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ (–º–∞–∫—Å–∏–º—É–º 3 GB)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ (MP4, WebM, OGG, MOV)
   - –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –ø–∞–º—è—Ç—å (buffer)

3. **VideoController –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å:**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `lessonId` –∏ `file`
   - –í—ã–∑—ã–≤–∞–µ—Ç `videoService.uploadLessonVideo()`

4. **VideoService –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É—Ä–æ–∫ –≤ –ë–î
   - –ï—Å–ª–∏ —É —É—Ä–æ–∫–∞ —É–∂–µ –µ—Å—Ç—å –≤–∏–¥–µ–æ ‚Üí —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä–æ–µ –∏–∑ R2 –∏ –ë–î
   - –í—ã–∑—ã–≤–∞–µ—Ç `uploadVideoToR2()` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ R2
   - –ü–æ–ª—É—á–∞–µ—Ç `url` –∏ `key` –æ—Ç R2
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü—É `video_content`
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —É—Ä–æ–∫ (`video_url`, `video_duration`)

5. **R2StorageService –∑–∞–≥—Ä—É–∂–∞–µ—Ç:**
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á: `videos/{timestamp}_{filename}`
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª –≤ Cloudflare R2
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π URL –∏ –∫–ª—é—á

6. **–û—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É:**
   - JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≤–∏–¥–µ–æ
   - `r2_url` - –ø—É–±–ª–∏—á–Ω—ã–π URL (–µ—Å–ª–∏ bucket –ø—É–±–ª–∏—á–Ω—ã–π)
   - `r2_key` - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ signed URLs –ø–æ–∑–∂–µ

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∏–¥–µ–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:

1. **Frontend –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç:**
   - `GET /api/lessons/:lessonId/video`

2. **VideoService –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç signed URL:**
   - –ü–æ–ª—É—á–∞–µ—Ç `r2_key` –∏–∑ –ë–î
   - –í—ã–∑—ã–≤–∞–µ—Ç `getSignedVideoUrl(r2_key, 7200)` (2 —á–∞—Å–∞)
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π URL –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

3. **Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç signed URL:**
   - –í—Å—Ç–∞–≤–ª—è–µ—Ç –≤ `<video src="signed_url" />`
   - URL –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 2 —á–∞—Å–∞

---

## üß™ –¢–ï–°–¢–û–í–´–ï –î–ê–ù–ù–´–ï (JSON)

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –∫—É—Ä—Å–∞:

```json
{
  "course": {
    "title": "Python –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö",
    "description": "–ò–∑—É—á–∏ Python —Å –Ω—É–ª—è –¥–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∞",
    "thumbnail_url": "https://example.com/python-course.jpg"
  },
  "modules": [
    {
      "title": "–û—Å–Ω–æ–≤—ã Python",
      "order_index": 1,
      "lessons": [
        {
          "title": "–ß—Ç–æ —Ç–∞–∫–æ–µ Python?",
          "description": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è Python",
          "order_index": 1
        },
        {
          "title": "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö",
          "description": "–†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏, —Å—Ç—Ä–æ–∫–∞–º–∏, —á–∏—Å–ª–∞–º–∏",
          "order_index": 2
        }
      ]
    },
    {
      "title": "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π Python",
      "order_index": 2,
      "lessons": [
        {
          "title": "–û–û–ü –≤ Python",
          "description": "–ö–ª–∞—Å—Å—ã, –æ–±—ä–µ–∫—Ç—ã, –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ",
          "order_index": 1
        }
      ]
    }
  ]
}
```

### –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —É—Ä–æ–∫–∞:

```json
{
  "materials": [
    {
      "title": "–ö–æ–Ω—Å–ø–µ–∫—Ç —É—Ä–æ–∫–∞",
      "file_url": "https://storage.supabase.co/.../lecture-notes.pdf",
      "file_type": "application/pdf",
      "file_size": 1200000
    },
    {
      "title": "–ö–æ–¥ –ø—Ä–∏–º–µ—Ä–æ–≤",
      "file_url": "https://storage.supabase.co/.../examples.py",
      "file_type": "text/plain",
      "file_size": 5000
    },
    {
      "title": "–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ",
      "file_url": "https://storage.supabase.co/.../homework.docx",
      "file_type": "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
      "file_size": 250000
    }
  ]
}
```

---

## üî¨ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ (Postman)

### 1. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é

–°–æ–∑–¥–∞–π –Ω–æ–≤—É—é Collection "Course API" –≤ Postman –∏ –¥–æ–±–∞–≤—å 20 –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã".

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π Environment —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:
```
BASE_URL = http://localhost:3000/api
COURSE_ID = (–±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
MODULE_ID = (–±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
LESSON_ID = (–±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

### 3. –°—Ü–µ–Ω–∞—Ä–∏–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫—É—Ä—Å–∞

1. **POST** `/courses` - –°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å
   - –°–æ—Ö—Ä–∞–Ω–∏ `data.id` –≤ `COURSE_ID`
   
2. **GET** `/courses` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫—É—Ä—Å –ø–æ—è–≤–∏–ª—Å—è
   - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –º–∞—Å—Å–∏–≤ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∫—É—Ä—Å

3. **POST** `/courses/{{COURSE_ID}}/modules` - –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å
   - –°–æ—Ö—Ä–∞–Ω–∏ `data.id` –≤ `MODULE_ID`

4. **POST** `/modules/{{MODULE_ID}}/lessons` - –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫
   - –°–æ—Ö—Ä–∞–Ω–∏ `data.id` –≤ `LESSON_ID`

5. **GET** `/courses/{{COURSE_ID}}` - –ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å —Å –º–æ–¥—É–ª—è–º–∏
   - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `modules` —Å–æ–¥–µ—Ä–∂–∏—Ç 1 –º–æ–¥—É–ª—å

6. **GET** `/modules/{{MODULE_ID}}` - –ü–æ–ª—É—á–∏—Ç—å –º–æ–¥—É–ª—å —Å —É—Ä–æ–∫–∞–º–∏
   - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `lessons` —Å–æ–¥–µ—Ä–∂–∏—Ç 1 —É—Ä–æ–∫

#### –¢–µ—Å—Ç 2: –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ

7. **POST** `/videos/lessons/{{LESSON_ID}}/video` 
   - Body: `form-data`
   - Key: `video` (File), Value: –≤—ã–±–µ—Ä–∏ MP4 —Ñ–∞–π–ª (< 3 GB)
   - Key: `duration`, Value: `600` (—Å–µ–∫—É–Ω–¥—ã)
   - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `data.status` = `"ready"`
   - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `data.r2_url` –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `https://`

8. **GET** `/lessons/{{LESSON_ID}}/video`
   - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `data.signed_url` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - –°–∫–æ–ø–∏—Ä—É–π `signed_url` –∏ –æ—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Üí –≤–∏–¥–µ–æ –¥–æ–ª–∂–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è

9. **GET** `/lessons/{{LESSON_ID}}`
   - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `video` –æ–±—ä–µ–∫—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `video_url` –∑–∞–ø–æ–ª–Ω–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `video_duration` = 600

#### –¢–µ—Å—Ç 3: –ú–∞—Ç–µ—Ä–∏–∞–ª—ã

10. **POST** `/lessons/{{LESSON_ID}}/materials` (3 —Ä–∞–∑–∞ –¥–ª—è 3 –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤)
    - Material 1: PDF
    - Material 2: DOCX
    - Material 3: Image

11. **GET** `/lessons/{{LESSON_ID}}/materials`
    - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 3 –º–∞—Ç–µ—Ä–∏–∞–ª–∞
    - –ü—Ä–æ–≤–µ—Ä—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø–æ `created_at`

#### –¢–µ—Å—Ç 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

12. **PUT** `/courses/{{COURSE_ID}}`
    - –û–±–Ω–æ–≤–∏ title
    - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `updated_at` –∏–∑–º–µ–Ω–∏–ª—Å—è

13. **PUT** `/modules/{{MODULE_ID}}`
    - –û–±–Ω–æ–≤–∏ order_index
    - –ü—Ä–æ–≤–µ—Ä—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

14. **PUT** `/lessons/{{LESSON_ID}}`
    - –û–±–Ω–æ–≤–∏ description
    - –ü—Ä–æ–≤–µ—Ä—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### –¢–µ—Å—Ç 5: –£–¥–∞–ª–µ–Ω–∏–µ

15. **DELETE** `/materials/:materialId` (–¥–ª—è 1 –º–∞—Ç–µ—Ä–∏–∞–ª–∞)
    - –ü—Ä–æ–≤–µ—Ä—å `success: true`

16. **GET** `/lessons/{{LESSON_ID}}/materials`
    - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å 2 –º–∞—Ç–µ—Ä–∏–∞–ª–∞

17. **DELETE** `/lessons/{{LESSON_ID}}/video`
    - –ü—Ä–æ–≤–µ—Ä—å `success: true`

18. **GET** `/lessons/{{LESSON_ID}}`
    - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `video` = `undefined`
    - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `video_url` = `null`

19. **DELETE** `/lessons/{{LESSON_ID}}`
    - –ü—Ä–æ–≤–µ—Ä—å `success: true`

20. **GET** `/modules/{{MODULE_ID}}`
    - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `lessons` = `[]`

21. **DELETE** `/modules/{{MODULE_ID}}`
    - –ü—Ä–æ–≤–µ—Ä—å `success: true`

22. **DELETE** `/courses/{{COURSE_ID}}`
    - –ü—Ä–æ–≤–µ—Ä—å `success: true`

23. **GET** `/courses`
    - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∫—É—Ä—Å —É–¥–∞–ª—ë–Ω

---

## ‚úÖ –í–ê–õ–ò–î–ê–¶–ò–Ø –ò –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö

### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

| –ü–æ–ª–µ | –ü—Ä–æ–≤–µ—Ä–∫–∞ |
|------|----------|
| `title` | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –¥–ª—è –∫—É—Ä—Å–æ–≤, –º–æ–¥—É–ª–µ–π, —É—Ä–æ–∫–æ–≤ |
| `order_index` | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –¥–ª—è –º–æ–¥—É–ª–µ–π –∏ —É—Ä–æ–∫–æ–≤, –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —á–∏—Å–ª–æ–º |
| `courseId`, `moduleId`, `lessonId` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –≤ –ë–î |
| `file_url` | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ |
| `file_type` | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ |

### HTTP —Å—Ç–∞—Ç—É—Å—ã:

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
|-----|----------|-------------------|
| **200** | OK | –£—Å–ø–µ—à–Ω—ã–π GET, PUT, DELETE |
| **201** | Created | –£—Å–ø–µ—à–Ω—ã–π POST (—Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞) |
| **400** | Bad Request | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è |
| **404** | Not Found | –ö—É—Ä—Å/–º–æ–¥—É–ª—å/—É—Ä–æ–∫/–≤–∏–¥–µ–æ/–º–∞—Ç–µ—Ä–∏–∞–ª –Ω–µ –Ω–∞–π–¥–µ–Ω |
| **413** | Payload Too Large | –í–∏–¥–µ–æ > 3 GB |
| **500** | Internal Server Error | –û—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏–ª–∏ –≤ R2 |

### –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫:

**400 - –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–µ:**
```json
{
  "error": "Title is required"
}
```

**404 - –ù–µ –Ω–∞–π–¥–µ–Ω —Ä–µ—Å—É—Ä—Å:**
```json
{
  "error": "Course not found"
}
```

**413 - –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª:**
```json
{
  "error": "File too large",
  "message": "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤–∏–¥–µ–æ: 3 GB",
  "code": "LIMIT_FILE_SIZE"
}
```

**500 - –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:**
```json
{
  "error": "Failed to upload video to R2"
}
```

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:

- ‚úÖ **Service Role Key** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—Ö–æ–¥–∞ RLS (Backend –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)
- ‚úÖ **Signed URLs** –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–∏–¥–µ–æ (—Å—Ä–æ–∫: 2 —á–∞—Å–∞)
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤** - —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ MIME types
- ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞** - –º–∞–∫—Å–∏–º—É–º 3 GB –¥–ª—è –≤–∏–¥–µ–æ
- ‚úÖ **–ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** - –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫—É—Ä—Å–∞ —É–¥–∞–ª—è—é—Ç—Å—è –º–æ–¥—É–ª–∏, —É—Ä–æ–∫–∏, –≤–∏–¥–µ–æ, –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production:

- ‚ö†Ô∏è **–î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é** - –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å/–∏–∑–º–µ–Ω—è—Ç—å –∫—É—Ä—Å—ã
- ‚ö†Ô∏è **Rate Limiting** - –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –≤–∏–¥–µ–æ
- ‚ö†Ô∏è **Virus Scanning** - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ –≤–∏—Ä—É—Å—ã
- ‚ö†Ô∏è **Webhook –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ** - —Ç—Ä–∞–Ω—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–≤—å—é
- ‚ö†Ô∏è **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫—É—Ä—Å–∞–º–∏ –≤ audit log

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### 1. Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (1-2 –¥–Ω—è)

–°–æ–∑–¥–∞—Ç—å React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **CourseBuilder** - –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫—É—Ä—Å–æ–≤ (drag-and-drop –¥–ª—è –º–æ–¥—É–ª–µ–π/—É—Ä–æ–∫–æ–≤)
- **VideoUploader** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
- **VideoPlayer** - –ø–ª–µ–µ—Ä —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- **MaterialList** - —Å–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

### 2. –í–∏–¥–µ–æ-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (1 –¥–µ–Ω—å)

–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤:
- **`video_views`** —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å: `user_id`, `lesson_id`, `watched_seconds`, `progress_percent`
- API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ (2-3 –¥–Ω—è)

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å:
- **–¢—Ä–∞–Ω—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Ä–∞–∑–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (360p, 720p, 1080p)
- **HLS/DASH —Å—Ç—Ä–∏–º–∏–Ω–≥** - –¥–ª—è adaptive bitrate streaming
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–≤—å—é** - —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–∑ –≤–∏–¥–µ–æ
- **–°—É–±—Ç–∏—Ç—Ä—ã** - –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Speech-to-Text API

### 4. –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (1 –¥–µ–Ω—å)

–î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `GET /api/courses/search?q=python` - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/–æ–ø–∏—Å–∞–Ω–∏—é
- `GET /api/courses?level=beginner` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —É—Ä–æ–≤–Ω—é —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- `GET /api/courses?category=programming` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

### 5. Enrollment (–∑–∞–ø–∏—Å—å –Ω–∞ –∫—É—Ä—Å) (1-2 –¥–Ω—è)

–°–æ–∑–¥–∞—Ç—å:
- `user_courses` —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Å–≤—è–∑–∏ —Å—Ç—É–¥–µ–Ω—Ç-–∫—É—Ä—Å
- API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∑–∞–ø–∏—Å–∏/–æ—Ç–ø–∏—Å–∫–∏ –æ—Ç –∫—É—Ä—Å–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —É—Ä–æ–∫–∞–º (—Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–µ —Å—Ç—É–¥–µ–Ω—Ç—ã)

### 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1 –¥–µ–Ω—å)

–ù–∞–ø–∏—Å–∞—Ç—å:
- Unit —Ç–µ—Å—Ç—ã –¥–ª—è Services (Jest)
- Integration —Ç–µ—Å—Ç—ã –¥–ª—è API (Supertest)
- E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### 7. –î–µ–ø–ª–æ–π (1 –¥–µ–Ω—å)

–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å:
- CI/CD pipeline (GitHub Actions)
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- –î–µ–ø–ª–æ–π –Ω–∞ Digital Ocean
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cloudflare CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏

---

## üìà –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:

| –ú–µ—Ç—Ä–∏–∫–∞ | –¶–µ–ª—å | –ö–∞–∫ –∏–∑–º–µ—Ä—è—Ç—å |
|---------|------|--------------|
| **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ** | < 5 –º–∏–Ω—É—Ç –¥–ª—è 1 GB | –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å `upload_start` –∏ `upload_end` |
| **% —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫** | > 95% | `successful_uploads / total_uploads` |
| **–°–∫–æ—Ä–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ signed URL** | < 500ms | –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `getSignedVideoUrl()` |
| **% 404 –æ—à–∏–±–æ–∫** | < 1% | `404_responses / total_responses` |
| **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API** | < 300ms | Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è `response_time` |

---

## üéì –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ù–´–ï –¢–ï–•–ù–û–õ–û–ì–ò–ò

- **Backend:** Node.js 18+, Express.js, TypeScript
- **Database:** Supabase (PostgreSQL)
- **File Storage:** Cloudflare R2 (S3-compatible)
- **File Upload:** Multer (memory storage)
- **SDK:** AWS SDK –¥–ª—è S3 (–¥–ª—è R2)
- **Environment:** dotenv
- **Validation:** Manual (–≤ controllers)

---

## üìö –ü–û–õ–ï–ó–ù–´–ï –°–°–´–õ–ö–ò

- **Cloudflare R2 Docs:** https://developers.cloudflare.com/r2/
- **AWS SDK S3:** https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/s3-examples.html
- **Multer Docs:** https://github.com/expressjs/multer
- **Supabase Docs:** https://supabase.com/docs
- **Signed URLs:** https://developers.cloudflare.com/r2/api/s3/presigned-urls/

---

## ‚ö° –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **R2 Signed URLs:** –ö—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 2 —á–∞—Å–∞ (–Ω–µ –Ω—É–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑)
2. **Cascade Delete:** –û–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º —É–¥–∞–ª—è–µ—Ç—Å—è –≤–µ—Å—å –∫—É—Ä—Å —Å–æ –≤—Å–µ–º–∏ —Å–≤—è–∑—è–º–∏
3. **Memory Storage Multer:** –§–∞–π–ª—ã –Ω–µ –ø–∏—à—É—Ç—Å—è –Ω–∞ –¥–∏—Å–∫ (–±—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∑–∫–∞)
4. **Single SELECT:** –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫—É—Ä—Å–∞/–º–æ–¥—É–ª—è/—É—Ä–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å —Å JOIN

### –£–∑–∫–∏–µ –º–µ—Å—Ç–∞:

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –±–æ–ª—å—à–∏—Ö –≤–∏–¥–µ–æ (> 1 GB):**
   - –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Multipart Upload –¥–ª—è R2
   - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Tus.io –¥–ª—è resumable uploads

2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è signed URL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:**
   - –†–µ—à–µ–Ω–∏–µ: –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å signed URLs –Ω–∞ Frontend (–Ω–∞ 1.5 —á–∞—Å–∞)

3. **Cascade Delete –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫—É—Ä—Å–æ–≤:**
   - –†–µ—à–µ–Ω–∏–µ: –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è (Bull Queue)

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**‚úÖ –í–°–Å –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!**

**–°–æ–∑–¥–∞–Ω–æ:**
- 5 Services
- 5 Controllers
- 5 Routes
- 1 Types —Ñ–∞–π–ª
- 20 API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ~1,700 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- ‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ –õ–æ–≥–∏–∫–∞ CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Postman/curl

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production:** 80%
- ‚úÖ Core —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è
- ‚ö†Ô∏è –ù–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚ö†Ô∏è –ù–µ—Ç rate limiting
- ‚ö†Ô∏è –ù–µ—Ç unit tests

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API —á–µ—Ä–µ–∑ Postman –∏ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏! üöÄ

---

**–î–∞—Ç–∞:** 15 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready (–±–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)

