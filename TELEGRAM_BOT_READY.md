# ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Telegram –±–æ—Ç–∞ –ø–æ –∫–æ–¥—É 2134 - –ì–û–¢–û–í–ê!

## üéâ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `telegram_groups` –≤ –ë–î
- **–§–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏:** `backend/supabase/migrations/create_telegram_groups.sql`
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** Landing Supabase (–¥–ª—è –ª–µ–Ω–¥–∏–Ω–≥–æ–≤)
- **–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç:** chat_id –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥—Ä—É–ø–ø, –∫—Ç–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª, –∫–æ–≥–¥–∞

### 2. ‚úÖ –°–æ–∑–¥–∞–Ω —Ä–æ—É—Ç–µ—Ä –¥–ª—è –±–æ—Ç–∞ –ª–∏–¥–æ–≤
- **–§–∞–π–ª:** `backend/src/routes/telegram-leads.ts`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
  - –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç –∫–æ–¥ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ "2134"
  - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç chat_id –≤ –ë–î
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
  - –ö–æ–º–∞–Ω–¥—ã: /help, /status, /deactivate
  - API endpoints: `/api/telegram-leads/active-groups`, `/api/telegram-leads/test`

### 3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω telegramService.ts
- **–§–∞–π–ª:** `backend/src/services/telegramService.ts`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –¢–µ–ø–µ—Ä—å —á–∏—Ç–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã –∏–∑ –ë–î
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–∏–¥—ã –≤–æ –í–°–ï –∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –≥—Ä—É–ø–ø—ã –µ—Å–ª–∏ –±–æ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
  - Fallback –Ω–∞ —Å—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥ –µ—Å–ª–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

### 4. ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω —Ä–æ—É—Ç–µ—Ä –≤ server.ts
- **–§–∞–π–ª:** `backend/src/server.ts`
- **Route:** `/api/telegram-leads`
- –î–æ—Å—Ç—É–ø–Ω—ã endpoints:
  - `POST /api/telegram-leads/webhook/:token` - –í–µ–±—Ö—É–∫ –¥–ª—è –±–æ—Ç–∞
  - `GET /api/telegram-leads/active-groups` - –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥—Ä—É–ø–ø
  - `POST /api/telegram-leads/test` - –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°:

### –®–ê–ì 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫ –ë–î ‚ö°

**–ß–∏—Ç–∞–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é:** `APPLY_MIGRATION_NOW.md`

–ö—Ä–∞—Ç–∫–æ:
1. –û—Ç–∫—Ä–æ–π https://supabase.com/dashboard/project/xikaiavwqinamgolmtcy/sql/new
2. –°–∫–æ–ø–∏—Ä—É–π SQL –∏–∑ `backend/supabase/migrations/create_telegram_groups.sql`
3. –í—ã–ø–æ–ª–Ω–∏ –≤ SQL Editor
4. –ü—Ä–æ–≤–µ—Ä—å: `SELECT * FROM telegram_groups;`

### –®–ê–ì 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend

```bash
cd backend
npm run dev
# –∏–ª–∏
pm2 restart backend
```

### –®–ê–ì 3: –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É –≤ Telegram

**–ß–∏—Ç–∞–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é:** `TELEGRAM_LEADS_BOT_SETUP.md`

–ö—Ä–∞—Ç–∫–æ:
1. –î–æ–±–∞–≤—å –±–æ—Ç–∞ `@onai_leads_bot` –≤ –≥—Ä—É–ø–ø—É (–∏–ª–∏ –∫–∞–∫ –æ–Ω —É —Ç–µ–±—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è)
2. –°–¥–µ–ª–∞–π –±–æ—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –≥—Ä—É–ø–ø—ã
3. –û—Ç–ø—Ä–∞–≤—å –≤ –≥—Ä—É–ø–ø—É: `2134`
4. –ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º ‚úÖ

### –®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–í–∞—Ä–∏–∞–Ω—Ç 1: –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ API**
```bash
curl -X POST http://localhost:3000/api/telegram-leads/test
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –†–µ–∞–ª—å–Ω–∞—è –∑–∞—è–≤–∫–∞**
–û—Ç–ø—Ä–∞–≤—å –∑–∞—è–≤–∫—É —Å –ª–µ–Ω–¥–∏–Ω–≥–∞:
- ProfTest: https://onai.academy/integrator/proftest
- ExpressCourse: https://onai.academy/integrator/expresscourse

–ó–∞—è–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–π—Ç–∏ –≤ Telegram –≥—Ä—É–ø–ø—É! üöÄ

## ü§ñ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥–µ
   ‚Üì
2. –ó–∞—è–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î (landing_leads)
   ‚Üì
3. Backend –≤—ã–∑—ã–≤–∞–µ—Ç sendLeadNotification()
   ‚Üì
4. –§—É–Ω–∫—Ü–∏—è —á–∏—Ç–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã –∏–∑ telegram_groups
   ‚Üì
5. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –í–°–ï –∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã
   ‚Üì
6. –õ–∏–¥ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ Telegram! üíö
```

## üì± Telegram Bot —Ç–æ–∫–µ–Ω:

```env
TELEGRAM_LEADS_BOT_TOKEN=8275130868:AAGiH466WmyoUQUKN4VfwI3nM1qZAmlUJOQ
```

‚úÖ –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `backend/env.env`

## üéØ API Endpoints:

### –ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã
```bash
GET http://localhost:3000/api/telegram-leads/active-groups

Response:
{
  "success": true,
  "groups": [
    {
      "chat_id": "-1003505301432",
      "chat_title": "–õ–∏–¥—ã –¢—Ä–∏–ø–≤–∞–µ—Ä",
      "is_active": true,
      "activated_by": "misolabs"
    }
  ]
}
```

### –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
```bash
POST http://localhost:3000/api/telegram-leads/test
```

## üìä –õ–æ–≥–∏ backend:

–ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≥—Ä—É–ø–ø—ã:
```
üîê Activation code received from chat -1003505301432 (–õ–∏–¥—ã –¢—Ä–∏–ø–≤–∞–µ—Ä)
‚úÖ New group -1003505301432 activated by misolabs
```

–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ª–∏–¥–∞:
```
üì± Found 1 active group(s) for lead notifications
üì± Sending lead notification to group "–õ–∏–¥—ã –¢—Ä–∏–ø–≤–∞–µ—Ä" (-1003505301432)
‚úÖ Lead notification sent to group "–õ–∏–¥—ã –¢—Ä–∏–ø–≤–∞–µ—Ä"
üìä Lead notification results: 1 success, 0 failed out of 1 groups
```

## üîß –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:

–í –≥—Ä—É–ø–ø–µ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å:
- `2134` - –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É
- `/help` - –°–ø—Ä–∞–≤–∫–∞
- `/status` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≥—Ä—É–ø–ø—ã
- `/deactivate` - –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∏—à–∫–∏:

### –ú–æ–∂–Ω–æ –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø
–î–æ–±–∞–≤—å –±–æ—Ç–∞ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø, –æ—Ç–ø—Ä–∞–≤—å `2134` –≤ –∫–∞–∂–¥–æ–π - –ª–∏–¥—ã –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤–æ –≤—Å–µ!

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è
–ï—Å–ª–∏ –±–æ—Ç —É–¥–∞–ª–µ–Ω –∏–∑ –≥—Ä—É–ø–ø—ã –∏–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –≥—Ä—É–ø–ø–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è.

### –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–π
–í—Å–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î:
```sql
SELECT * FROM telegram_groups ORDER BY activated_at DESC;
```

## üéâ –ì–û–¢–û–í–û!

–¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å:
1. –í–≤–µ—Å—Ç–∏ –∫–æ–¥ `2134` –≤ –≥—Ä—É–ø–ø–µ
2. –ò –ø–æ–ª—É—á–∞—Ç—å –≤—Å–µ –∑–∞—è–≤–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Telegram!

**–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ! üöÄ**

---

**–í–æ–ø—Ä–æ—Å—ã?** –ß–∏—Ç–∞–π:
- `TELEGRAM_LEADS_BOT_SETUP.md` - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `APPLY_MIGRATION_NOW.md` - –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

**–ü—Ä–æ–±–ª–µ–º—ã?** –ü—Ä–æ–≤–µ—Ä—å:
- –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω: —Å–º. –ª–æ–≥–∏ backend
- –ë–æ—Ç - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã
- –¢–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞: `SELECT * FROM telegram_groups;`
