# üî¥ –ü–†–û–ë–õ–ï–ú–ê: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–î–∞—Ç–∞:** 7 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

---

## üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï

### ‚úÖ –ß—Ç–æ –†–ê–ë–û–¢–ê–ï–¢:

1. **Frontend –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤:**
   - ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ Login —Å –¥–∏–∑–∞–π–Ω–æ–º (—á–µ—Ä–Ω—ã–π —Ñ–æ–Ω, –∑–µ–ª–µ–Ω—ã–µ —Ü–≤–µ—Ç–∞, –ª–µ—Ç–∞—é—â–∏–µ –∑–≤–µ–∑–¥—ã)
   - ‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è)
   - ‚úÖ –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ —Å email/password
   - ‚úÖ –ì–ª–∞–∑–∏–∫ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–∞—Ä–æ–ª—è
   - ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (desktop, tablet, mobile)

2. **Backend –Ω–∞—Å—Ç—Ä–æ–µ–Ω:**
   - ‚úÖ Digital Ocean —Å–µ—Ä–≤–µ—Ä (IP: 178.128.203.40)
   - ‚úÖ Nginx + PM2
   - ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–¥–ª—è onai.academy)
   - ‚úÖ –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub —Ä–∞–±–æ—Ç–∞–µ—Ç

3. **Supabase:**
   - ‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω (capdjvokjdivxjfdddmx.supabase.co)
   - ‚úÖ –ê–¥–º–∏–Ω –∞–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   - ‚úÖ URL Configuration –Ω–∞—Å—Ç—Ä–æ–µ–Ω (onai.academy –≤ Redirect URLs)
   - ‚úÖ API keys —Å—É—â–µ—Å—Ç–≤—É—é—Ç

4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   ```
   ‚úÖ Supabase initialized: { url: "https://capdjvokjdivxjfdddmx.supabase.co", keyLength: 208 }
   ```

### ‚ùå –ß—Ç–æ –ù–ï –†–ê–ë–û–¢–ê–ï–¢:

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—Ö–æ–¥–∞ –ø–æ–ª—É—á–∞–µ–º **400 Bad Request**

**–û—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏:**
```
POST https://capdjvokjdivxjfdddmx.supabase.co/auth/v1/token?grant_type=password 400 (Bad Request)

Response:
{
  "message": "No API key found in request",
  "hint": "No `apikey` request header or url param was found."
}
```

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- Supabase –∫–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å API key (keyLength: 208)
- –ù–û –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ API key –ù–ï –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ headers
- Supabase –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å –±–µ–∑ API key

---

## üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´

### 1. –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

**`.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```env
VITE_SUPABASE_URL=https://capdjvokjdivxjfdddmx.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNhcGRqdm9ramRpdnhqZmRkZG14Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxNjc5MDUsImV4cCI6MjA3Nzc0MzkwNX0.bsikIoF86BjthWauzbLXq3SZbNQFodppZ2TC64NniJs
VITE_SITE_URL=https://onai.academy

# OpenAI API Key
VITE_OPENAI_API_KEY=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
VITE_OPENAI_ASSISTANT_ID=asst_SYhUvkKgCMEYlAjA0VNSMbLa

# AI-Mentor & AI-Analyst
VITE_AI_MENTOR_TELEGRAM_TOKEN=8380600260:AAGtuSG9GqFOmkyThhWqRzilHi3gKdKiOSo
VITE_AI_ANALYST_TELEGRAM_TOKEN=8400927507:AAF1w1H8lyE2vonPY-Z61bBybBT8dkN-Ip4
VITE_AI_MENTOR_ENABLED=false
VITE_AI_ANALYST_ENABLED=false

# App URL
VITE_APP_URL=https://onai.academy
```

**`src/lib/supabase.ts`:**
```typescript
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL
const supabaseKey = import.meta.env.VITE_SUPABASE_PUBLISHABLE_KEY

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
if (!supabaseUrl || !supabaseKey) {
  console.error('‚ùå Supabase credentials not found!', {
    url: supabaseUrl,
    keyExists: !!supabaseKey
  })
  throw new Error('Missing Supabase environment variables')
}

console.log('‚úÖ Supabase initialized:', {
  url: supabaseUrl,
  keyLength: supabaseKey?.length
})

export const supabase = createClient(supabaseUrl, supabaseKey, {
  auth: {
    storage: localStorage,
    persistSession: true,
    autoRefreshToken: true,
  }
})
```

### 2. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. **–ü—Ä–∏ —Å–±–æ—Ä–∫–µ (build):**
   - Vite —á–∏—Ç–∞–µ—Ç `.env`
   - –ó–∞–º–µ–Ω—è–µ—Ç `import.meta.env.VITE_*` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
   - –°–æ–∑–¥–∞—ë—Ç production bundle

2. **–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
   - Supabase –∫–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ key –µ—Å—Ç—å (keyLength: 208)

3. **–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—Ö–æ–¥–∞:**
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `supabase.auth.signInWithPassword()`
   - –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫ Supabase
   - **API key –ù–ï –≤–∫–ª—é—á—ë–Ω –≤ headers –∑–∞–ø—Ä–æ—Å–∞**
   - Supabase –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 400 Error

### 3. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

#### **–ü—Ä–∏—á–∏–Ω–∞ #1: Vite –Ω–µ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç .env –ø—Ä–∏ production build**
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `VITE_`
- –§–∞–π–ª `.env` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- –ü—Ä–∏ —Å–±–æ—Ä–∫–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ "–∑–∞—à–∏–≤–∞—é—Ç—Å—è" –≤ –∫–æ–¥

#### **–ü—Ä–∏—á–∏–Ω–∞ #2: Supabase client –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω**
- –í–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
- –í–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å –≤–µ—Ä—Å–∏–µ–π `@supabase/supabase-js`

#### **–ü—Ä–∏—á–∏–Ω–∞ #3: API key –∏–º–µ–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç**
- Key –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å JWT —Ç–æ–∫–µ–Ω–æ–º (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `eyJ...`)
- –î–ª–∏–Ω–∞ ~200+ —Å–∏–º–≤–æ–ª–æ–≤

#### **–ü—Ä–∏—á–∏–Ω–∞ #4: –ö–µ—à –±—Ä–∞—É–∑–µ—Ä–∞**
- –°—Ç–∞—Ä—ã–π –±–∏–ª–¥ –±–µ–∑ API key –∫–µ—à–∏—Ä—É–µ—Ç—Å—è
- –ù—É–∂–Ω–∞ –∂—ë—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞

---

## üîß –í–û–ó–ú–û–ñ–ù–´–ï –†–ï–®–ï–ù–ò–Ø

### –†–µ—à–µ–Ω–∏–µ #1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ –±–∏–ª–¥

**–î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```typescript
// src/lib/supabase.ts
console.log('üîç Environment check:', {
  url: import.meta.env.VITE_SUPABASE_URL,
  key: import.meta.env.VITE_SUPABASE_PUBLISHABLE_KEY?.substring(0, 20) + '...',
  mode: import.meta.env.MODE,
  dev: import.meta.env.DEV,
  prod: import.meta.env.PROD
})
```

### –†–µ—à–µ–Ω–∏–µ #2: –Ø–≤–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å headers –≤ createClient

```typescript
export const supabase = createClient(supabaseUrl, supabaseKey, {
  auth: {
    storage: localStorage,
    persistSession: true,
    autoRefreshToken: true,
  },
  global: {
    headers: {
      'apikey': supabaseKey,
      'Authorization': `Bearer ${supabaseKey}`
    }
  }
})
```

### –†–µ—à–µ–Ω–∏–µ #3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è DEV

```typescript
const supabaseUrl = import.meta.env.VITE_SUPABASE_URL || 'https://capdjvokjdivxjfdddmx.supabase.co'
const supabaseKey = import.meta.env.VITE_SUPABASE_PUBLISHABLE_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
```

### –†–µ—à–µ–Ω–∏–µ #4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å vite.config.ts

–î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:

```typescript
// vite.config.ts
export default defineConfig({
  define: {
    'import.meta.env.VITE_SUPABASE_URL': JSON.stringify(process.env.VITE_SUPABASE_URL),
    'import.meta.env.VITE_SUPABASE_PUBLISHABLE_KEY': JSON.stringify(process.env.VITE_SUPABASE_PUBLISHABLE_KEY),
  },
  // ... rest of config
})
```

### –†–µ—à–µ–Ω–∏–µ #5: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å envfile –¥–ª—è production

–°–æ–∑–¥–∞—Ç—å `.env.production`:

```env
VITE_SUPABASE_URL=https://capdjvokjdivxjfdddmx.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNhcGRqdm9ramRpdnhqZmRkZG14Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxNjc5MDUsImV4cCI6MjA3Nzc0MzkwNX0.bsikIoF86BjthWauzbLXq3SZbNQFodppZ2TC64NniJs
```

---

## üìã –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–õ–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@178.128.203.40
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–π–¥–∏ –≤ –ø—Ä–æ–µ–∫—Ç

```bash
cd /var/www/onai-integrator-login
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å .env

```bash
cat .env | grep SUPABASE
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
VITE_SUPABASE_URL=https://capdjvokjdivxjfdddmx.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=eyJhbG...
```

### –®–∞–≥ 4: –ò—Å–ø—Ä–∞–≤—å src/lib/supabase.ts

–í–∞—Ä–∏–∞–Ω—Ç A - –î–æ–±–∞–≤–∏—Ç—å headers —è–≤–Ω–æ:

```typescript
export const supabase = createClient(supabaseUrl, supabaseKey, {
  auth: {
    storage: localStorage,
    persistSession: true,
    autoRefreshToken: true,
  },
  global: {
    headers: {
      'apikey': supabaseKey
    }
  }
})
```

–í–∞—Ä–∏–∞–Ω—Ç B - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å hardcoded –∑–Ω–∞—á–µ–Ω–∏—è (–¥–ª—è —Ç–µ—Å—Ç–∞):

```typescript
const supabaseUrl = 'https://capdjvokjdivxjfdddmx.supabase.co'
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNhcGRqdm9ramRpdnhqZmRkZG14Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxNjc5MDUsImV4cCI6MjA3Nzc0MzkwNX0.bsikIoF86BjthWauzbLXq3SZbNQFodppZ2TC64NniJs'

export const supabase = createClient(supabaseUrl, supabaseKey)
```

### –®–∞–≥ 5: –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å

```bash
# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π dist
rm -rf dist

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
npm run build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PM2
pm2 restart onai-app
pm2 save
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

1. –û—Ç–∫—Ä–æ–π: http://onai.academy
2. –ñ—ë—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞: Ctrl+Shift+R
3. –û—Ç–∫—Ä–æ–π DevTools (F12) ‚Üí Console
4. –ü–æ–ø—Ä–æ–±—É–π –≤–æ–π—Ç–∏
5. –°–º–æ—Ç—Ä–∏ —á—Ç–æ –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏ Network

---

## üöÄ –ü–û–õ–ù–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –î–ï–ü–õ–û–Æ

### 1. –õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
# –ü–µ—Ä–µ–π–¥–∏ –≤ –ø—Ä–æ–µ–∫—Ç –ª–æ–∫–∞–ª—å–Ω–æ
cd "/Users/miso/Documents/MVP onAI Academy Platform/onai-integrator-login"

# –°–¥–µ–ª–∞–π –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
# ...

# –ö–æ–º–º–∏—Ç
git add -A
git commit -m "fix: —Ç–≤–æ—ë –æ–ø–∏—Å–∞–Ω–∏–µ"

# –ü—É—à –Ω–∞ GitHub
git push origin main
```

### 2. –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)

```bash
# –ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
./deploy.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç deploy.sh:**
1. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É (178.128.203.40)
2. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `/var/www/onai-integrator-login`
3. –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git reset --hard`)
4. –°–∫–∞—á–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–¥ (`git pull`)
5. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`npm install`)
6. –°–æ–±–∏—Ä–∞–µ—Ç production –±–∏–ª–¥ (`npm run build`)
7. –û–±–Ω–æ–≤–ª—è–µ—Ç Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
8. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç PM2

### 3. –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–≤—Ä—É—á–Ω—É—é)

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å:

```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh root@178.128.203.40

# –ü–µ—Ä–µ–π–¥–∏ –≤ –ø—Ä–æ–µ–∫—Ç
cd /var/www/onai-integrator-login

# –°–±—Ä–æ—Å –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
git reset --hard HEAD
git clean -fd

# –°–∫–∞—á–∞–π –Ω–æ–≤—ã–π –∫–æ–¥
git pull origin main

# –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npm install

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏
npm run build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ PM2
pm2 restart onai-app
pm2 save

# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
pm2 logs onai-app --lines 50
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# –°—Ç–∞—Ç—É—Å PM2
pm2 status

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 logs onai-app

# Nginx —Å—Ç–∞—Ç—É—Å
systemctl status nginx

# Nginx –ª–æ–≥–∏
tail -f /var/log/nginx/error.log
```

---

## üåê –î–û–ú–ï–ù–´ –ò SSL

### –¢–µ–∫—É—â–∏–µ –¥–æ–º–µ–Ω—ã:

1. **onai.academy** (—Ä–∞–±–æ—Ç–∞–µ—Ç, SSL –µ—Å—Ç—å)
   - A –∑–∞–ø–∏—Å—å: 178.128.203.40
   - SSL: Let's Encrypt (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
   - Nginx config: `/etc/nginx/sites-available/onai-integrator-login.conf`

2. **onai.academy** (HTTP —Ä–∞–±–æ—Ç–∞–µ—Ç, SSL –ù–ï–¢)
   - A –∑–∞–ø–∏—Å—å: –ù–£–ñ–ù–û –ù–ê–°–¢–†–û–ò–¢–¨ ‚Üí 178.128.203.40
   - Nginx config: `/etc/nginx/sites-available/onai.academy`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL –¥–ª—è onai.academy:

```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh root@178.128.203.40

# –£—Å—Ç–∞–Ω–æ–≤–∏ SSL —á–µ—Ä–µ–∑ Certbot
certbot --nginx -d onai.academy -d www.onai.academy

# Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç –¥–æ–º–µ–Ω
# 2. –ü–æ–ª—É—á–∏—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
# 3. –û–±–Ω–æ–≤–∏—Ç Nginx –∫–æ–Ω—Ñ–∏–≥
# 4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç Nginx
```

---

## üìä –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê –ù–ê –°–ï–†–í–ï–†–ï

```
/var/www/onai-integrator-login/
‚îú‚îÄ‚îÄ dist/                  # Production build (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
‚îú‚îÄ‚îÄ src/                   # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Login.tsx      # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ supabase.ts    # Supabase client ‚Üê –ü–†–û–ë–õ–ï–ú–ê –ó–î–ï–°–¨
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ .env                   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ vite.config.ts
‚îî‚îÄ‚îÄ ...

/etc/nginx/sites-available/
‚îú‚îÄ‚îÄ onai-integrator-login.conf  # onai.academy
‚îî‚îÄ‚îÄ onai.academy                # onai.academy
```

---

## üîë –í–ê–ñ–ù–´–ï –î–ê–ù–ù–´–ï

### Supabase:
- **URL:** https://capdjvokjdivxjfdddmx.supabase.co
- **Project ID:** capdjvokjdivxjfdddmx
- **Anon Key:** eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNhcGRqdm9ramRpdnhqZmRkZG14Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxNjc5MDUsImV4cCI6MjA3Nzc0MzkwNX0.bsikIoF86BjthWauzbLXq3SZbNQFodppZ2TC64NniJs
- **Dashboard:** https://supabase.com/dashboard/project/capdjvokjdivxjfdddmx

### –ê–¥–º–∏–Ω –∞–∫–∫–∞—É–Ω—Ç:
- **Email:** saint@onaiacademy.kz
- **Password:** Onai2134!
- **–†–æ–ª—å:** admin
- **is_ceo:** true

### –°–µ—Ä–≤–µ—Ä:
- **IP:** 178.128.203.40
- **SSH:** root@178.128.203.40
- **OS:** Ubuntu 24.04.3 LTS
- **Web Server:** Nginx
- **Process Manager:** PM2

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –ó–ê–î–ê–ß–ò

1. **–ö–†–ò–¢–ò–ß–ù–û:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (API key –≤ headers)
2. **–í–ê–ñ–ù–û:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL –¥–ª—è onai.academy
3. **–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û:** –û–±–Ω–æ–≤–∏—Ç—å redirect URLs –≤ Supabase
4. **–ë–£–î–£–©–ï–ï:** –í–∏–¥–µ–æ –ø–ª–µ–µ—Ä, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫—É—Ä—Å–æ–≤

---

## üìû –ö–û–ù–¢–ê–ö–¢–´ –ò –†–ï–°–£–†–°–´

- **GitHub:** https://github.com/onaicademy/onai-integrator-login
- **Supabase Docs:** https://supabase.com/docs/reference/javascript/auth-signinwithpassword
- **Vite Docs (Env):** https://vitejs.dev/guide/env-and-mode.html

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò –†–ï–®–ï–ù–ò–Ø

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å:

- [ ] –í –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω–æ: `‚úÖ Supabase initialized: { url: "...", keyLength: 208 }`
- [ ] –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—Ö–æ–¥–∞ –ù–ï–¢ –æ—à–∏–±–∫–∏ "No API key found"
- [ ] Request –≤ Network —Å–æ–¥–µ—Ä–∂–∏—Ç header `apikey: eyJhbG...`
- [ ] –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è toast "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!"
- [ ] –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/courses`
- [ ] –ó–≤—ë–∑–¥—ã –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ –≤–≤–æ–¥–µ

---

**–£–¥–∞—á–∏! –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å - –ø–∏—à–∏! üöÄ**

