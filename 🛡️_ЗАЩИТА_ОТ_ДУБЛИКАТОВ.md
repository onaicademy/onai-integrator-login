# üõ°Ô∏è –ó–ê–©–ò–¢–ê –û–¢ –î–£–ë–õ–ò–ö–ê–¢–û–í - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

## ‚ö†Ô∏è –í–ï–†–û–Ø–¢–ù–û–°–¢–¨ –ü–û–í–¢–û–†–ï–ù–ò–Ø: 80-90%

–ë–µ–∑ –∑–∞—â–∏—Ç—ã –ø—Ä–æ–±–ª–µ–º–∞ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –í–ï–†–ù–ï–¢–°–Ø** –ø–æ—Ç–æ–º—É —á—Ç–æ:
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º `npm run dev` —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å
- –°—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–µ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ó–∞ –Ω–µ–¥–µ–ª—é –Ω–∞–∫–æ–ø–∏—Ç—Å—è 10+ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –î—É–±–ª–∏–∫–∞—Ç—ã –≤–µ—Ä–Ω—É—Ç—Å—è!

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã

–Ø —Å–æ–∑–¥–∞–ª **2 –∑–∞—â–∏—Ç–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞**:

### 1Ô∏è‚É£ `start-clean.sh` - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –∏ —É–±–∏–≤–∞–µ—Ç –í–°–ï —Å—Ç–∞—Ä—ã–µ Node –ø—Ä–æ—Ü–µ—Å—Å—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –ø–æ—Ä—Ç 3000 —Å–≤–æ–±–æ–¥–µ–Ω
- ‚úÖ –ñ–¥–µ—Ç 3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç —á–∏—Å—Ç—ã–π —Å–µ—Ä–≤–µ—Ä
- ‚úÖ **–ì–ê–†–ê–ù–¢–ò–†–£–ï–¢**: –¢–æ–ª—å–∫–æ 1 –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 3000!

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞
cd backend
./scripts/start-clean.sh

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ npm (—É–¥–æ–±–Ω–µ–µ!)
npm run dev:clean

# –í–∞—Ä–∏–∞–Ω—Ç 3: –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
cd backend && npm run dev:clean
```

### 2Ô∏è‚É£ `check-duplicates.sh` - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- üîç –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Node —Ä–∞–±–æ—Ç–∞–µ—Ç
- üîç –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ –ø–æ—Ä—Ç—É 3000
- üîç –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç PID –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- üîç –î–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —á—Ç–æ –¥–µ–ª–∞—Ç—å

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run check

# –ò–ª–∏ –ø—Ä—è–º–æ:
./scripts/check-duplicates.sh
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìä –í—Å–µ–≥–æ Node –ø—Ä–æ—Ü–µ—Å—Å–æ–≤: 3
‚úÖ –ü—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (3)

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

üîå –ü—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ –ø–æ—Ä—Ç—É 3000: 1
‚úÖ –¢–æ–ª—å–∫–æ 1 –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 3000
   PID: 43473

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

‚úÖ –í–°–ï –•–û–†–û–®–û! –î—É–±–ª–∏–∫–∞—Ç–æ–≤ –Ω–µ—Ç, —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
```

---

## üìã –ù–û–í–´–ï NPM –ö–û–ú–ê–ù–î–´:

–û–±–Ω–æ–≤–∏–ª `package.json`:

```json
{
  "scripts": {
    "dev": "nodemon --exec tsx src/server.ts",
    "dev:clean": "bash scripts/start-clean.sh",  // ‚≠ê –ù–û–í–û–ï
    "check": "bash scripts/check-duplicates.sh"  // ‚≠ê –ù–û–í–û–ï
  }
}
```

### **–¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–π:**

```bash
# –í–°–ï–ì–î–ê –∑–∞–ø—É—Å–∫–∞–π —Å –æ—á–∏—Å—Ç–∫–æ–π!
npm run dev:clean

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏
npm run check

# –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (–ù–ï –±–µ–∑–æ–ø–∞—Å–Ω—ã–π!)
npm run dev  # ‚ùå –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã!
```

---

## üéØ –†–ê–ë–û–ß–ò–ô –ü–†–û–¶–ï–°–°:

### **–ö–∞–∂–¥—ã–π –¥–µ–Ω—å / –ü–æ—Å–ª–µ git pull:**

```bash
cd backend

# 1. –ü—Ä–æ–≤–µ—Ä—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
npm run check

# 2. –ó–∞–ø—É—Å—Ç–∏ —Å –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–æ–π
npm run dev:clean

# –ì–æ—Ç–æ–≤–æ! ‚úÖ
```

### **–ï—Å–ª–∏ –∑–∞–º–µ—Ç–∏–ª –¥—É–±–ª–∏–∫–∞—Ç—ã:**

```bash
# 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
npm run check
# –ü–æ–∫–∞–∂–µ—Ç —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –≥–¥–µ –ø—Ä–æ–±–ª–µ–º–∞

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –æ—á–∏—Å—Ç–∫–æ–π
npm run dev:clean
# –£–±—å–µ—Ç –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç —á–∏—Å—Ç—ã–π

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
npm run check
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: ‚úÖ –í–°–ï –•–û–†–û–®–û!
```

---

## üöÄ –ü–†–û–î–í–ò–ù–£–¢–û–ï –†–ï–®–ï–ù–ò–ï: PM2

–î–ª—è **production** —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PM2:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2 (–æ–¥–∏–Ω —Ä–∞–∑)
npm install -g pm2

# –°–æ–∑–¥–∞–π –∫–æ–Ω—Ñ–∏–≥
cat > ecosystem.config.js << 'EOF'
module.exports = {
  apps: [{
    name: 'onai-backend',
    script: 'npm',
    args: 'run dev',
    cwd: '/Users/miso/onai-integrator-login/backend',
    instances: 1,  // ‚≠ê –ì–ê–†–ê–ù–¢–ò–Ø: –¢–æ–ª—å–∫–æ 1 –∏–Ω—Å—Ç–∞–Ω—Å!
    autorestart: true,
    watch: false,
    max_memory_restart: '1G',
    env: {
      NODE_ENV: 'production'
    }
  }]
}
EOF

# –ó–∞–ø—É—Å–∫
pm2 start ecosystem.config.js

# –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
pm2 status              # –°—Ç–∞—Ç—É—Å
pm2 logs onai-backend   # –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 restart onai-backend # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 stop onai-backend    # –û—Å—Ç–∞–Ω–æ–≤–∫–∞

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
pm2 save
pm2 startup
```

**PM2 –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–ì–ê–†–ê–ù–¢–ò–†–£–ï–¢ —Ç–æ–ª—å–∫–æ 1 –ø—Ä–æ—Ü–µ—Å—Å** (instances: 1)
- ‚úÖ Auto-restart –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU/Memory
- ‚úÖ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –ù–µ—Ç —Ä–∏—Å–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤!

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï –í–ï–†–û–Ø–¢–ù–û–°–¢–ò –î–£–ë–õ–ò–ö–ê–¢–û–í:

| –ú–µ—Ç–æ–¥ –∑–∞–ø—É—Å–∫–∞ | –†–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ | –ü—Ä–æ—Å—Ç–æ—Ç–∞ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------------|----------------|----------|--------------|
| `npm run dev` | ‚ùå 90% | ‚úÖ –õ–µ–≥–∫–æ | –ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
| `npm run dev:clean` | ‚ö†Ô∏è 10% | ‚úÖ –õ–µ–≥–∫–æ | ‚úÖ –•–æ—Ä–æ—à–æ –¥–ª—è dev |
| `PM2` | ‚úÖ 0% | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ | ‚úÖ **–õ–£–ß–®–ï–ï –¥–ª—è production** |
| `Docker` | ‚úÖ 0% | ‚ùå –°–ª–æ–∂–Ω–æ | ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è scale |

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:

### **–î–ª—è Development (—Å–µ–π—á–∞—Å):**
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û —ç—Ç–æ:
npm run dev:clean

# –ü—Ä–æ–≤–µ—Ä—è–π —Ä–∞–∑ –≤ –¥–µ–Ω—å:
npm run check
```

### **–î–ª—è Production (–≤ –±—É–¥—É—â–µ–º):**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏ PM2:
npm install -g pm2

# –ó–∞–ø—É—Å—Ç–∏:
pm2 start ecosystem.config.js

# –ù–∞—Å—Ç—Ä–æ–π –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫:
pm2 save
pm2 startup
```

---

## üéØ –í–ï–†–û–Ø–¢–ù–û–°–¢–¨ –ü–û–°–õ–ï –ó–ê–©–ò–¢–´:

- **–° `npm run dev:clean`:** ‚ö†Ô∏è 5-10% (–µ—Å–ª–∏ –∑–∞–±—É–¥–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)
- **–° PM2:** ‚úÖ 0% (–ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞—â–∏—â–µ–Ω!)

---

## üìù –ß–ï–ö–õ–ò–°–¢ –ù–ê –ö–ê–ñ–î–´–ô –î–ï–ù–¨:

```bash
# –£—Ç—Ä–æ–º / –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞:
cd backend
npm run check           # ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞
npm run dev:clean       # ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫

# –ü–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ (–æ—Ç–ø—Ä–∞–≤–∫–∞ –ª–∏–¥–æ–≤):
npm run check           # ‚úÖ –£–±–µ–¥–∏—Å—å —á—Ç–æ –≤—Å–µ –û–ö

# –ï—Å–ª–∏ –∑–∞–º–µ—Ç–∏–ª –¥—É–±–ª–∏–∫–∞—Ç—ã:
npm run dev:clean       # ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –æ—á–∏—Å—Ç–∫–æ–π
npm run check           # ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
```

---

## ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢:

**–ü–†–Ø–ú–û –°–ï–ô–ß–ê–° –∑–∞–ø—É—Å—Ç–∏ –∑–∞—â–∏—â–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:**

```bash
cd /Users/miso/onai-integrator-login/backend

# –£–±–µ–π –≤—Å–µ —Å—Ç–∞—Ä–æ–µ
killall -9 node nodemon

# –ó–∞–ø—É—Å—Ç–∏ —Å –∑–∞—â–∏—Ç–æ–π
npm run dev:clean
```

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –∑–∞—â–∏—â–µ–Ω –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤!** üõ°Ô∏è‚úÖ

---

## üÜò –ï–°–õ–ò –ß–¢–û-–¢–û –ü–û–®–õ–û –ù–ï –¢–ê–ö:

```bash
# –ê–≤–∞—Ä–∏–π–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞:
killall -9 node nodemon
sleep 3
lsof -ti:3000 | xargs kill -9 2>/dev/null
sleep 2
cd backend && npm run dev:clean

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å–∏—Å—Ç–µ–º—É (–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –æ—á–∏—Å—Ç–∏—Ç –≤—Å–µ)
sudo reboot
```

**–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã:**
- ‚úÖ `backend/scripts/start-clean.sh` - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫
- ‚úÖ `backend/scripts/check-duplicates.sh` - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- ‚úÖ `backend/package.json` - –û–±–Ω–æ–≤–ª–µ–Ω (–Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã)

**–ò—Å–ø–æ–ª—å–∑—É–π `npm run dev:clean` –í–°–ï–ì–î–ê!** üõ°Ô∏è




