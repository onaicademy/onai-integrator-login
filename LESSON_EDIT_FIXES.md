# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ê –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –í –î–ò–ê–õ–û–ì –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø!

## üî¥ –ü–†–û–ë–õ–ï–ú–´ –ë–´–õ–ò:

1. **–û—à–∏–±–∫–∞ `Cannot read properties of undefined (reading 'trim')`**
   - –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –¥–∏–∞–ª–æ–≥–∞ `title` –±—ã–ª `undefined`
   - –õ–æ–º–∞–ª–æ –≤–µ—Å—å –¥–∏–∞–ª–æ–≥

2. **–î–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å**
   - `lesson` –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –∫–∞–∫ `{id: undefined, title: undefined, ...}`
   - –ü–æ–ª—è –±—ã–ª–∏ –ø—É—Å—Ç—ã–µ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

3. **–ù–µ –±—ã–ª–æ –∫–Ω–æ–ø–∫–∏ "–£–¥–∞–ª–∏—Ç—å –≤–∏–¥–µ–æ"**
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—ã–ª–æ –∑–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ –≤–∏–¥–µ–æ

4. **–ö–Ω–æ–ø–∫–∞ –≤—Å–µ–≥–¥–∞ –≥–æ–≤–æ—Ä–∏–ª–∞ "–°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫"**
   - –î–∞–∂–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:

### 1. –ó–∞—â–∏—Ç–∞ –æ—Ç `undefined` –≤ –ø—Ä–æ–≤–µ—Ä–∫–µ `title`

**–§–∞–π–ª:** `src/components/admin/LessonEditDialog.tsx:356`

**–ë—ã–ª–æ:**
```typescript
disabled={!title.trim() || isUploading}  // ‚ùå –û—à–∏–±–∫–∞ –µ—Å–ª–∏ title undefined!
```

**–°—Ç–∞–ª–æ:**
```typescript
disabled={!title || !title.trim() || isUploading}  // ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ undefined
```

---

### 2. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–∫–∞

**–§–∞–π–ª:** `src/pages/Lesson.tsx:816-829`

**–ë—ã–ª–æ:**
```typescript
{isAdmin && lesson && (
  <LessonEditDialog
    lesson={{
      id: lesson.id,          // –º–æ–∂–µ—Ç –±—ã—Ç—å undefined!
      title: lesson.title,    // –º–æ–∂–µ—Ç –±—ã—Ç—å undefined!
      ...
    }}
  />
)}
```

**–°—Ç–∞–ª–æ:**
```typescript
{isAdmin && (
  <LessonEditDialog
    lesson={lesson ? {
      id: lesson.id,
      title: lesson.title || '',           // ‚úÖ Fallback
      description: lesson.description || '',
      duration_minutes: lesson.duration_minutes || 0
    } : null}                                // ‚úÖ null –µ—Å–ª–∏ lesson –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω
  />
)}
```

---

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–£–¥–∞–ª–∏—Ç—å –≤–∏–¥–µ–æ"

**–§–∞–π–ª:** `src/components/admin/LessonEditDialog.tsx:426-451`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```typescript
{videoUrl && (
  <div className="mt-4 space-y-3">
    <div className="flex items-center justify-between">
      <p className="text-sm text-[#00ff00]">‚úÖ –í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ</p>
      <Button
        variant="outline"
        size="sm"
        onClick={() => {
          if (confirm('–£–¥–∞–ª–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –≤–∏–¥–µ–æ? –í—ã —Å–º–æ–∂–µ—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ–µ.')) {
            setVideoUrl('');      // –û—á–∏—Å—Ç–∏—Ç—å URL
            setVideoFile(null);   // –û—á–∏—Å—Ç–∏—Ç—å —Ñ–∞–π–ª
          }
        }}
        className="text-red-400 hover:text-red-300 border-red-400/30"
      >
        üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤–∏–¥–µ–æ
      </Button>
    </div>
    <video controls className="w-full rounded-lg border border-gray-800">
      <source src={videoUrl} />
    </video>
    <p className="text-xs text-gray-500">
      üí° –£–¥–∞–ª–∏—Ç–µ —Ç–µ–∫—É—â–µ–µ –≤–∏–¥–µ–æ, —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ–µ
    </p>
  </div>
)}
```

---

### 4. –†–∞–∑–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª:** `src/components/admin/LessonEditDialog.tsx:359-365`

**–ë—ã–ª–æ:**
```typescript
<>üöÄ –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</>
```

**–°—Ç–∞–ª–æ:**
```typescript
{isUploading ? (
  <>‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ {uploadProgress}%...</>
) : lesson ? (
  <>üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</>        // ‚úÖ –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
) : (
  <>üöÄ –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</>  // ‚úÖ –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
)}
```

---

### 5. –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `handleSubmit`

**–§–∞–π–ª:** `src/components/admin/LessonEditDialog.tsx:101-129`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```typescript
// –†–ï–ñ–ò–ú –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø: –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —É—Ä–æ–∫
if (lesson && lesson.id) {
  setUploadStatus('üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è...');
  console.log('üíæ –û–±–Ω–æ–≤–ª—è–µ–º —É—Ä–æ–∫:', lesson.id, { title, description });
  
  await api.put(`/api/lessons/${lesson.id}`, {
    title: title,
    description: description || '',
  });
  
  setUploadProgress(100);
  setUploadStatus('‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
  
  // –í—ã–∑—ã–≤–∞–µ–º onSave –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  if (onSave) {
    await onSave({ title, description });
  }
  
  setTimeout(() => {
    setIsUploading(false);
    onClose();
  }, 1000);
  
  return;
}

// –†–ï–ñ–ò–ú –°–û–ó–î–ê–ù–ò–Ø: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —É—Ä–æ–∫
// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è ...
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:

### –¢–µ—Å—Ç 1: –û—Ç–∫—Ä–æ–π –¥–∏–∞–ª–æ–≥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```
1. –û—Ç–∫—Ä–æ–π: http://localhost:8080/course/1/module/1/lesson/18
2. –ù–∞–∂–º–∏ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–∫"

–û–∂–∏–¥–∞–µ—Ç—Å—è:
‚úÖ –î–∏–∞–ª–æ–≥ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ë–ï–ó –æ—à–∏–±–æ–∫
‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –≤ –ø–æ–ª–µ
‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –≤ –ø–æ–ª–µ
‚úÖ –í–∏–¥–µ–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è (–µ—Å–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–æ)
‚úÖ –ö–Ω–æ–ø–∫–∞ –≥–æ–≤–æ—Ä–∏—Ç "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"
```

---

### –¢–µ—Å—Ç 2: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è

```
1. –í –¥–∏–∞–ª–æ–≥–µ –∏–∑–º–µ–Ω–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞
2. –ù–∞–∂–º–∏ "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"

–û–∂–∏–¥–∞–µ—Ç—Å—è:
‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è..."
‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä –¥–æ—Ö–æ–¥–∏—Ç –¥–æ 100%
‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!"
‚úÖ –î–∏–∞–ª–æ–≥ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å –Ω–æ–≤—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º
```

---

### –¢–µ—Å—Ç 3: –£–¥–∞–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ

```
1. –û—Ç–∫—Ä–æ–π —É—Ä–æ–∫ —Å –≤–∏–¥–µ–æ
2. –ù–∞–∂–º–∏ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–∫"
3. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ —Ç–∞–± "–í–∏–¥–µ–æ"
4. –í–∏–¥–Ω–æ –≤–∏–¥–µ–æ –∏ –∫–Ω–æ–ø–∫–∞ "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤–∏–¥–µ–æ"
5. –ù–∞–∂–º–∏ "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤–∏–¥–µ–æ"
6. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏ —É–¥–∞–ª–µ–Ω–∏–µ

–û–∂–∏–¥–∞–µ—Ç—Å—è:
‚úÖ –í–∏–¥–µ–æ –∏—Å—á–µ–∑–∞–µ—Ç
‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ
‚úÖ –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ–µ –≤–∏–¥–µ–æ
```

---

### –¢–µ—Å—Ç 4: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —É—Ä–æ–∫–∞

```
1. –û—Ç–∫—Ä–æ–π: http://localhost:8080/course/1/module/1
2. –ù–∞–∂–º–∏ "–î–æ–±–∞–≤–∏—Ç—å —É—Ä–æ–∫"

–û–∂–∏–¥–∞–µ—Ç—Å—è:
‚úÖ –î–∏–∞–ª–æ–≥ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ë–ï–ó –æ—à–∏–±–æ–∫
‚úÖ –ü–æ–ª—è –ø—É—Å—Ç—ã–µ
‚úÖ –ö–Ω–æ–ø–∫–∞ –≥–æ–≤–æ—Ä–∏—Ç "üöÄ –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã"
‚úÖ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫
```

---

## üìÅ –ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´:

- ‚úÖ `src/components/admin/LessonEditDialog.tsx`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `!title` –ø–µ—Ä–µ–¥ `.trim()`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–£–¥–∞–ª–∏—Ç—å –≤–∏–¥–µ–æ"
  - –ò–∑–º–µ–Ω–µ–Ω —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ (–°–æ–∑–¥–∞—Ç—å/–°–æ—Ö—Ä–∞–Ω–∏—Ç—å)
  - –î–æ–±–∞–≤–ª–µ–Ω —Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `handleSubmit`

- ‚úÖ `src/pages/Lesson.tsx`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ `lesson` —Å fallback –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
  - –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `lesson &&` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°:

```
‚úÖ –î–∏–∞–ª–æ–≥ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
‚úÖ –î–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –ö–Ω–æ–ø–∫–∞ "–£–¥–∞–ª–∏—Ç—å –≤–∏–¥–µ–æ" –¥–æ–±–∞–≤–ª–µ–Ω–∞
‚úÖ –†–∞–∑–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫ (–°–æ–∑–¥–∞—Ç—å/–°–æ—Ö—Ä–∞–Ω–∏—Ç—å)
‚úÖ Backend —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç
```

---

## üöÄ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ:

**http://localhost:8080**

**–û—Ç–∫—Ä–æ–π —É—Ä–æ–∫ ‚Üí –ù–∞–∂–º–∏ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–∫" ‚Üí –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!** üî•

