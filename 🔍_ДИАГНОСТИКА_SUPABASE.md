# üîç –ü–û–õ–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê SUPABASE

**–î–∞—Ç–∞:** 7 –Ω–æ—è–±—Ä—è 2025  
**–¶–µ–ª—å:** –í—ã—è—Å–Ω–∏—Ç—å –ø–æ—á–µ–º—É –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è API key

---

## ‚úÖ –ß–¢–û –î–û–ë–ê–í–õ–ï–ù–û

### 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ `src/lib/supabase.ts`

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥–µ—Ç:

```
üîç SUPABASE –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê
  –í—Å–µ VITE –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: {
    VITE_SUPABASE_URL: "https://capdjvokjdivxjfdddmx.supabase.co"
    VITE_SUPABASE_PUBLISHABLE_KEY: "eyJhbGciOiJIUzI1NiIsInR5cCI6..."
    VITE_SUPABASE_ANON_KEY: undefined
    MODE: "production"
    DEV: false
    PROD: true
  }
  ‚úÖ Supabase config: {
    url: "https://capdjvokjdivxjfdddmx.supabase.co"
    keyLength: 208
    keyPreview: "eyJhbGciOiJIUzI1NiIsInR5cCI6..."
    keyFull: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3M..."
  }
```

### 2. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ `src/pages/Login.tsx`

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—Ö–æ–¥–∞ –±—É–¥–µ—Ç:

```
üîê –ü–û–ü–´–¢–ö–ê –í–•–û–î–ê
  üìß Email: saint@onaiacademy.kz
  üîë Password length: 9
  üìä Request payload: {
    email: "saint@onaiacademy.kz"
    password: "***34!"
  }
  üì• Response data: {...}
  ‚ùå Response error: {...}
```

---

## üöÄ –î–ï–ü–õ–û–ô –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò

### 1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å

```bash
cd "/Users/miso/Documents/MVP onAI Academy Platform/onai-integrator-login"

git add -A
git commit -m "feat: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Supabase"
git push origin main
```

### 2. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
./deploy.sh
```

---

## üîç –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –°–ë–û–†–£ –î–ê–ù–ù–´–•

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π —Å–∞–π—Ç

https://onai.academy

### –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π DevTools

- **Windows/Linux:** `F12` –∏–ª–∏ `Ctrl+Shift+I`
- **Mac:** `Cmd+Option+I`

### –®–∞–≥ 3: –ü–µ—Ä–µ–π–¥–∏ –≤ Console

–í DevTools –Ω–∞–π–¥–∏ –≤–∫–ª–∞–¥–∫—É "Console"

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É

–ñ—ë—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞:
- **Windows/Linux:** `Ctrl+Shift+R`
- **Mac:** `Cmd+Shift+R`

### –®–∞–≥ 5: –°–∫–æ–ø–∏—Ä—É–π –≤—ã–≤–æ–¥ –∏–∑ Console

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
üîç SUPABASE –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê
  –í—Å–µ VITE –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: { ... }
  ‚úÖ Supabase config: { ... }
```

**–°–ö–†–ò–ù–®–û–¢ #1:** –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç —ç—Ç–æ–≥–æ –≤—ã–≤–æ–¥–∞

### –®–∞–≥ 6: –ü–µ—Ä–µ–π–¥–∏ –≤ Network

–í DevTools –Ω–∞–π–¥–∏ –≤–∫–ª–∞–¥–∫—É "Network"

### –®–∞–≥ 7: –ü–æ–ø—Ä–æ–±—É–π –≤–æ–π—Ç–∏

–í–≤–µ–¥–∏:
- Email: `saint@onaiacademy.kz`
- Password: `Onai2134!`

–ù–∞–∂–º–∏ "–í–æ–π—Ç–∏"

### –®–∞–≥ 8: –ù–∞–π–¥–∏ –∑–∞–ø—Ä–æ—Å /auth/v1/token

–í Network –Ω–∞–π–¥–∏ –∑–∞–ø—Ä–æ—Å:
```
POST /auth/v1/token?grant_type=password
```

–ù–∞–∂–º–∏ –Ω–∞ –Ω–µ–≥–æ.

### –®–∞–≥ 9: –ü–æ—Å–º–æ—Ç—Ä–∏ Headers

–í–æ –≤–∫–ª–∞–¥–∫–µ "Headers" –Ω–∞–π–¥–∏:

**Request Headers:**
```
apikey: eyJhbGci...
Authorization: Bearer eyJhbGci...
Content-Type: application/json
```

**–°–ö–†–ò–ù–®–û–¢ #2:** –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç Request Headers

### –®–∞–≥ 10: –ü–æ—Å–º–æ—Ç—Ä–∏ Payload

–í–æ –≤–∫–ª–∞–¥–∫–µ "Payload" –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```json
{
  "email": "saint@onaiacademy.kz",
  "password": "Onai2134!",
  "gotrue_meta_security": {}
}
```

**–°–ö–†–ò–ù–®–û–¢ #3:** –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç Payload

### –®–∞–≥ 11: –ü–æ—Å–º–æ—Ç—Ä–∏ Response

–í–æ –≤–∫–ª–∞–¥–∫–µ "Response" –ø–æ—Å–º–æ—Ç—Ä–∏ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç Supabase:

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞:**
```json
{
  "message": "No API key found in request",
  "hint": "No `apikey` request header or url param was found."
}
```

**–ò–ª–∏ –¥—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞:**
```json
{
  "error": "Invalid login credentials",
  "message": "..."
}
```

**–°–ö–†–ò–ù–®–û–¢ #4:** –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç Response

### –®–∞–≥ 12: –í–µ—Ä–Ω–∏—Å—å –≤ Console

–í Console –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
üîê –ü–û–ü–´–¢–ö–ê –í–•–û–î–ê
  üìß Email: saint@onaiacademy.kz
  üîë Password length: 9
  üìä Request payload: { ... }
  üì• Response data: null
  ‚ùå Response error: { ... }

üö® –û–®–ò–ë–ö–ê SUPABASE: {
  message: "...",
  status: 400,
  name: "AuthApiError",
  fullError: { ... }
}
```

**–°–ö–†–ò–ù–®–û–¢ #5:** –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç Console –ø–æ—Å–ª–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞

---

## üìä –ù–£–ñ–ù–û –ü–†–ò–°–õ–ê–¢–¨

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:

1. ‚úÖ **–°–ö–†–ò–ù–®–û–¢ #1:** Console –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (SUPABASE –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê)
2. ‚úÖ **–°–ö–†–ò–ù–®–û–¢ #2:** Network ‚Üí Headers (Request Headers)
3. ‚úÖ **–°–ö–†–ò–ù–®–û–¢ #3:** Network ‚Üí Payload
4. ‚úÖ **–°–ö–†–ò–ù–®–û–¢ #4:** Network ‚Üí Response
5. ‚úÖ **–°–ö–†–ò–ù–®–û–¢ #5:** Console –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞ (–ü–û–ü–´–¢–ö–ê –í–•–û–î–ê + –û–®–ò–ë–ö–ê)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (—Ç–µ–∫—Å—Ç–æ–º):

#### –í–æ–ø—Ä–æ—Å 1: –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç Console –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ?

```
–û—Ç–≤–µ—Ç: 
üîç SUPABASE –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê
  –í—Å–µ VITE –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: {
    VITE_SUPABASE_URL: "..."
    VITE_SUPABASE_PUBLISHABLE_KEY: "..."
    ...
  }
```

#### –í–æ–ø—Ä–æ—Å 2: –ï—Å—Ç—å –ª–∏ apikey –≤ Request Headers?

```
–û—Ç–≤–µ—Ç: –î–ê / –ù–ï–¢

–ï—Å–ª–∏ –î–ê, —Ç–æ:
apikey: eyJhbGci...

–ï—Å–ª–∏ –ù–ï–¢:
(apikey –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
```

#### –í–æ–ø—Ä–æ—Å 3: –ß—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç Supabase –≤ Response?

```
–û—Ç–≤–µ—Ç:
{
  "message": "...",
  ...
}
```

---

## üîß –ü–†–û–í–ï–†–ö–ê .env –ù–ê –°–ï–†–í–ï–†–ï

### SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
ssh root@178.128.203.40
```

### –ü—Ä–æ–≤–µ—Ä—å .env

```bash
cd /var/www/onai-integrator-login
cat .env | grep VITE_SUPABASE
```

**–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:**
```
VITE_SUPABASE_URL=https://capdjvokjdivxjfdddmx.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNhcGRqdm9ramRpdnhqZmRkZG14Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxNjc5MDUsImV4cCI6MjA3Nzc0MzkwNX0.bsikIoF86BjthWauzbLXq3SZbNQFodppZ2TC64NniJs
```

**–°–ö–†–ò–ù–®–û–¢ #6:** –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç –≤—ã–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä—å dist/index.html

```bash
cat dist/index.html | head -20
```

–ü–æ—Å–º–æ—Ç—Ä–∏ –≤—Å—Ç—Ä–æ–µ–Ω—ã –ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –±–∏–ª–¥.

---

## ‚ùì –í–û–ó–ú–û–ñ–ù–´–ï –°–¶–ï–ù–ê–†–ò–ò

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: API key –ï–°–¢–¨ –≤ headers

**Console:**
```
‚úÖ Supabase config: { keyLength: 208 }
```

**Network Headers:**
```
apikey: eyJhbGci...
Authorization: Bearer eyJhbGci...
```

**Response:**
```json
{
  "error": "Invalid login credentials"
}
```

**–í—ã–≤–æ–¥:** API key –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è! –ü—Ä–æ–±–ª–µ–º–∞ –≤ —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Supabase.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞ –≤ Supabase Dashboard
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Email Auth –≤–∫–ª—é—á—ë–Ω
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redirect URLs

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: API key –ù–ï–¢ –≤ headers

**Console:**
```
‚úÖ Supabase config: { keyLength: 208 }
```

**Network Headers:**
```
(–Ω–µ—Ç apikey)
(–Ω–µ—Ç Authorization)
```

**Response:**
```json
{
  "message": "No API key found in request"
}
```

**–í—ã–≤–æ–¥:** API key –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –ù–ï –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å–µ.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–±–ª–µ–º–∞ —Å –≤–µ—Ä—Å–∏–µ–π @supabase/supabase-js
- –ü—Ä–æ–±–ª–µ–º–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ createClient
- –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: API key undefined –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**Console:**
```
‚ùå Supabase credentials not found!
  keyLength: undefined
```

**–í—ã–≤–æ–¥:** –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ù–ï –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –±–∏–ª–¥.

**–†–µ—à–µ–Ω–∏–µ:**
- .env —Ñ–∞–π–ª –Ω–µ –Ω–∞ –º–µ—Å—Ç–µ
- Vite –Ω–µ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
- –ù—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å: `npm run build`

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–ó–∞–¥–µ–ø–ª–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:**
   ```bash
   git add -A
   git commit -m "feat: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Supabase"
   git push origin main
   ./deploy.sh
   ```

2. **–°–æ–±–µ—Ä–∏ –≤—Å–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã** (6 —à—Ç—É–∫)

3. **–ü—Ä–∏—à–ª–∏ –º–Ω–µ:**
   - –í—Å–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã
   - –û—Ç–≤–µ—Ç—ã –Ω–∞ 3 –≤–æ–ø—Ä–æ—Å–∞
   - –í—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `cat .env | grep VITE_SUPABASE`

4. **–Ø –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É—é** –∏ —Å–∫–∞–∂—É —Ç–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ!

---

**–£–¥–∞—á–∏! üöÄ**

