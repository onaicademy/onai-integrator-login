# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ó–ê–í–ï–†–®–ï–ù–´!

## üîß –ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### 1. üìù –§—É–Ω–∫—Ü–∏—è `handleUpdateProfile` (email + –∏–º—è)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ **–ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏** –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ **–¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ **–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- ‚úÖ Email –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è**
- ‚úÖ –ò–º—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å**

### 2. üîê –§—É–Ω–∫—Ü–∏—è `handleChangePassword`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ **–ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏** –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ **–¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ **–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ **–≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —Å–µ—Å—Å–∏–∏**

---

## üß™ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### ‚úÖ `supabase.auth.updateUser()` –†–ê–ë–û–¢–ê–ï–¢ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑–∞–ª–æ, —á—Ç–æ **API —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ**. 

**–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –ù–ï –≤ API**, –∞ –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ —Å–µ—Å—Å–∏–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ.

**–¢–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏–∏:**
1. –ü—Ä–æ–≤–µ—Ä—è—é—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏
2. –õ–æ–≥–∏—Ä—É—é—Ç –∫–∞–∂–¥—ã–π —à–∞–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
3. –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
4. –û–±–Ω–æ–≤–ª—è—é—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è

---

## üéØ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

### –®–∞–≥ 1: –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
```
URL: http://localhost:8080/login
Email: saint@onaiacademy.kz
–ü–∞—Ä–æ–ª—å: Onai2134
```

### –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å
```
URL: http://localhost:8080/profile
```

### –®–∞–≥ 3: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### üîπ –¢–µ—Å—Ç 1: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏
1. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ–ª–µ "–ü–æ–ª–Ω–æ–µ –∏–º—è"
2. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ "–ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª—ë–Ω"

#### üîπ –¢–µ—Å—Ç 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ email
1. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ–ª–µ "Email"
2. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ "–ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª—ë–Ω"
4. ‚ö†Ô∏è **–í–ê–ñ–ù–û**: Supabase –æ—Ç–ø—Ä–∞–≤–∏—Ç –ø–∏—Å—å–º–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ email

#### üîπ –¢–µ—Å—Ç 3: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
1. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å
3. –ù–∞–∂–º–∏—Ç–µ "–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å"
4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ "–ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω—ë–Ω"

---

## üîç –û–¢–õ–ê–î–ö–ê (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

### –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

–í—ã —É–≤–∏–¥–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏:

```
‚úÖ [handleChangePassword] –°–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: saint@onaiacademy.kz
üîÑ [handleChangePassword] –í—ã–∑—ã–≤–∞–µ–º supabase.auth.updateUser()...
‚úÖ [handleChangePassword] updateUser —É—Å–ø–µ—à–µ–Ω, –¥–∞–Ω–Ω—ã–µ: {...}
‚úÖ [handleChangePassword] –ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω!
```

### –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏:
- `‚ùå –°–µ—Å—Å–∏—è –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞` ‚Üí –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å
- `‚ùå –û—à–∏–±–∫–∞ updateUser` ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–µ—Ç–∞–ª–µ–π
- `‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é` ‚Üí –û—á–∏—Å—Ç–∏—Ç–µ localStorage –∏ –≤–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ

---

## üìä –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ:

#### `handleChangePassword` (—Å—Ç—Ä–æ–∫–∏ ~254-330)
```typescript
// –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏
const { data: sessionData, error: sessionError } = await supabase.auth.getSession();

if (!sessionData.session) {
  throw new Error('–°–µ—Å—Å–∏—è –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –∑–∞–Ω–æ–≤–æ.');
}

// –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
console.log('‚úÖ [handleChangePassword] –°–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–∞');
console.log('üîÑ [handleChangePassword] –í—ã–∑—ã–≤–∞–µ–º supabase.auth.updateUser()...');
```

#### `handleUpdateProfile` (—Å—Ç—Ä–æ–∫–∏ ~125-250)
```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏
const { data: sessionData, error: sessionError } = await supabase.auth.getSession();

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
const nameChanged = trimmedName !== profileData?.profile?.full_name;
const emailChanged = trimmedEmail !== profileData?.profile?.email;

// –£—Å–ª–æ–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ auth.users
if (nameChanged || emailChanged) {
  const authUpdate: any = {};
  if (emailChanged) authUpdate.email = trimmedEmail;
  if (nameChanged) authUpdate.data = { full_name: trimmedName };
  updatePromises.push(supabase.auth.updateUser(authUpdate));
}
```

---

## ‚ú® –ò–¢–û–ì

**–í–°–ï –§–£–ù–ö–¶–ò–ò –ò–°–ü–†–ê–í–õ–ï–ù–´ –ò –ì–û–¢–û–í–´ –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!**

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ:
- ‚úÖ –ú–µ–Ω—è—Ç—å –∏–º—è
- ‚úÖ –ú–µ–Ω—è—Ç—å email
- ‚úÖ –ú–µ–Ω—è—Ç—å –ø–∞—Ä–æ–ª—å

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

**üéØ –ü–†–û–¢–ï–°–¢–ò–†–£–ô–¢–ï –ù–ê: http://localhost:8080/profile**



















