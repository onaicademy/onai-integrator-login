# ‚úÖ –ó–ê–ü–£–°–¢–ò –≠–¢–û–¢ SQL ‚Üí –ò–°–ü–†–ê–í–ò–¢ –í–°–Å

**–î–∞—Ç–∞:** 2025-11-07  
**–°—Ç–∞—Ç—É—Å:** üöÄ –ì–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê:

```
‚ùå –ö–æ–ª–æ–Ω–∫–∞ total_xp –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
‚ùå –°—Ç—É–¥–µ–Ω—Ç—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
‚ùå –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ auth.users ‚Üí public.users
```

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï:

**–§–∞–π–ª:** `üîß_–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø_–ü–†–û–°–¢–ê–Ø.sql`

**–≠—Ç–æ—Ç SQL:**
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏ (total_xp, level, last_login_at, avatar_url)
3. ‚úÖ –°–æ–∑–¥–∞—Å—Ç —Ç—Ä–∏–≥–≥–µ—Ä –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
4. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
5. ‚úÖ –ü–æ–∫–∞–∂–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

---

## üöÄ –ó–ê–ü–£–°–ö:

### **–®–∞–≥ 1: –û—Ç–∫—Ä–æ–π Supabase**
https://supabase.com/dashboard/project/capdjvokjdivxjfdddmx/sql

### **–®–∞–≥ 2: –°–∫–æ–ø–∏—Ä—É–π SQL**
–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª **`üîß_–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø_–ü–†–û–°–¢–ê–Ø.sql`**
- –í—ã–¥–µ–ª–∏ –≤–µ—Å—å —Ç–µ–∫—Å—Ç (Ctrl+A)
- –°–∫–æ–ø–∏—Ä—É–π (Ctrl+C)

### **–®–∞–≥ 3: –í—Å—Ç–∞–≤—å –∏ –∑–∞–ø—É—Å—Ç–∏**
1. –í—Å—Ç–∞–≤—å –≤ SQL Editor
2. –ù–∞–∂–º–∏ **RUN** (–∏–ª–∏ Ctrl+Enter)
3. –î–æ–∂–¥–∏—Å—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (30 —Å–µ–∫)

### **–®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**
SQL –ø–æ–∫–∞–∂–µ—Ç:
```
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ total_xp
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ level
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ last_login_at
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ avatar_url
‚úÖ –¢—Ä–∏–≥–≥–µ—Ä —Å–æ–∑–¥–∞–Ω
‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ N —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
```

---

## üß™ –ü–û–°–õ–ï –ó–ê–ü–£–°–ö–ê:

### **1. –ü—Ä–æ–≤–µ—Ä—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**
1. –û—Ç–∫—Ä–æ–π https://onai.academy
2. –í–æ–π–¥–∏ –∫–∞–∫ `saint@onaiacademy.kz`
3. **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å ‚Üí –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —É—á–µ–Ω–∏–∫–æ–≤**
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω!

### **2. –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞**
1. –ù–∞–∂–º–∏ **+ –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞**
2. –í–≤–µ–¥–∏:
   - Email: `test-student@gmail.com`
   - –ò–º—è: `–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ç—É–¥–µ–Ω—Ç`
   - –ü–∞—Ä–æ–ª—å: `123456`
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –°—Ç—É–¥–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω –∏ –ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ!

---

## üìä –ß–¢–û –î–ï–õ–ê–ï–¢ SQL:

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**
```sql
-- –°–º–æ—Ç—Ä–∏–º –∫–∞–∫–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –µ—Å—Ç—å
SELECT column_name FROM information_schema.columns
WHERE table_name = 'users'
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫**
```sql
-- –î–æ–±–∞–≤–ª—è–µ–º total_xp, level, last_login_at, avatar_url
ALTER TABLE public.users ADD COLUMN total_xp INTEGER DEFAULT 0;
ALTER TABLE public.users ADD COLUMN level INTEGER DEFAULT 1;
...
```

### **3. –¢—Ä–∏–≥–≥–µ—Ä –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**
```sql
-- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ auth.users
-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ public.users
CREATE TRIGGER on_auth_user_created ...
```

### **4. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö**
```sql
-- –ö–æ–ø–∏—Ä—É–µ–º –≤—Å–µ—Ö –∏–∑ auth.users –≤ public.users
INSERT INTO public.users (id, email, full_name, role)
SELECT id, email, ... FROM auth.users
WHERE NOT EXISTS (SELECT 1 FROM public.users WHERE id = auth.users.id)
```

---

## üéâ –ü–û–°–õ–ï –í–´–ü–û–õ–ù–ï–ù–ò–Ø:

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `public.users` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ —Å—Ç—É–¥–µ–Ω—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

**–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**
- ‚úÖ –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è email, –∏–º—è, —Ä–æ–ª—å, XP, —É—Ä–æ–≤–µ–Ω—å
- ‚úÖ –ê–¥–º–∏–Ω –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ —Å–ø–∏—Å–∫–∞

**–ù–æ–≤—ã–µ —Å—Ç—É–¥–µ–Ω—Ç—ã:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ `public.users`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

---

## üö® –í–ê–ñ–ù–û:

**SQL –±–µ–∑–æ–ø–∞—Å–Ω—ã–π:**
- ‚úÖ –ù–µ —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –¢–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–ª–æ–Ω–∫–∏ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç
- ‚úÖ –ï—Å–ª–∏ –∫–æ–ª–æ–Ω–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç
- ‚úÖ –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç

**–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–Ω–æ–≥–æ —Ä–∞–∑:**
- –ü–µ—Ä–≤—ã–π —Ä–∞–∑: –¥–æ–±–∞–≤–∏—Ç –∫–æ–ª–æ–Ω–∫–∏ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç
- –í—Ç–æ—Ä–æ–π —Ä–∞–∑: —É–≤–∏–¥–∏—Ç —á—Ç–æ –≤—Å—ë —É–∂–µ –µ—Å—Ç—å, –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–µ—Ç

---

## ‚ö° –ë–´–°–¢–†–´–ô –ó–ê–ü–£–°–ö:

1. **–û—Ç–∫—Ä–æ–π:** https://supabase.com/dashboard/project/capdjvokjdivxjfdddmx/sql
2. **–°–∫–æ–ø–∏—Ä—É–π:** `üîß_–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø_–ü–†–û–°–¢–ê–Ø.sql`
3. **–í—Å—Ç–∞–≤—å –∏ RUN**
4. **–ü—Ä–æ–≤–µ—Ä—å:** https://onai.academy/admin/students-activity

---

**–ó–ê–ü–£–°–¢–ò –°–ï–ô–ß–ê–°!** üöÄ

