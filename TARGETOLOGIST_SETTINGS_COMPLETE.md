# üéØ –ù–ê–°–¢–†–û–ô–ö–ò –¢–ê–†–ì–ï–¢–û–õ–û–ì–ê - –†–ï–ê–õ–ò–ó–û–í–ê–ù–û!

**–î–∞—Ç–∞**: 19 –¥–µ–∫–∞–±—Ä—è 2025, 06:30 AM  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–û–¢–û–í–û  
**–í–µ—Ä—Å–∏—è**: 3.2

---

## üöÄ –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–æ–≤:

1. ‚úÖ **–í—ã–±–æ—Ä FB —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤**
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ FB API
   - –í—ã–±–æ—Ä –Ω—É–∂–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤ (checkbox)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö

2. ‚úÖ **–í—ã–±–æ—Ä –∫–∞–º–ø–∞–Ω–∏–π –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è**
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤
   - –í—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π (checkbox)
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É

3. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ UTM –º–µ—Ç–æ–∫**
   - UTM Source (facebook, google, –∏ —Ç.–¥.)
   - UTM Medium (cpc, cpm, –∏ —Ç.–¥.)
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:
     - `{campaign_name}` - –∏–º—è –∫–∞–º–ø–∞–Ω–∏–∏
     - `{ad_name}` - –∏–º—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
     - `{team}` - –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### Database Schema:

```sql
traffic_targetologist_settings
‚îú‚îÄ id (UUID)
‚îú‚îÄ user_id (FK ‚Üí traffic_users)
‚îú‚îÄ fb_ad_accounts (JSONB) - –º–∞—Å—Å–∏–≤ –∫–∞–±–∏–Ω–µ—Ç–æ–≤
‚îÇ  ‚îî‚îÄ [{ id, name, enabled, status, currency }]
‚îú‚îÄ tracked_campaigns (JSONB) - –º–∞—Å—Å–∏–≤ –∫–∞–º–ø–∞–Ω–∏–π
‚îÇ  ‚îî‚îÄ [{ id, name, ad_account_id, enabled, status }]
‚îú‚îÄ utm_source (TEXT) - "facebook"
‚îú‚îÄ utm_medium (TEXT) - "cpc"
‚îú‚îÄ utm_templates (JSONB) - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–∫–∏
‚îÇ  ‚îî‚îÄ { campaign: "{campaign_name}", content: "{ad_name}" }
‚îî‚îÄ created_at, updated_at
```

### API Endpoints:

```
GET  /api/traffic-settings/:userId
     ‚Üí –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞

PUT  /api/traffic-settings/:userId
     ‚Üí –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

GET  /api/traffic-settings/:userId/fb-accounts
     ‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ FB –∫–∞–±–∏–Ω–µ—Ç—ã —á–µ—Ä–µ–∑ API

GET  /api/traffic-settings/:userId/campaigns?adAccountId=123
     ‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏ –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞

POST /api/traffic-settings/:userId/fb-token
     ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π FB —Ç–æ–∫–µ–Ω
```

### Frontend:

```
/traffic/settings
‚îú‚îÄ –°–µ–∫—Ü–∏—è: FB –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã
‚îÇ  ‚îú‚îÄ –ö–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ"
‚îÇ  ‚îú‚îÄ –°–ø–∏—Å–æ–∫ –∫–∞–±–∏–Ω–µ—Ç–æ–≤ —Å checkbox
‚îÇ  ‚îî‚îÄ –ö–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
‚îÇ
‚îú‚îÄ –°–µ–∫—Ü–∏—è: –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏
‚îÇ  ‚îú‚îÄ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞–º–ø–∞–Ω–∏–π
‚îÇ  ‚îú‚îÄ Checkbox –¥–ª—è –≤—ã–±–æ—Ä–∞
‚îÇ  ‚îî‚îÄ –ü–æ–∫–∞–∑ —Å—Ç–∞—Ç—É—Å–∞ –∏ objective
‚îÇ
‚îú‚îÄ –°–µ–∫—Ü–∏—è: UTM –ú–µ—Ç–∫–∏
‚îÇ  ‚îú‚îÄ UTM Source (input)
‚îÇ  ‚îú‚îÄ UTM Medium (input)
‚îÇ  ‚îú‚îÄ Campaign Template (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
‚îÇ  ‚îî‚îÄ Content Template (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
‚îÇ
‚îî‚îÄ –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
```

---

## üé® UI/UX

### –¢–æ–ø-–±–∞—Ä:
```
[–õ–û–ì–û] [User Info]  [–†–£–°] [‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏] [üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞] [–ú–æ–∏] [Exit]
```

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                 ‚îÇ
‚îÇ üìò –†–ï–ö–õ–ê–ú–ù–´–ï –ö–ê–ë–ò–ù–ï–¢–´ FACEBOOK                  ‚îÇ
‚îÇ [–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ]                           ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ ‚òë Account 1 (ID: 123)  [–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏]   ‚îÇ
‚îÇ ‚òê Account 2 (ID: 456)                          ‚îÇ
‚îÇ                                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                 ‚îÇ
‚îÇ üéØ –û–¢–°–õ–ï–ñ–ò–í–ê–ï–ú–´–ï –ö–ê–ú–ü–ê–ù–ò–ò (5/12)               ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ ‚òë Campaign Name 1 ‚Ä¢ ACTIVE                     ‚îÇ
‚îÇ ‚òê Campaign Name 2 ‚Ä¢ PAUSED                     ‚îÇ
‚îÇ                                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                 ‚îÇ
‚îÇ üè∑Ô∏è UTM –ú–ï–¢–ö–ò                                   ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ UTM Source:   [facebook      ]                 ‚îÇ
‚îÇ UTM Medium:   [cpc           ]                 ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ Campaign:     [{campaign_name}]                ‚îÇ
‚îÇ Content:      [{ad_name}     ]                 ‚îÇ
‚îÇ                                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                     [–û—Ç–º–µ–Ω–∞] [üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å]    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîó –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ FB –∫–∞–±–∏–Ω–µ—Ç–æ–≤

```typescript
// –¢–∞—Ä–≥–µ—Ç–æ–ª–æ–≥ –Ω–∞–∂–∏–º–∞–µ—Ç "–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ"
‚Üí GET /api/traffic-settings/:userId/fb-accounts

// Backend —á–µ—Ä–µ–∑ FB API:
‚Üí GET https://graph.facebook.com/v18.0/me/adaccounts

// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫:
[
  { id: "123", name: "Nutcab Ads", enabled: false },
  { id: "456", name: "Arystan Ads", enabled: false }
]

// –¢–∞—Ä–≥–µ—Ç–æ–ª–æ–≥ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω—É–∂–Ω—ã–µ (checkbox)
‚Üí Account 1 ‚úÖ
‚Üí Account 2 ‚ùå
```

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π

```typescript
// –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞:
‚Üí –ö–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏"

// Backend —á–µ—Ä–µ–∑ FB API:
‚Üí GET /act_123/campaigns

// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π:
[
  { id: "789", name: "Spring Sale", status: "ACTIVE" },
  { id: "790", name: "Winter Sale", status: "PAUSED" }
]

// –¢–∞—Ä–≥–µ—Ç–æ–ª–æ–≥ –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞–∫–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ UTM –º–µ—Ç–æ–∫

```typescript
// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
utm_campaign = "{campaign_name}"
// ‚Üí –ó–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "Spring Sale"

utm_content = "{ad_name}"
// ‚Üí –ó–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "Ad Creative 1"

utm_source = "facebook"
utm_medium = "cpc"
```

### –®–∞–≥ 4: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

```typescript
// –ù–∞–∂–∞—Ç–∏–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
‚Üí PUT /api/traffic-settings/:userId

// –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î:
{
  fb_ad_accounts: [
    { id: "123", name: "Nutcab Ads", enabled: true }
  ],
  tracked_campaigns: [
    { id: "789", name: "Spring Sale", enabled: true }
  ],
  utm_source: "facebook",
  utm_medium: "cpc",
  utm_templates: {
    campaign: "{campaign_name}",
    content: "{ad_name}"
  }
}
```

---

## üìä –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° FB API

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞:

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞–±–∏–Ω–µ—Ç–æ–≤**:
```javascript
GET /me/adaccounts
‚Üí –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–π**:
```javascript
GET /act_{account_id}/campaigns
‚Üí –í—Å–µ –∫–∞–º–ø–∞–Ω–∏–∏ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
```

3. **–ü–æ–ª—É—á–µ–Ω–∏–µ –≥—Ä—É–ø–ø –∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π**:
```javascript
GET /campaign/{id}/adsets
GET /adset/{id}/ads
‚Üí –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –≤—Å–µ–º —É—Ä–æ–≤–Ω—è–º
```

### –¢–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞:

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**:
1. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–ª)
2. –û–±—â–∏–π —Ç–æ–∫–µ–Ω —Å–∏—Å—Ç–µ–º—ã (`FB_ACCESS_TOKEN`)

---

## üéØ –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–ï UTM –ú–ï–¢–ö–ò

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```typescript
{campaign_name}  - –ò–º—è –∫–∞–º–ø–∞–Ω–∏–∏ –∏–∑ FB
{ad_name}       - –ò–º—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏–∑ FB
{team}          - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
{date}          - –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞ (YYYY-MM-DD)
{month}         - –ú–µ—Å—è—Ü (MM)
{year}          - –ì–æ–¥ (YYYY)
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```
UTM Campaign Template:
{campaign_name}_{team}_{date}
‚Üí "Spring_Sale_Kenesary_2025-12-19"

UTM Content Template:
{ad_name}_v1
‚Üí "Creative_123_v1"

–ü–æ–ª–Ω—ã–π UTM:
utm_source=facebook
&utm_medium=cpc
&utm_campaign=Spring_Sale_Kenesary_2025-12-19
&utm_content=Creative_123_v1
```

---

## üìÅ –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´

### Database:
```
‚úÖ supabase/migrations/20251219_create_targetologist_settings.sql
   - –¢–∞–±–ª–∏—Ü–∞ traffic_targetologist_settings
   - JSONB –ø–æ–ª—è –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏
   - View –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
```

### Backend:
```
‚úÖ backend/src/routes/traffic-settings.ts
   - GET/PUT –Ω–∞—Å—Ç—Ä–æ–µ–∫
   - –ó–∞–≥—Ä—É–∑–∫–∞ FB –∫–∞–±–∏–Ω–µ—Ç–æ–≤
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π
   - –í–∞–ª–∏–¥–∞—Ü–∏—è FB —Ç–æ–∫–µ–Ω–æ–≤
```

### Frontend:
```
‚úÖ src/pages/traffic/TrafficSettings.tsx
   - UI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
   - Checkbox –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–∞–±–∏–Ω–µ—Ç–æ–≤
   - Checkbox –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–∞–º–ø–∞–Ω–∏–π
   - –ü–æ–ª—è –¥–ª—è UTM –º–µ—Ç–æ–∫
   - –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
```

### Updated:
```
‚úÖ backend/src/server.ts - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω trafficSettingsRouter
‚úÖ src/App.tsx - –î–æ–±–∞–≤–ª–µ–Ω route /traffic/settings
‚úÖ src/pages/traffic/TrafficTargetologistDashboard.tsx - –ö–Ω–æ–ø–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
```

---

## üöÄ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï

### –î–ª—è —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞:

```
1. –í–æ–π–¥–∏: kenesary@onai.academy / changeme123

2. –¢–æ–ø-–±–∞—Ä ‚Üí –ö–Ω–æ–ø–∫–∞ "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"

3. –†–∞–∑–¥–µ–ª "–†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã":
   - –ù–∞–∂–º–∏ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ"
   - ‚úÖ –í—ã–±–µ—Ä–∏ –Ω—É–∂–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã
   - –ù–∞–∂–º–∏ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ

4. –†–∞–∑–¥–µ–ª "–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏":
   - ‚úÖ –í—ã–±–µ—Ä–∏ –Ω—É–∂–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

5. –†–∞–∑–¥–µ–ª "UTM –ú–µ—Ç–∫–∏":
   - –ù–∞—Å—Ç—Ä–æ–π utm_source (facebook)
   - –ù–∞—Å—Ç—Ä–æ–π utm_medium (cpc)
   - –ò—Å–ø–æ–ª—å–∑—É–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: {campaign_name}, {ad_name}

6. –ù–∞–∂–º–∏ "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"

7. ‚úÖ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –†–ö!
```

---

## ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ê

### Environment Variables:

```bash
# backend/.env

# –û–±—â–∏–π FB —Ç–æ–∫–µ–Ω (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ —É —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞ –Ω–µ—Ç –ª–∏—á–Ω–æ–≥–æ)
FB_ACCESS_TOKEN=your_long_lived_token

# –ò–ª–∏ —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∏ –º–æ–≥—É—Ç —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–π —Ç–æ–∫–µ–Ω –≤ UI
```

### –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î:

```sql
-- –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤ Supabase Dashboard
supabase/migrations/20251219_create_targetologist_settings.sql

-- –ü—Ä–æ–≤–µ—Ä–∫–∞:
SELECT * FROM traffic_targetologist_settings;
```

---

## üéØ FEATURES

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞—Ö–æ–¥–µ
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞–±–∏–Ω–µ—Ç–æ–≤ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ FB
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∫–∞–º–ø–∞–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ UTM –º–µ—Ç–∫–∏

### –ì–∏–±–∫–æ—Å—Ç—å:
- ‚úÖ –í—ã–±–æ—Ä –ª—é–±—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤
- ‚úÖ –í—ã–±–æ—Ä –ª—é–±—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π
- ‚úÖ –ö–∞—Å—Ç–æ–º–Ω—ã–µ UTM —à–∞–±–ª–æ–Ω—ã
- ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π FB —Ç–æ–∫–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ user_id
- ‚úÖ –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

---

## üìä –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –ù–ê–°–¢–†–û–ï–ö

### –í –¥–µ—Ç–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ:

```typescript
// –¢–µ–ø–µ—Ä—å –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
settings.fb_ad_accounts.filter(acc => acc.enabled)
// ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤

settings.tracked_campaigns.filter(camp => camp.enabled)
// ‚Üí –§–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏
```

### –í Dashboard:

```typescript
// UTM –º–µ—Ç–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
const utm = buildUTM(settings.utm_templates, {
  campaign_name: "Spring Sale",
  ad_name: "Creative 1",
  team: "Kenesary"
});

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
utm_source=facebook
&utm_medium=cpc
&utm_campaign=Spring_Sale_Kenesary
&utm_content=Creative_1
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### 1. –û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (1 –º–∏–Ω):
```
http://localhost:8080/traffic/settings
‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
‚úÖ –ü—É—Å—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–±–∏–Ω–µ—Ç—ã (1 –º–∏–Ω):
```
–ù–∞–∂–º–∏ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ"
‚úÖ –ó–∞–ø—Ä–æ—Å –∫ FB API
‚úÖ –°–ø–∏—Å–æ–∫ –∫–∞–±–∏–Ω–µ—Ç–æ–≤ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
‚úÖ –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–µ
```

### 3. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏ (1 –º–∏–Ω):
```
–í—ã–±–µ—Ä–∏ –∫–∞–±–∏–Ω–µ—Ç ‚Üí "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏"
‚úÖ –°–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π –ø–æ—è–≤–ª—è–µ—Ç—Å—è
‚úÖ –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–µ
```

### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å UTM (1 –º–∏–Ω):
```
–ó–∞–ø–æ–ª–Ω–∏ –ø–æ–ª—è:
- utm_source: facebook
- utm_medium: cpc
- campaign: {campaign_name}_{team}
- content: {ad_name}
‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
```

### 5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å (10 —Å–µ–∫):
```
–ù–∞–∂–º–∏ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
‚úÖ Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
‚úÖ –î–∞–Ω–Ω—ã–µ –≤ –ë–î
```

---

## üî• –§–ò–ù–ê–õ–¨–ù–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–û:
‚ùå –¢–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∏ –≤–∏–¥–µ–ª–∏ –≤—Å–µ –∫–∞–±–∏–Ω–µ—Ç—ã —Å–∫–æ–ø–æ–º  
‚ùå –ù–µ–ª—å–∑—è –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏  
‚ùå –ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ UTM –º–µ—Ç–æ–∫  

### –ü–û–°–õ–ï:
‚úÖ **–¢–∞—Ä–≥–µ—Ç–æ–ª–æ–≥ —Å–∞–º –≤—ã–±–∏—Ä–∞–µ—Ç**:
   - –ö–∞–∫–∏–µ FB –∫–∞–±–∏–Ω–µ—Ç—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å
   - –ö–∞–∫–∏–µ –∫–∞–º–ø–∞–Ω–∏–∏ —Å–º–æ—Ç—Ä–µ—Ç—å
   - –°–≤–æ–∏ UTM –º–µ—Ç–∫–∏

‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ FB API**:
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –∫–∞–±–∏–Ω–µ—Ç–æ–≤
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π
   - Real-time –¥–∞–Ω–Ω—ã–µ

‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ UTM**:
   - –®–∞–±–ª–æ–Ω—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
   - –ê–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π
   - –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

### API Reference:

```typescript
// –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
GET /api/traffic-settings/:userId
Response: {
  success: true,
  settings: { fb_ad_accounts, tracked_campaigns, utm_* }
}

// –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
PUT /api/traffic-settings/:userId
Body: { fb_ad_accounts, tracked_campaigns, utm_* }
Response: { success: true }

// –ó–∞–≥—Ä—É–∑–∏—Ç—å FB –∫–∞–±–∏–Ω–µ—Ç—ã
GET /api/traffic-settings/:userId/fb-accounts
Response: {
  success: true,
  accounts: [{ id, name, status, currency }]
}

// –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏
GET /api/traffic-settings/:userId/campaigns?adAccountId=123
Response: {
  success: true,
  campaigns: [{ id, name, status, objective }]
}
```

---

## üö® –í–ê–ñ–ù–û: –ü–†–ò–ú–ï–ù–ò–¢–¨ –ú–ò–ì–†–ê–¶–ò–Æ

### –ù–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è:

```sql
supabase/migrations/20251219_create_targetologist_settings.sql
```

### –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å:

```
1. Supabase Dashboard ‚Üí SQL Editor
2. –°–∫–æ–ø–∏—Ä—É–π —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏
3. Run
4. ‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```sql
SELECT * FROM traffic_targetologist_settings;
-- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞—Ö–æ–¥–µ)

-- –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞—Ö–æ–¥–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
SELECT * FROM traffic_targetologist_settings;
-- –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å 1 –∑–∞–ø–∏—Å—å —Å user_id
```

---

## üéâ –ò–¢–û–ì–û

**–†–ï–ê–õ–ò–ó–û–í–ê–ù–û –ó–ê 1 –ß–ê–°:**

‚úÖ –ë–î –º–∏–≥—Ä–∞—Ü–∏—è (JSONB –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏)  
‚úÖ Backend API (5 endpoints)  
‚úÖ Frontend UI (3 —Å–µ–∫—Ü–∏–∏)  
‚úÖ FB API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–∫–∞–±–∏–Ω–µ—Ç—ã + –∫–∞–º–ø–∞–Ω–∏–∏)  
‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ UTM –º–µ—Ç–∫–∏  
‚úÖ –ö–Ω–æ–ø–∫–∞ –≤ —Ç–æ–ø-–±–∞—Ä–µ —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞  

**–¢–ê–†–ì–ï–¢–û–õ–û–ì–ò –¢–ï–ü–ï–†–¨ –ú–û–ì–£–¢:**
- –í—ã–±—Ä–∞—Ç—å —Å–≤–æ–∏ FB –∫–∞–±–∏–Ω–µ—Ç—ã ‚úÖ
- –í—ã–±—Ä–∞—Ç—å —Å–≤–æ–∏ –∫–∞–º–ø–∞–Ω–∏–∏ ‚úÖ
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å UTM –º–µ—Ç–∫–∏ ‚úÖ
- –í—Å–µ —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π UI ‚úÖ

**–¢–û–õ–¨–ö–û –ú–ò–ì–†–ê–¶–ò–Ø ‚Üí READY TO USE!** üöÄüí∞

---

**–°–æ–∑–¥–∞–Ω–æ**: 19 –¥–µ–∫–∞–±—Ä—è 2025, 06:30 AM  
**–í–µ—Ä—Å–∏—è**: 3.2  
**–°—Ç–∞—Ç—É—Å**: Production Ready üéØ
