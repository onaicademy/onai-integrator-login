# üìñ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ù–ê–°–¢–†–û–ô–ö–ï –ë–ê–ó–´ –î–ê–ù–ù–´–•

## üéØ –¶–ï–õ–¨:
–°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã onAI Academy

---

## –®–ê–ì 1: –û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor –≤ Supabase

```
https://supabase.com/dashboard/project/capdjvokjdivxjfdddmx/sql
```

---

## –®–ê–ì 2: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª:
```
üóÑÔ∏è_–ü–û–õ–ù–ê–Ø_–ë–ê–ó–ê_–î–ê–ù–ù–´–•.sql
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–í–ï–°–¨** —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ (–æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞)

---

## –®–ê–ì 3: –í—Å—Ç–∞–≤—å—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ

1. –í SQL Editor –Ω–∞–∂–º–∏—Ç–µ **"New query"**
2. –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SQL –∫–æ–¥
3. –ù–∞–∂–º–∏—Ç–µ **"Run"** (–∏–ª–∏ Cmd/Ctrl + Enter)

---

## –®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ:

```
‚úÖ –¢–ê–ë–õ–ò–¶–´ –°–û–ó–î–ê–ù–´
‚úÖ –î–û–°–¢–ò–ñ–ï–ù–ò–Ø –î–û–ë–ê–í–õ–ï–ù–´
‚úÖ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò
üéâ –ë–ê–ó–ê –î–ê–ù–ù–´–• –ù–ê–°–¢–†–û–ï–ù–ê!
```

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã:**
- ‚úÖ `public.users` - –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `public.achievements` - –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (10 —à—Ç—É–∫ –¥–æ–±–∞–≤–ª–µ–Ω–æ)
- ‚úÖ `public.user_achievements` - –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `public.user_progress` - –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —É—Ä–æ–∫–∞–º
- ‚úÖ `public.user_stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## –®–ê–ì 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä

**–¢—Ä–∏–≥–≥–µ—Ä —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ—Ñ–∏–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!**

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```
https://supabase.com/dashboard/project/capdjvokjdivxjfdddmx/database/triggers
```

–î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä:
- ‚úÖ `on_auth_user_created` –Ω–∞ —Ç–∞–±–ª–∏—Ü–µ `auth.users`

---

## –®–ê–ì 6: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏

```
https://supabase.com/dashboard/project/capdjvokjdivxjfdddmx/auth/policies
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü:
- ‚úÖ `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
- ‚úÖ `achievements` - –≤—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å
- ‚úÖ `user_achievements` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å —Å–≤–æ–∏
- ‚úÖ `user_progress` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å
- ‚úÖ `user_stats` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å —Å–≤–æ—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

---

## –®–ê–ì 7: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω–∞

–û—Ç–∫—Ä–æ–π—Ç–µ:
```
https://supabase.com/dashboard/project/capdjvokjdivxjfdddmx/database/tables
```

–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É `users`:
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `saint@onaiacademy.kz`
- –° –ø–æ–ª—è–º–∏:
  - `role` = `admin`
  - `is_ceo` = `true`

**–ï—Å–ª–∏ –ù–ï–¢:**
–°–æ–∑–¥–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—Ä—É—á–Ω—É—é:
1. Authentication ‚Üí Users ‚Üí "Add user"
2. Email: `saint@onaiacademy.kz`
3. Password: `Onai2134!`
4. ‚úÖ Auto Confirm User
5. –ù–∞–∂–º–∏ "Create user"
6. –ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç `üóÑÔ∏è_–ü–û–õ–ù–ê–Ø_–ë–ê–ó–ê_–î–ê–ù–ù–´–•.sql` —Å–Ω–æ–≤–∞

---

## –®–ê–ì 8: –¢–µ—Å—Ç - –°–æ–∑–¥–∞–π —Å—Ç—É–¥–µ–Ω—Ç–∞

1. –û—Ç–∫—Ä–æ–π: https://supabase.com/dashboard/project/capdjvokjdivxjfdddmx/auth/users
2. –ù–∞–∂–º–∏ **"Add user"**
3. –ó–∞–ø–æ–ª–Ω–∏:
   - Email: `test.student@example.com`
   - Password: `Test1234!`
   - ‚úÖ Auto Confirm User
4. –ù–∞–∂–º–∏ **"Create user"**

5. **–ü—Ä–æ–≤–µ—Ä—å –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:**
   - –û—Ç–∫—Ä–æ–π —Ç–∞–±–ª–∏—Ü—É `public.users`
   - –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª—å —Å email `test.student@example.com`
   - `role` = `student`
   - `is_ceo` = `false`

6. **–ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:**
   - –û—Ç–∫—Ä–æ–π —Ç–∞–±–ª–∏—Ü—É `public.user_stats`
   - –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å—å –¥–ª—è —ç—Ç–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞
   - –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è = 0 (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)

---

## –®–ê–ì 9: –ü—Ä–æ–≤–µ—Ä—å –Ω–∞ —Å–∞–π—Ç–µ

1. –û—Ç–∫—Ä–æ–π: https://onai.academy/login
2. –í–æ–π–¥–∏ –∫–∞–∫ —Å—Ç—É–¥–µ–Ω—Ç:
   - Email: `test.student@example.com`
   - Password: `Test1234!`
3. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   - ‚úÖ –í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω
   - ‚úÖ –°–∞–π–¥–±–∞—Ä –ë–ï–ó –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
   - ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

4. –û—Ç–∫—Ä–æ–π: https://onai.academy/login
5. –í–æ–π–¥–∏ –∫–∞–∫ –∞–¥–º–∏–Ω:
   - Email: `saint@onaiacademy.kz`
   - Password: `Onai2134!`
6. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   - ‚úÖ –í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω
   - ‚úÖ –°–∞–π–¥–±–∞—Ä –° –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é
   - ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí –£—á–µ–Ω–∏–∫–∏ ‚Üí –í–∏–¥–Ω–æ —Å—Ç—É–¥–µ–Ω—Ç–∞

---

## üéâ –ì–û–¢–û–í–û!

**–ß–¢–û –¢–ï–ü–ï–†–¨ –†–ê–ë–û–¢–ê–ï–¢:**

1. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π
2. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≤—Ö–æ–¥–µ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ last_login_at)
3. ‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
4. ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —É—Ä–æ–∫–∞–º –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
5. ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
6. ‚úÖ –ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
7. ‚úÖ –°—Ç—É–¥–µ–Ω—Ç –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ (RLS)

---

## üîß –ï–°–õ–ò –ß–¢–û-–¢–û –ü–û–®–õ–û –ù–ï –¢–ê–ö:

### –û—à–∏–±–∫–∞: "relation public.users does not exist"
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç `üóÑÔ∏è_–ü–û–õ–ù–ê–Ø_–ë–ê–ó–ê_–î–ê–ù–ù–´–•.sql` –µ—â—ë —Ä–∞–∑

### –û—à–∏–±–∫–∞: "permission denied for table users"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase Dashboard

### –¢—Ä–∏–≥–≥–µ—Ä –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç—Ä–∏–≥–≥–µ—Ä —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (Database ‚Üí Triggers)
2. –£–¥–∞–ª–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞ –∏ —Å–æ–∑–¥–∞–π –∑–∞–Ω–æ–≤–æ
3. –ü—Ä–æ–≤–µ—Ä—å —Ç–∞–±–ª–∏—Ü—É `public.users` - –ø—Ä–æ—Ñ–∏–ª—å –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è

### –°—Ç—É–¥–µ–Ω—Ç –Ω–µ –≤–∏–¥–∏—Ç —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∞ `"Users can view own profile"`

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê:

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü–æ–∫–∞–∂–∏ –º–Ω–µ –≤—ã–≤–æ–¥ SQL —Å–∫—Ä–∏–ø—Ç–∞
2. –ü–æ–∫–∞–∂–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç —Ç–∞–±–ª–∏—Ü—ã `public.users`
3. –ü–æ–∫–∞–∂–∏ –æ—à–∏–±–∫—É –∏–∑ Console (F12)

–Ø –ø–æ–º–æ–≥—É –∏—Å–ø—Ä–∞–≤–∏—Ç—å! üöÄ

