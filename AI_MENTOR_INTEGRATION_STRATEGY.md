# ü§ñ –°–¢–†–ê–¢–ï–ì–ò–Ø –ò–ù–¢–ï–ì–†–ê–¶–ò–ò AI-–ù–ê–°–¢–ê–í–ù–ò–ö–ê –° –ë–ê–ó–û–ô –î–ê–ù–ù–´–•

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 21 –Ω–æ—è–±—Ä—è 2025
**–ü—Ä–æ–µ–∫—Ç:** onAI Academy - AI-–ù–∞—Å—Ç–∞–≤–Ω–∏–∫ (NeuroHub)
**–°—Ç–∞—Ç—É—Å:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∏ –ø–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

---

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã](#—Ç–µ–∫—É—â–µ–µ-—Å–æ—Å—Ç–æ—è–Ω–∏–µ-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö-–¥–ª—è-ai-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞)
4. [–°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞](#—Å—Ç—Ä–∞—Ç–µ–≥–∏—è-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞)
5. [–≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#—ç—Ç–∞–ø—ã-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
6. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-–¥–µ—Ç–∞–ª–∏-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
7. [–†–∏—Å–∫–∏ –∏ –∏—Ö –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è](#—Ä–∏—Å–∫–∏-–∏-–∏—Ö-–º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è)

---

## üéØ –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –°–ò–°–¢–ï–ú–´

### ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **AI-—á–∞—Ç (OpenAI Assistant API)**
   - –û—Ç–ø—Ä–∞–≤–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π ‚úÖ
   - –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, PDF, DOCX) ‚úÖ
   - –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤ –≤ Supabase ‚úÖ
   - Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ
   - Thread Management (localStorage) ‚úÖ
   - –¢—Ä–∏ —Ç–∏–ø–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤: `curator`, `mentor`, `analyst` ‚úÖ

2. **Frontend —Å—Ç—Ä–∞–Ω–∏—Ü–∞ NeuroHub**
   - –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤—ã–π UI/UX –¥–∏–∑–∞–π–Ω ‚úÖ
   - –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚úÖ
   - –ö–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ ‚úÖ
   - –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (UI) ‚úÖ
   - –ú–∏—Å—Å–∏–∏ (UI) ‚úÖ
   - –¶–µ–ª–∏ (–ª–æ–∫–∞–ª—å–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) ‚úÖ

3. **Backend API**
   - Express.js —Å–µ—Ä–≤–µ—Ä ‚úÖ
   - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚úÖ
   - API –∫–ª–∏–µ–Ω—Ç –Ω–∞ Frontend ‚úÖ
   - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ Supabase Storage ‚úÖ
   - OpenAI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚úÖ

4. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase)**
   - –¢–∞–±–ª–∏—Ü—ã `users`, `profiles` ‚úÖ
   - –¢–∞–±–ª–∏—Ü—ã –∫—É—Ä—Å–æ–≤: `courses`, `modules`, `lessons` ‚úÖ
   - –í–∏–¥–µ–æ –∫–æ–Ω—Ç–µ–Ω—Ç: `video_content`, `video_analytics` ‚úÖ
   - –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ gamification ‚úÖ

### ‚ö†Ô∏è –ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞):

1. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
   - ‚ùå –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ —É—Ä–æ–∫–∞–º
   - ‚ùå –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–∏–¥–µ–æ (—Å–∫–æ–ª—å–∫–æ –ø–æ—Å–º–æ—Ç—Ä–µ–ª, –Ω–∞ –∫–∞–∫–æ–π —Å–µ–∫—É–Ω–¥–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è)
   - ‚ùå –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —É—á–µ–Ω–∏–∫–∞
   - ‚ùå Streak (–¥–Ω–∏ –æ–±—É—á–µ–Ω–∏—è –ø–æ–¥—Ä—è–¥)

2. **–°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π**
   - ‚ùå Backend API –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
   - ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π
   - ‚ùå –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

3. **–°–∏—Å—Ç–µ–º–∞ –º–∏—Å—Å–∏–π**
   - ‚ùå Backend API –¥–ª—è –º–∏—Å—Å–∏–π
   - ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
   - ‚ùå –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π

4. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è AI**
   - ‚ùå AI –Ω–µ –∑–Ω–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç—É–¥–µ–Ω—Ç–µ (–ø—Ä–æ–≥—Ä–µ—Å—Å, –∏–º—è, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
   - ‚ùå –ù–µ—Ç –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –∫—É—Ä–∞—Ç–æ—Ä–∞
   - ‚ùå –ù–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–≤–µ—Ç–æ–≤

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### üìä –ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         FRONTEND (React)                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  NeuroHub Page (src/pages/NeuroHub.tsx)                    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - AI-—á–∞—Ç                                                   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –ö–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–ø—Ä–æ–≥—Ä–µ—Å—Å, streak, XP, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –ú–∏—Å—Å–∏–∏ –∏ —Ü–µ–ª–∏                                            ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (–≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)                               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –°–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏                                    ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                              ‚Üï                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  API Client (src/utils/apiClient.ts)                        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Backend —á–µ—Ä–µ–∑ JWT                          ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üï HTTPS (JWT)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      BACKEND (Express.js)                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  API Routes                                                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  /api/analytics/student/:userId/dashboard                   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  /api/analytics/student/:userId/video-progress              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  /api/achievements/:userId                                   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  /api/missions/:userId                                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  /api/goals/:userId                                          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  /api/openai/threads/:threadId/messages                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  /api/ai-mentor/context/:userId                             ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                              ‚Üï                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  AI Context Builder                                          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –°–æ–±–∏—Ä–∞–µ—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ –æ —Å—Ç—É–¥–µ–Ω—Ç–µ                           ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –§–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è OpenAI                            ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –ò–Ω–∂–µ–∫—Ç–∏—Ä—É–µ—Ç –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –∫—É—Ä–∞—Ç–æ—Ä–∞                         ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                              ‚Üï                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  Analytics Engine                                            ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π (–ø—Ä–æ—Å–º–æ—Ç—Ä –≤–∏–¥–µ–æ, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Ä–æ–∫–∞)     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π                                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –ü–æ–¥—Å—á–µ—Ç streak                                            ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üï service_role_key
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ë–ê–ó–ê –î–ê–ù–ù–´–• (Supabase)                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏       ‚îÇ  ‚îÇ  –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –ü—Ä–æ–≥—Ä–µ—Å—Å           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - users            ‚îÇ  ‚îÇ  - user_stats                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - profiles         ‚îÇ  ‚îÇ  - user_progress                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ  - video_watch_sessions         ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  - student_learning_metrics     ‚îÇ  ‚îÇ
‚îÇ                           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  –û–±—É—á–µ–Ω–∏–µ           ‚îÇ  ‚îÇ  Gamification                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - courses          ‚îÇ  ‚îÇ  - achievements                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - modules          ‚îÇ  ‚îÇ  - user_achievements            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - lessons          ‚îÇ  ‚îÇ  - missions                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - video_content    ‚îÇ  ‚îÇ  - weekly_goals                 ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  - daily_challenges             ‚îÇ  ‚îÇ
‚îÇ                           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  AI-–ù–∞—Å—Ç–∞–≤–Ω–∏–∫                                             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - curator_chat_history                                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - ai_mentor_advice_log                                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - curator_knowledge_base                                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - student_questions_log                                  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üï
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      –í–ù–ï–®–ù–ò–ï –°–ï–†–í–ò–°–´                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                     ‚îÇ
‚îÇ  ‚îÇ  OpenAI API    ‚îÇ   ‚îÇ  Telegram Bots   ‚îÇ                     ‚îÇ
‚îÇ  ‚îÇ  - GPT-4o      ‚îÇ   ‚îÇ  - AI-Mentor     ‚îÇ                     ‚îÇ
‚îÇ  ‚îÇ  - Assistants  ‚îÇ   ‚îÇ  - AI-Analyst    ‚îÇ                     ‚îÇ
‚îÇ  ‚îÇ  - Whisper     ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üîë –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

1. **–ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã** - –ë–î Supabase —Ö—Ä–∞–Ω–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ
2. **Backend –∫–∞–∫ —Ü–µ–Ω—Ç—Ä** - –í—Å—è –ª–æ–≥–∏–∫–∞ –Ω–∞ Backend, Frontend —Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç
3. **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - Supabase Realtime –¥–ª—è live-–¥–∞–Ω–Ω—ã—Ö
4. **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** - AI –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ —Å—Ç—É–¥–µ–Ω—Ç–µ
5. **Event-driven architecture** - –°–æ–±—ã—Ç–∏—è —Ç—Ä–∏–≥–≥–µ—Ä—è—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–ø—Ä–æ—Å–º–æ—Ç—Ä –≤–∏–¥–µ–æ ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π)

---

## üìä –°–¢–†–£–ö–¢–£–†–ê –ë–ê–ó–´ –î–ê–ù–ù–´–• –î–õ–Ø AI-–ù–ê–°–¢–ê–í–ù–ò–ö–ê

### 1Ô∏è‚É£ –¢–∞–±–ª–∏—Ü—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### `user_stats` - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞
```sql
CREATE TABLE IF NOT EXISTS public.user_stats (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE UNIQUE,

  -- –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è
  lessons_completed INTEGER DEFAULT 0 NOT NULL,
  total_study_time_minutes INTEGER DEFAULT 0 NOT NULL,
  courses_completed INTEGER DEFAULT 0 NOT NULL,
  modules_completed INTEGER DEFAULT 0 NOT NULL,

  -- Gamification
  total_xp INTEGER DEFAULT 0 NOT NULL,
  level INTEGER DEFAULT 1 NOT NULL,
  current_streak INTEGER DEFAULT 0 NOT NULL,
  longest_streak INTEGER DEFAULT 0 NOT NULL,
  achievements_unlocked INTEGER DEFAULT 0 NOT NULL,

  -- AI –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
  messages_sent_to_ai INTEGER DEFAULT 0 NOT NULL,
  files_uploaded_to_ai INTEGER DEFAULT 0 NOT NULL,
  ai_sessions_total INTEGER DEFAULT 0 NOT NULL,

  -- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
  last_activity_at TIMESTAMPTZ,
  last_lesson_at TIMESTAMPTZ,
  streak_updated_at TIMESTAMPTZ,

  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL
);

CREATE INDEX idx_user_stats_user_id ON user_stats(user_id);
CREATE INDEX idx_user_stats_streak ON user_stats(current_streak DESC);
CREATE INDEX idx_user_stats_level ON user_stats(level DESC);
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ –≤—Å–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π —Å—Ç—É–¥–µ–Ω—Ç–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
- –ö–∞—Ä—Ç–æ—á–µ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ NeuroHub
- –†–∞—Å—á–µ—Ç–∞ —É—Ä–æ–≤–Ω—è –∏ XP
- –ü–æ–¥—Å—á–µ—Ç–∞ streak
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è AI (—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–∫–æ–≤ –ø—Ä–æ—à—ë–ª, –∫–∞–∫–æ–π —É—Ä–æ–≤–µ–Ω—å)

---

#### `user_progress` - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —É—Ä–æ–∫–∞–º
```sql
CREATE TABLE IF NOT EXISTS public.user_progress (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  course_id INTEGER NOT NULL REFERENCES courses(id) ON DELETE CASCADE,
  module_id INTEGER NOT NULL REFERENCES modules(id) ON DELETE CASCADE,
  lesson_id UUID NOT NULL REFERENCES lessons(id) ON DELETE CASCADE,

  -- –°—Ç–∞—Ç—É—Å —É—Ä–æ–∫–∞
  status TEXT DEFAULT 'not_started' NOT NULL
    CHECK (status IN ('not_started', 'in_progress', 'completed')),
  progress_percent INTEGER DEFAULT 0 NOT NULL
    CHECK (progress_percent >= 0 AND progress_percent <= 100),

  -- –í–∏–¥–µ–æ –ø—Ä–æ–≥—Ä–µ—Å—Å
  video_current_second INTEGER DEFAULT 0,
  video_total_seconds INTEGER,
  video_watched_seconds INTEGER DEFAULT 0,

  -- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
  started_at TIMESTAMPTZ,
  completed_at TIMESTAMPTZ,
  last_accessed_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  time_spent_minutes INTEGER DEFAULT 0 NOT NULL,

  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,

  UNIQUE(user_id, lesson_id)
);

CREATE INDEX idx_user_progress_user_id ON user_progress(user_id);
CREATE INDEX idx_user_progress_lesson_id ON user_progress(lesson_id);
CREATE INDEX idx_user_progress_status ON user_progress(user_id, status);
CREATE INDEX idx_user_progress_updated ON user_progress(user_id, updated_at DESC);
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞–∂–¥–æ–º—É —É—Ä–æ–∫—É:
- –ù–∞ –∫–∞–∫–æ–π —Å–µ–∫—É–Ω–¥–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è —Å—Ç—É–¥–µ–Ω—Ç
- –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Ç—Ä–∞—Ç–∏–ª
- –°—Ç–∞—Ç—É—Å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- AI –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å: "–°—Ç—É–¥–µ–Ω—Ç –∑–∞—Å—Ç—Ä—è–ª –Ω–∞ —É—Ä–æ–∫–µ X"

---

#### `video_watch_sessions` - –°–µ—Å—Å–∏–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–∏–¥–µ–æ
```sql
CREATE TABLE IF NOT EXISTS public.video_watch_sessions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  lesson_id UUID NOT NULL REFERENCES lessons(id) ON DELETE CASCADE,
  video_id UUID REFERENCES video_content(id) ON DELETE CASCADE,

  -- –î–µ—Ç–∞–ª–∏ —Å–µ—Å—Å–∏–∏
  session_start TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  session_end TIMESTAMPTZ,
  duration_seconds INTEGER DEFAULT 0,

  -- –ü—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
  start_second INTEGER DEFAULT 0,
  end_second INTEGER DEFAULT 0,
  max_second_reached INTEGER DEFAULT 0,

  -- –ü–æ–≤–µ–¥–µ–Ω–∏–µ
  pauses_count INTEGER DEFAULT 0,
  seeks_count INTEGER DEFAULT 0, -- –ü–µ—Ä–µ–º–æ—Ç–∫–∏
  playback_speed DECIMAL(3,2) DEFAULT 1.0,

  -- –ú–µ—Ç—Ä–∏–∫–∏ –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏
  engagement_score DECIMAL(3,2), -- 0-1, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  is_fully_watched BOOLEAN DEFAULT false,

  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL
);

CREATE INDEX idx_video_sessions_user_id ON video_watch_sessions(user_id);
CREATE INDEX idx_video_sessions_lesson_id ON video_watch_sessions(lesson_id);
CREATE INDEX idx_video_sessions_date ON video_watch_sessions(user_id, session_start DESC);
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–∏–¥–µ–æ:
- –°–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –ø–æ—Å–º–æ—Ç—Ä–µ–ª
- –ö–∞–∫ —á–∞—Å—Ç–æ —Å—Ç–∞–≤–∏–ª –Ω–∞ –ø–∞—É–∑—É (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª)
- –ü–µ—Ä–µ–º–∞—Ç—ã–≤–∞–ª –ª–∏ –Ω–∞–∑–∞–¥ (–ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ)
- AI –≤–∏–¥–∏—Ç: "–°—Ç—É–¥–µ–Ω—Ç –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞–ª –º–æ–º–µ–Ω—Ç —Å 2:30 –¥–æ 3:00 –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑"

---

### 2Ô∏è‚É£ –¢–∞–±–ª–∏—Ü—ã Gamification

#### `achievements` - –®–∞–±–ª–æ–Ω—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
```sql
CREATE TABLE IF NOT EXISTS public.achievements (
  id TEXT PRIMARY KEY, -- 'first-lesson', 'streak-7', 'master-module-1'
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  icon TEXT NOT NULL, -- Emoji
  category TEXT NOT NULL CHECK (category IN (
    'learning', 'streak', 'mastery', 'social', 'speed', 'exploration', 'milestone'
  )),
  rarity TEXT DEFAULT 'common' CHECK (rarity IN ('common', 'rare', 'epic', 'legendary')),

  -- –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
  requirement_type TEXT NOT NULL, -- 'lessons_completed', 'streak_days', 'modules_completed'
  requirement_value INTEGER NOT NULL,
  requirement_description TEXT NOT NULL,

  -- –ù–∞–≥—Ä–∞–¥–∞
  xp_reward INTEGER DEFAULT 0 NOT NULL,

  -- –í–∏–¥–∏–º–æ—Å—Ç—å
  is_hidden BOOLEAN DEFAULT false, -- –°–∫—Ä—ã—Ç—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (—Å—é—Ä–ø—Ä–∏–∑ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞)
  is_daily BOOLEAN DEFAULT false, -- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ (x2 XP)

  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL
);
```

**–ü—Ä–∏–º–µ—Ä—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:**
- `first-lesson`: "–ü–µ—Ä–≤—ã–π —à–∞–≥" - –ó–∞–≤–µ—Ä—à–∏–ª –ø–µ—Ä–≤—ã–π —É—Ä–æ–∫ (+10 XP)
- `streak-7`: "–ù–µ–¥–µ–ª—è —Å–∏–ª—ã" - 7 –¥–Ω–µ–π –æ–±—É—á–µ–Ω–∏—è –ø–æ–¥—Ä—è–¥ (+50 XP)
- `master-module-1`: "–ú–∞—Å—Ç–µ—Ä –º–æ–¥—É–ª—è 1" - –ó–∞–≤–µ—Ä—à–∏–ª –≤—Å–µ —É—Ä–æ–∫–∏ –º–æ–¥—É–ª—è 1 –Ω–∞ 100% (+100 XP)

---

#### `user_achievements` - –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```sql
CREATE TABLE IF NOT EXISTS public.user_achievements (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  achievement_id TEXT NOT NULL REFERENCES achievements(id) ON DELETE CASCADE,

  -- –ü—Ä–æ–≥—Ä–µ—Å—Å
  progress_current INTEGER DEFAULT 0 NOT NULL,
  progress_required INTEGER NOT NULL,
  is_completed BOOLEAN DEFAULT false,

  -- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
  unlocked_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,

  UNIQUE(user_id, achievement_id)
);

CREATE INDEX idx_user_achievements_user_id ON user_achievements(user_id);
CREATE INDEX idx_user_achievements_completed ON user_achievements(user_id, is_completed);
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å —Å—Ç—É–¥–µ–Ω—Ç–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—é:
- –¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5/10 —É—Ä–æ–∫–æ–≤)
- –î–∞—Ç–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- AI –≤–∏–¥–∏—Ç: "–î–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è '–ù–µ–¥–µ–ª—è —Å–∏–ª—ã' –æ—Å—Ç–∞–ª–æ—Å—å 2 –¥–Ω—è!"

---

#### `missions` - –ú–∏–Ω–∏-–º–∏—Å—Å–∏–∏ (–∑–∞–¥–∞–Ω–∏—è)
```sql
CREATE TABLE IF NOT EXISTS public.missions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,

  -- –¢–∏–ø –º–∏—Å—Å–∏–∏
  mission_type TEXT NOT NULL CHECK (mission_type IN (
    'complete_lessons', 'watch_videos', 'earn_xp', 'streak_days', 'homework_submit'
  )),

  -- –î–µ—Ç–∞–ª–∏ –º–∏—Å—Å–∏–∏
  title TEXT NOT NULL,
  description TEXT,
  target_value INTEGER NOT NULL,
  current_value INTEGER DEFAULT 0 NOT NULL,

  -- –ù–∞–≥—Ä–∞–¥–∞
  xp_reward INTEGER DEFAULT 0 NOT NULL,

  -- –°—Ç–∞—Ç—É—Å
  is_completed BOOLEAN DEFAULT false,
  completed_at TIMESTAMPTZ,
  expires_at TIMESTAMPTZ, -- –ú–∏—Å—Å–∏–∏ –º–æ–≥—É—Ç –∏—Å—Ç–µ–∫–∞—Ç—å

  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL
);

CREATE INDEX idx_missions_user_id ON missions(user_id);
CREATE INDEX idx_missions_active ON missions(user_id, is_completed) WHERE is_completed = false;
CREATE INDEX idx_missions_expires ON missions(expires_at) WHERE expires_at IS NOT NULL;
```

**–ü—Ä–∏–º–µ—Ä—ã –º–∏—Å—Å–∏–π:**
- "–ü—Ä–æ–π–¥–∏ 2 —É—Ä–æ–∫–∞ —Å–µ–≥–æ–¥–Ω—è" ‚Üí +50 XP
- "–ü–æ—Å–º–æ—Ç—Ä–∏ 3 –≤–∏–¥–µ–æ" ‚Üí +30 XP
- "–°–¥–∞–π –¥–æ–º–∞—à–∫—É –ø–æ –º–æ–¥—É–ª—é 1" ‚Üí +100 XP

---

#### `weekly_goals` - –ù–µ–¥–µ–ª—å–Ω—ã–µ —Ü–µ–ª–∏
```sql
CREATE TABLE IF NOT EXISTS public.weekly_goals (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,

  -- –¢–∏–ø —Ü–µ–ª–∏
  goal_type TEXT NOT NULL CHECK (goal_type IN (
    'lessons_completed', 'study_time_minutes', 'modules_completed', 'streak_maintain'
  )),

  -- –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  target_value INTEGER NOT NULL,
  current_value INTEGER DEFAULT 0 NOT NULL,

  -- –ü–µ—Ä–∏–æ–¥ –Ω–µ–¥–µ–ª–∏
  week_start_date DATE NOT NULL,
  week_end_date DATE NOT NULL,

  -- –°—Ç–∞—Ç—É—Å
  is_completed BOOLEAN DEFAULT false,
  completed_at TIMESTAMPTZ,

  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,

  UNIQUE(user_id, goal_type, week_start_date)
);

CREATE INDEX idx_weekly_goals_user_id ON weekly_goals(user_id);
CREATE INDEX idx_weekly_goals_week ON weekly_goals(week_start_date, week_end_date);
CREATE INDEX idx_weekly_goals_active ON weekly_goals(user_id, is_completed) WHERE is_completed = false;
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –Ω–µ–¥–µ–ª—å–Ω—ã–µ —Ü–µ–ª–∏:
- "–ü—Ä–æ–π–¥–∏ 5 —É—Ä–æ–∫–æ–≤ –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ"
- "–ó–∞–Ω–∏–º–∞–π—Å—è –º–∏–Ω–∏–º—É–º 2 —á–∞—Å–∞"
- AI –≤–∏–¥–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –º–æ–∂–µ—Ç –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å

---

#### `daily_challenges` - –ß–µ–ª–ª–µ–Ω–¥–∂–∏ –¥–Ω—è
```sql
CREATE TABLE IF NOT EXISTS public.daily_challenges (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,

  -- –¢–∏–ø —á–µ–ª–ª–µ–Ω–¥–∂–∞
  challenge_type TEXT NOT NULL,
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  icon TEXT NOT NULL, -- Emoji

  -- –ù–∞–≥—Ä–∞–¥–∞
  xp_reward INTEGER DEFAULT 0 NOT NULL,

  -- –î–∞—Ç–∞ —á–µ–ª–ª–µ–Ω–¥–∂–∞
  challenge_date DATE NOT NULL,

  -- –°—Ç–∞—Ç—É—Å
  is_accepted BOOLEAN DEFAULT false,
  is_completed BOOLEAN DEFAULT false,
  accepted_at TIMESTAMPTZ,
  completed_at TIMESTAMPTZ,

  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,

  UNIQUE(user_id, challenge_date)
);

CREATE INDEX idx_daily_challenges_user_date ON daily_challenges(user_id, challenge_date);
CREATE INDEX idx_daily_challenges_active ON daily_challenges(user_id, is_completed)
  WHERE is_completed = false AND is_accepted = true;
```

---

### 3Ô∏è‚É£ –¢–∞–±–ª–∏—Ü—ã –¥–ª—è AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞

#### `curator_knowledge_base` - –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∫—É—Ä–∞—Ç–æ—Ä–∞
```sql
CREATE TABLE IF NOT EXISTS public.curator_knowledge_base (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),

  -- –ö–∞—Ç–µ–≥–æ—Ä–∏—è –∑–Ω–∞–Ω–∏–π
  category TEXT NOT NULL CHECK (category IN (
    'course_faq', 'technical_help', 'motivation', 'study_tips', 'platform_guide'
  )),

  -- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ
  question TEXT NOT NULL,
  answer TEXT NOT NULL,
  keywords TEXT[], -- –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞

  -- –°–≤—è–∑—å —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
  related_course_id INTEGER REFERENCES courses(id),
  related_module_id INTEGER REFERENCES modules(id),
  related_lesson_id UUID REFERENCES lessons(id),

  -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  priority INTEGER DEFAULT 0, -- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–∏ –≤—ã–¥–∞—á–µ
  is_active BOOLEAN DEFAULT true,
  usage_count INTEGER DEFAULT 0, -- –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å

  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL
);

CREATE INDEX idx_knowledge_base_category ON curator_knowledge_base(category);
CREATE INDEX idx_knowledge_base_keywords ON curator_knowledge_base USING GIN (keywords);
CREATE INDEX idx_knowledge_base_active ON curator_knowledge_base(is_active) WHERE is_active = true;
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–∏—Ç –æ—Ç–≤–µ—Ç—ã –∫—É—Ä–∞—Ç–æ—Ä–∞ –Ω–∞ —Ç–∏–ø–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã:
- "–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ–±—Ö—É–∫ –≤ n8n?" ‚Üí –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- "–ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á OpenAI?" ‚Üí –°—Å—ã–ª–∫–∞ –Ω–∞ —É—Ä–æ–∫ 1
- AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç—É –±–∞–∑—É –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ —Å—Ç—É–¥–µ–Ω—Ç–∞–º

---

#### `student_questions_log` - –õ–æ–≥ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
```sql
CREATE TABLE IF NOT EXISTS public.student_questions_log (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,

  -- –í–æ–ø—Ä–æ—Å —Å—Ç—É–¥–µ–Ω—Ç–∞
  question_text TEXT NOT NULL,
  question_category TEXT, -- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è AI

  -- –ö–æ–Ω—Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
  asked_at_lesson_id UUID REFERENCES lessons(id),
  asked_at_course_id INTEGER REFERENCES courses(id),

  -- –û—Ç–≤–µ—Ç AI
  ai_response TEXT NOT NULL,
  ai_model_used TEXT DEFAULT 'gpt-4o',
  response_time_ms INTEGER,

  -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  openai_thread_id TEXT,
  openai_message_id TEXT,

  -- –û—Ü–µ–Ω–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞
  student_rating INTEGER CHECK (student_rating BETWEEN 1 AND 5),
  is_helpful BOOLEAN,

  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL
);

CREATE INDEX idx_questions_log_user_id ON student_questions_log(user_id);
CREATE INDEX idx_questions_log_lesson ON student_questions_log(asked_at_lesson_id);
CREATE INDEX idx_questions_log_date ON student_questions_log(user_id, created_at DESC);
CREATE INDEX idx_questions_log_category ON student_questions_log(question_category);
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:
- AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- –ú–æ–∂–Ω–æ –≤—ã—è–≤–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Ç–µ–º—ã
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è FAQ –∏ —Ç–æ–ø-—Å–æ–≤–µ—Ç–æ–≤

---

#### `ai_mentor_advice_log` - –õ–æ–≥ —Å–æ–≤–µ—Ç–æ–≤ –æ—Ç AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞
```sql
CREATE TABLE IF NOT EXISTS public.ai_mentor_advice_log (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,

  -- –¢–∏–ø —Å–æ–≤–µ—Ç–∞
  advice_type TEXT NOT NULL CHECK (advice_type IN (
    'motivation', 'study_plan', 'achievement_tip', 'course_recommendation', 'technical_help'
  )),

  -- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ
  advice_title TEXT NOT NULL,
  advice_content TEXT NOT NULL,

  -- –¢—Ä–∏–≥–≥–µ—Ä —Å–æ–≤–µ—Ç–∞
  triggered_by TEXT, -- 'low_activity', 'achievement_near', 'streak_broken'
  trigger_context JSONB, -- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

  -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  is_shown BOOLEAN DEFAULT false,
  shown_at TIMESTAMPTZ,
  is_dismissed BOOLEAN DEFAULT false,

  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL
);

CREATE INDEX idx_advice_log_user_id ON ai_mentor_advice_log(user_id);
CREATE INDEX idx_advice_log_type ON ai_mentor_advice_log(advice_type);
CREATE INDEX idx_advice_log_shown ON ai_mentor_advice_log(user_id, is_shown);
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–∏—Ç –≤—Å–µ —Å–æ–≤–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ AI –¥–∞–ª —Å—Ç—É–¥–µ–Ω—Ç—É:
- –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–±—É—á–µ–Ω–∏—é
- –ú–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ–≤–µ—Ç–æ–≤

---

### 4Ô∏è‚É£ –§—É–Ω–∫—Ü–∏–∏ PostgreSQL –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

#### –§—É–Ω–∫—Ü–∏—è: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ streak –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```sql
CREATE OR REPLACE FUNCTION update_user_streak()
RETURNS TRIGGER AS $$
DECLARE
  last_activity DATE;
  days_diff INTEGER;
BEGIN
  -- –ü–æ–ª—É—á–∞–µ–º –¥–∞—Ç—É –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  SELECT DATE(last_activity_at) INTO last_activity
  FROM user_stats
  WHERE user_id = NEW.user_id;

  -- –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±—ã–ª–∞ —Å–µ–≥–æ–¥–Ω—è, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
  IF last_activity = CURRENT_DATE THEN
    RETURN NEW;
  END IF;

  -- –°—á–∏—Ç–∞–µ–º —Ä–∞–∑–Ω–∏—Ü—É –≤ –¥–Ω—è—Ö
  days_diff := CURRENT_DATE - last_activity;

  -- –û–±–Ω–æ–≤–ª—è–µ–º streak
  IF days_diff = 1 THEN
    -- –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º streak
    UPDATE user_stats
    SET current_streak = current_streak + 1,
        longest_streak = GREATEST(longest_streak, current_streak + 1),
        last_activity_at = NOW(),
        streak_updated_at = NOW()
    WHERE user_id = NEW.user_id;
  ELSIF days_diff > 1 THEN
    -- Streak –ø—Ä–µ—Ä–≤–∞–Ω, –Ω–∞—á–∏–Ω–∞–µ–º –∑–∞–Ω–æ–≤–æ
    UPDATE user_stats
    SET current_streak = 1,
        last_activity_at = NOW(),
        streak_updated_at = NOW()
    WHERE user_id = NEW.user_id;
  END IF;

  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ —Ç–∞–±–ª–∏—Ü—É user_progress
CREATE TRIGGER on_lesson_activity
  AFTER UPDATE ON user_progress
  FOR EACH ROW
  WHEN (NEW.last_accessed_at <> OLD.last_accessed_at)
  EXECUTE FUNCTION update_user_streak();
```

---

#### –§—É–Ω–∫—Ü–∏—è: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
```sql
CREATE OR REPLACE FUNCTION check_and_unlock_achievements(p_user_id UUID)
RETURNS TABLE(newly_unlocked_achievement_id TEXT, xp_earned INTEGER) AS $$
DECLARE
  v_achievement RECORD;
  v_current_value INTEGER;
  v_is_unlocked BOOLEAN;
BEGIN
  -- –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  FOR v_achievement IN
    SELECT a.id, a.requirement_type, a.requirement_value, a.xp_reward,
           ua.progress_current, ua.is_completed
    FROM achievements a
    LEFT JOIN user_achievements ua ON a.id = ua.achievement_id AND ua.user_id = p_user_id
    WHERE a.is_hidden = false
  LOOP
    -- –ï—Å–ª–∏ —É–∂–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
    IF v_achievement.is_completed THEN
      CONTINUE;
    END IF;

    -- –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ user_stats
    EXECUTE format('SELECT %I FROM user_stats WHERE user_id = $1', v_achievement.requirement_type)
    INTO v_current_value
    USING p_user_id;

    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ª–æ–≤–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
    IF v_current_value >= v_achievement.requirement_value THEN
      -- –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
      INSERT INTO user_achievements (user_id, achievement_id, progress_current, progress_required, is_completed, unlocked_at)
      VALUES (p_user_id, v_achievement.id, v_current_value, v_achievement.requirement_value, true, NOW())
      ON CONFLICT (user_id, achievement_id) DO UPDATE
      SET is_completed = true,
          unlocked_at = NOW(),
          progress_current = v_current_value;

      -- –ù–∞—á–∏—Å–ª—è–µ–º XP
      UPDATE user_stats
      SET total_xp = total_xp + v_achievement.xp_reward,
          achievements_unlocked = achievements_unlocked + 1,
          level = 1 + FLOOR((total_xp + v_achievement.xp_reward) / 100)
      WHERE user_id = p_user_id;

      -- –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏
      newly_unlocked_achievement_id := v_achievement.id;
      xp_earned := v_achievement.xp_reward;
      RETURN NEXT;
    ELSE
      -- –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
      INSERT INTO user_achievements (user_id, achievement_id, progress_current, progress_required)
      VALUES (p_user_id, v_achievement.id, v_current_value, v_achievement.requirement_value)
      ON CONFLICT (user_id, achievement_id) DO UPDATE
      SET progress_current = v_current_value;
    END IF;
  END LOOP;

  RETURN;
END;
$$ LANGUAGE plpgsql;
```

---

## üöÄ –°–¢–†–ê–¢–ï–ì–ò–Ø –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –§–£–ù–ö–¶–ò–û–ù–ê–õ–ê

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã:

```
–°–æ–±—ã—Ç–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞ ‚Üí Backend –æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Üí –ë–î –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Üí AI –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω
                 ‚Üì
           Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç
```

### üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:

#### 1. **Analytics Engine (Backend)**

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/src/services/analyticsEngine.ts`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –æ—Ç Frontend (–ø—Ä–æ—Å–º–æ—Ç—Ä –≤–∏–¥–µ–æ, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Ä–æ–∫–∞, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è AI)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (`user_stats`, `user_progress`, `video_watch_sessions`)
- –¢—Ä–∏–≥–≥–µ—Ä–∏–Ω–≥ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∏—Å—Å–∏–π –∏ —Ü–µ–ª–µ–π

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
```typescript
class AnalyticsEngine {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è "—Å—Ç—É–¥–µ–Ω—Ç –ø–æ—Å–º–æ—Ç—Ä–µ–ª –≤–∏–¥–µ–æ"
  async trackVideoWatchSession(params: {
    userId: string;
    lessonId: string;
    videoId: string;
    startSecond: number;
    endSecond: number;
    duration: number;
    pausesCount: number;
    seeksCount: number;
  }): Promise<void>

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è "—Å—Ç—É–¥–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–∏–ª —É—Ä–æ–∫"
  async trackLessonCompletion(params: {
    userId: string;
    lessonId: string;
    timeSpentMinutes: number;
  }): Promise<void>

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è "—Å—Ç—É–¥–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–∏–ª —Å–æ–æ–±—â–µ–Ω–∏–µ AI"
  async trackAIInteraction(params: {
    userId: string;
    questionText: string;
    aiResponse: string;
    lessonId?: string;
  }): Promise<void>

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫ —Å—Ç—É–¥–µ–Ω—Ç–∞
  async updateUserStats(userId: string): Promise<void>

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
  async checkAchievements(userId: string): Promise<AchievementUnlocked[]>
}
```

---

#### 2. **AI Context Builder (Backend)**

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/src/services/aiContextBuilder.ts`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –°–±–æ—Ä –í–°–ï–• –¥–∞–Ω–Ω—ã—Ö –æ —Å—Ç—É–¥–µ–Ω—Ç–µ –∏–∑ –ë–î
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è OpenAI
- –ò–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –∫—É—Ä–∞—Ç–æ—Ä–∞
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è instructions –¥–ª—è Assistant

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
```typescript
class AIContextBuilder {
  // –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞
  async buildStudentContext(userId: string): Promise<StudentContext>

  // –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –∏–∑ –±–∞–∑—ã –∫—É—Ä–∞—Ç–æ—Ä–∞
  async getRelevantKnowledge(query: string, lessonId?: string): Promise<KnowledgeBaseEntry[]>

  // –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å instructions –¥–ª—è OpenAI Assistant
  async buildAssistantInstructions(userId: string, assistantType: 'curator' | 'mentor' | 'analyst'): Promise<string>

  // –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≤–æ–ø—Ä–æ—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
  async getRecentQuestions(userId: string, limit: number): Promise<Question[]>
}

interface StudentContext {
  // –õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  personal: {
    fullName: string;
    email: string;
    registeredAt: Date;
  };

  // –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è
  learning: {
    currentCourse: string;
    currentModule: string;
    currentLesson: string;
    lessonsCompleted: number;
    totalLessons: number;
    courseProgress: number; // %
    timeSpentMinutes: number;
  };

  // Gamification
  gamification: {
    level: number;
    totalXP: number;
    currentStreak: number;
    longestStreak: number;
    achievementsUnlocked: number;
    recentAchievements: Achievement[];
  };

  // –ê–∫—Ç–∏–≤–Ω—ã–µ –º–∏—Å—Å–∏–∏ –∏ —Ü–µ–ª–∏
  missions: {
    activeMissions: Mission[];
    weeklyGoals: Goal[];
  };

  // –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏
  behavior: {
    lastActivityAt: Date;
    daysSinceLastActivity: number;
    averageSessionDuration: number;
    preferredStudyTime: string; // 'morning', 'afternoon', 'evening'
  };

  // –ò—Å—Ç–æ—Ä–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤
  questions: {
    recentTopics: string[];
    mostAskedQuestions: string[];
    strugglingTopics: string[];
  };
}
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```typescript
// –í OpenAI Assistant Instructions
const context = await aiContextBuilder.buildStudentContext(userId);

const instructions = `
–¢—ã AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ ${context.personal.fullName}.

–¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–° –°–¢–£–î–ï–ù–¢–ê:
- –£—Ä–æ–≤–µ–Ω—å: ${context.gamification.level}
- XP: ${context.gamification.totalXP}
- –°—Ç—Ä–∏–∫: ${context.gamification.currentStreak} –¥–Ω–µ–π
- –ü—Ä–æ–≥—Ä–µ—Å—Å –∫—É—Ä—Å–∞: ${context.learning.courseProgress}%
- –£—Ä–æ–∫–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–æ: ${context.learning.lessonsCompleted}/${context.learning.totalLessons}

–ê–ö–¢–ò–í–ù–´–ï –ú–ò–°–°–ò–ò:
${context.missions.activeMissions.map(m => `- ${m.title}: ${m.current}/${m.target}`).join('\n')}

–ü–û–°–õ–ï–î–ù–ò–ï –¢–ï–ú–´ –í–û–ü–†–û–°–û–í:
${context.questions.recentTopics.join(', ')}

–ò–ù–°–¢–†–£–ö–¶–ò–ò:
1. –û–±—Ä–∞—â–∞–π—Å—è –∫ —Å—Ç—É–¥–µ–Ω—Ç—É –ø–æ –∏–º–µ–Ω–∏
2. –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä—É–π –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –µ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
3. –ï—Å–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç –±–ª–∏–∑–æ–∫ –∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—é - –º–æ—Ç–∏–≤–∏—Ä—É–π –µ–≥–æ
4. –ï—Å–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç –¥–∞–≤–Ω–æ –Ω–µ –±—ã–ª –∞–∫—Ç–∏–≤–µ–Ω - —Å–ø—Ä–æ—Å–∏ —á—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å
5. –ò—Å–ø–æ–ª—å–∑—É–π –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã
`;
```

---

#### 3. **Dashboard API (Backend)**

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/src/controllers/dashboardController.ts`

**API Endpoints:**

```typescript
// GET /api/analytics/student/:userId/dashboard
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã NeuroHub
router.get('/analytics/student/:userId/dashboard', async (req, res) => {
  const { userId } = req.params;

  const dashboard = {
    user_info: {
      full_name: string;
      avatar_url: string | null;
      level: number;
      xp: number;
      xp_to_next_level: number;
      current_streak: number;
      longest_streak: number;
    },

    today_stats: {
      lessons_completed: number;
      watch_time_minutes: number;
      xp_earned: number;
    },

    week_activity: Array<{
      date: string;
      lessons_completed: number;
      watch_time_minutes: number;
      xp_earned: number;
    }>,

    course_progress: {
      course_id: number;
      course_title: string;
      total_lessons: number;
      completed_lessons: number;
      progress_percent: number;
      current_lesson: {
        id: string;
        title: string;
        module_title: string;
      };
    },

    recent_achievements: Array<{
      id: string;
      title: string;
      icon: string;
      xp_reward: number;
      unlocked_at: string;
      is_new: boolean;
    }>,

    active_missions: Array<{
      id: string;
      title: string;
      description: string;
      current_value: number;
      target_value: number;
      progress_percent: number;
      xp_reward: number;
      expires_at: string | null;
    }>,

    weekly_goals: Array<{
      id: string;
      goal_type: string;
      target_value: number;
      current_value: number;
      progress_percent: number;
      days_remaining: number;
    }>,

    daily_challenge: {
      id: string;
      title: string;
      description: string;
      icon: string;
      xp_reward: number;
      is_accepted: boolean;
      is_completed: boolean;
    } | null
  };

  res.json({ success: true, data: dashboard });
});
```

---

#### 4. **Achievements API (Backend)**

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/src/controllers/achievementsController.ts`

```typescript
// GET /api/achievements/:userId
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ "–í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è")
router.get('/achievements/:userId', async (req, res) => {
  const { userId } = req.params;

  const achievements = {
    week: Array<Achievement>, // –ù–µ–¥–µ–ª—å–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    month: Array<Achievement>, // –ú–µ—Å—è—á–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    permanent: Array<Achievement>, // –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ milestone

    summary: {
      total: number;
      completed: number;
      in_progress: number;
      completion_percent: number;
    }
  };

  res.json({ success: true, data: achievements });
});

// POST /api/achievements/:userId/check
// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (–ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–∞)
router.post('/achievements/:userId/check', async (req, res) => {
  const { userId } = req.params;

  const newlyUnlocked = await achievementsService.checkAndUnlock(userId);

  res.json({ success: true, data: newlyUnlocked });
});
```

---

#### 5. **Missions API (Backend)**

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/src/controllers/missionsController.ts`

```typescript
// GET /api/missions/:userId
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –º–∏—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
router.get('/missions/:userId', async (req, res) => {
  const { userId } = req.params;

  const missions = await missionsService.getActiveMissions(userId);

  res.json({ success: true, data: missions });
});

// POST /api/missions/:missionId/submit-homework
// –°–¥–∞—á–∞ –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è
router.post('/missions/:missionId/submit-homework', upload.single('file'), async (req, res) => {
  const { missionId } = req.params;
  const { userId, comment } = req.body;
  const file = req.file;

  // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª –≤ Supabase Storage
  const fileUrl = await uploadToSupabaseStorage(file);

  // –û—Ç–º–µ—á–∞–µ–º –º–∏—Å—Å–∏—é –∫–∞–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—É—é
  await missionsService.completeMission(missionId, userId, {
    homeworkUrl: fileUrl,
    comment
  });

  res.json({ success: true });
});

// POST /api/missions/update-progress
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –º–∏—Å—Å–∏–∏ (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö)
router.post('/missions/update-progress', async (req, res) => {
  const { userId, missionType, incrementValue } = req.body;

  await missionsService.updateProgress(userId, missionType, incrementValue);

  res.json({ success: true });
});
```

---

#### 6. **Video Analytics Integration (Frontend + Backend)**

**Frontend:** –ü—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –≤–∏–¥–µ–æ (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ Lesson.tsx)

```typescript
// src/pages/Lesson.tsx
import { trackVideoProgress } from '@/lib/video-analytics';

const VideoPlayer = () => {
  const [currentSecond, setCurrentSecond] = useState(0);
  const [pausesCount, setPausesCount] = useState(0);
  const [seeksCount, setSeeksCount] = useState(0);

  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
  useEffect(() => {
    const interval = setInterval(() => {
      trackVideoProgress({
        userId: user.id,
        lessonId,
        videoId,
        currentSecond,
        pausesCount,
        seeksCount
      });
    }, 10000); // 10 —Å–µ–∫—É–Ω–¥

    return () => clearInterval(interval);
  }, [currentSecond]);

  // –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –≤–∏–¥–µ–æ
  const handleVideoEnd = async () => {
    await trackVideoProgress({
      userId: user.id,
      lessonId,
      videoId,
      currentSecond: videoDuration,
      isFullyWatched: true
    });

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    await checkAchievements(user.id);
  };
};
```

**Backend:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤–∏–¥–µ–æ

```typescript
// backend/src/controllers/videosController.ts
router.post('/videos/track-progress', async (req, res) => {
  const { userId, lessonId, videoId, currentSecond, pausesCount, seeksCount, isFullyWatched } = req.body;

  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–µ—Å—Å–∏—é –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
  await db.query(`
    INSERT INTO video_watch_sessions
      (user_id, lesson_id, video_id, max_second_reached, pauses_count, seeks_count, is_fully_watched)
    VALUES ($1, $2, $3, $4, $5, $6, $7)
    ON CONFLICT (user_id, lesson_id, video_id) DO UPDATE
    SET max_second_reached = GREATEST(video_watch_sessions.max_second_reached, $4),
        pauses_count = video_watch_sessions.pauses_count + $5,
        seeks_count = video_watch_sessions.seeks_count + $6,
        is_fully_watched = $7,
        updated_at = NOW()
  `, [userId, lessonId, videoId, currentSecond, pausesCount, seeksCount, isFullyWatched]);

  // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–∫–∞
  await db.query(`
    UPDATE user_progress
    SET video_current_second = $1,
        video_watched_seconds = $2,
        last_accessed_at = NOW()
    WHERE user_id = $3 AND lesson_id = $4
  `, [currentSecond, currentSecond, userId, lessonId]);

  // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
  await analyticsEngine.updateUserStats(userId);

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
  if (isFullyWatched) {
    await analyticsEngine.checkAchievements(userId);
  }

  res.json({ success: true });
});
```

---

## üìÖ –≠–¢–ê–ü–´ –†–ê–ó–†–ê–ë–û–¢–ö–ò

### üèÅ –≠–¢–ê–ü 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (1-2 –¥–Ω—è)

**–¶–µ–ª—å:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Backend —Å—Ç—Ä—É–∫—Ç—É—Ä—É

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
2. ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ Supabase
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å seed –¥–∞–Ω–Ω—ã–µ –¥–ª—è achievements (–±–∞–∑–æ–≤—ã–π –Ω–∞–±–æ—Ä)
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
5. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- `supabase/migrations/20251121_ai_mentor_analytics.sql` - –¢–∞–±–ª–∏—Ü—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- `supabase/migrations/20251121_ai_mentor_gamification.sql` - –¢–∞–±–ª–∏—Ü—ã gamification
- `supabase/migrations/20251121_ai_mentor_knowledge_base.sql` - –¢–∞–±–ª–∏—Ü—ã AI
- `supabase/seeds/achievements_seed.sql` - –ë–∞–∑–æ–≤—ã–π –Ω–∞–±–æ—Ä –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

**–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –≤ Supabase
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- Seed –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã

---

### üèÅ –≠–¢–ê–ü 1: Analytics Engine (3-4 –¥–Ω—è)

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å `AnalyticsEngine` –∫–ª–∞—Å—Å –≤ Backend
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–∏–¥–µ–æ
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç—Ä–µ–∫–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–æ–≤
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `user_stats`
5. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Frontend (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ Lesson.tsx)

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `backend/src/services/analyticsEngine.ts` (–ù–û–í–´–ô)
- `backend/src/controllers/videosController.ts` (–û–ë–ù–û–í–ò–¢–¨)
- `backend/src/controllers/lessonsController.ts` (–û–ë–ù–û–í–ò–¢–¨)
- `src/pages/Lesson.tsx` (–û–ë–ù–û–í–ò–¢–¨ - –¥–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫–∏–Ω–≥)
- `src/lib/video-analytics.ts` (–ù–û–í–´–ô)

**API Endpoints:**
- `POST /api/videos/track-progress`
- `POST /api/lessons/:lessonId/complete`
- `GET /api/analytics/student/:userId/stats`

**–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- –ü—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –≤–∏–¥–µ–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —É—Ä–æ–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å
- `user_stats` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- Streak –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è

---

### üèÅ –≠–¢–ê–ü 2: Achievements System (3-4 –¥–Ω—è)

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å `AchievementsService`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ XP
4. –°–æ–∑–¥–∞—Ç—å Backend API –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
5. –ü–æ–¥–∫–ª—é—á–∏—Ç—å Frontend (—Å–µ–∫—Ü–∏—è "–í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è")

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `backend/src/services/achievementsService.ts` (–ù–û–í–´–ô)
- `backend/src/controllers/achievementsController.ts` (–ù–û–í–´–ô)
- `backend/src/routes/achievements.ts` (–ù–û–í–´–ô)
- `src/lib/achievements-api.ts` (–û–ë–ù–û–í–ò–¢–¨)
- `src/pages/NeuroHub.tsx` (–û–ë–ù–û–í–ò–¢–¨ - –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

**API Endpoints:**
- `GET /api/achievements/:userId` - –í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/achievements/:userId/check` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- `GET /api/achievements/templates` - –®–∞–±–ª–æ–Ω—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

**–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
- XP –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
- Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ê–Ω–∏–º–∞—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### üèÅ –≠–¢–ê–ü 3: Missions & Goals (2-3 –¥–Ω—è)

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –º–∏—Å—Å–∏–π –∏ –Ω–µ–¥–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å `MissionsService`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –º–∏—Å—Å–∏–π
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ü–µ–ª–µ–π
4. –°–æ–∑–¥–∞—Ç—å API –¥–ª—è –º–∏—Å—Å–∏–π
5. –ü–æ–¥–∫–ª—é—á–∏—Ç—å Frontend (–∫–∞—Ä—Ç–æ—á–∫–∞ "–¢–µ–∫—É—â–∞—è –º–∏—Å—Å–∏—è")

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `backend/src/services/missionsService.ts` (–ù–û–í–´–ô)
- `backend/src/services/goalsService.ts` (–ù–û–í–´–ô)
- `backend/src/controllers/missionsController.ts` (–û–ë–ù–û–í–ò–¢–¨)
- `backend/src/controllers/goalsController.ts` (–ù–û–í–´–ô)
- `backend/src/routes/goals.ts` (–û–ë–ù–û–í–ò–¢–¨)
- `src/lib/missions-api.ts` (–û–ë–ù–û–í–ò–¢–¨)
- `src/lib/goals-api.ts` (–û–ë–ù–û–í–ò–¢–¨)

**API Endpoints:**
- `GET /api/missions/:userId` - –ê–∫—Ç–∏–≤–Ω—ã–µ –º–∏—Å—Å–∏–∏
- `POST /api/missions/:missionId/complete` - –ó–∞–≤–µ—Ä—à–∏—Ç—å –º–∏—Å—Å–∏—é
- `POST /api/missions/:missionId/submit-homework` - –°–¥–∞—Ç—å –î–ó
- `GET /api/goals/weekly/:userId` - –ù–µ–¥–µ–ª—å–Ω—ã–µ —Ü–µ–ª–∏
- `POST /api/goals/weekly/generate` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ü–µ–ª–µ–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

**–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- –ú–∏—Å—Å–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Frontend
- –ü—Ä–æ–≥—Ä–µ—Å—Å –º–∏—Å—Å–∏–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ù–µ–¥–µ–ª—å–Ω—ã–µ —Ü–µ–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º
- –ú–æ–∂–Ω–æ —Å–¥–∞—Ç—å –¥–æ–º–∞—à–∫—É —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª–∫—É

---

### üèÅ –≠–¢–ê–ü 4: Dashboard API (2 –¥–Ω—è)

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã NeuroHub

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π endpoint –¥–ª—è dashboard
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã (JOIN, INDEX)
3. –ü–æ–¥–∫–ª—é—á–∏—Ç—å Frontend –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É API
4. –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `backend/src/controllers/dashboardController.ts` (–ù–û–í–´–ô)
- `backend/src/routes/dashboard.ts` (–ù–û–í–´–ô)
- `src/lib/dashboard-api.ts` (–û–ë–ù–û–í–ò–¢–¨)
- `src/pages/NeuroHub.tsx` (–û–ë–ù–û–í–ò–¢–¨ - –ø–æ–¥–∫–ª—é—á–∏—Ç—å –≤—Å–µ API)

**API Endpoints:**
- `GET /api/analytics/student/:userId/dashboard` - –ü–æ–ª–Ω—ã–π dashboard

**–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- Dashboard –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ (< 500ms)
- –í—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ real-time (—á–µ—Ä–µ–∑ Supabase Realtime)

---

### üèÅ –≠–¢–ê–ü 5: AI Context Builder (4-5 –¥–Ω–µ–π)

**–¶–µ–ª—å:** AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ —Å—Ç—É–¥–µ–Ω—Ç–µ

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å `AIContextBuilder` –∫–ª–∞—Å—Å
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –æ —Å—Ç—É–¥–µ–Ω—Ç–µ
3. –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –∫—É—Ä–∞—Ç–æ—Ä–∞ (–Ω–∞—á–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä)
4. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å OpenAI Assistant
5. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `backend/src/services/aiContextBuilder.ts` (–ù–û–í–´–ô)
- `backend/src/controllers/openaiController.ts` (–û–ë–ù–û–í–ò–¢–¨)
- `src/lib/openai-assistant.ts` (–û–ë–ù–û–í–ò–¢–¨ - –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å context)
- `supabase/seeds/curator_knowledge_base_seed.sql` (–ù–û–í–´–ô)

**API Endpoints:**
- `GET /api/ai-mentor/context/:userId` - –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞
- `POST /api/ai-mentor/ask` - –í–æ–ø—Ä–æ—Å –∫ AI —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- `GET /api/ai-mentor/knowledge-base/search` - –ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π

**–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- AI –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Å—Ç—É–¥–µ–Ω—Ç—É –ø–æ –∏–º–µ–Ω–∏
- AI –∑–Ω–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å —Å—Ç—É–¥–µ–Ω—Ç–∞
- AI –º–æ–∂–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
- –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

---

### üèÅ –≠–¢–ê–ü 6: –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–≤–µ—Ç—ã (3-4 –¥–Ω—è)

**–¶–µ–ª—å:** AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞ –∏ –¥–∞–µ—Ç —Å–æ–≤–µ—Ç—ã

**–ó–∞–¥–∞—á–∏:**
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è "–¢–æ–ø —Å–æ–≤–µ—Ç–æ–≤ –ø–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º –≤–æ–ø—Ä–æ—Å–∞–º"
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
4. –ü–æ–¥–∫–ª—é—á–∏—Ç—å Frontend (—Å–µ–∫—Ü–∏—è "–¢–æ–ø —Å–æ–≤–µ—Ç–æ–≤")

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `backend/src/services/aiAdviceService.ts` (–ù–û–í–´–ô)
- `backend/src/controllers/adviceController.ts` (–ù–û–í–´–ô)
- `backend/src/routes/advice.ts` (–ù–û–í–´–ô)
- `src/pages/NeuroHub.tsx` (–û–ë–ù–û–í–ò–¢–¨ - —Ä–µ–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã)

**API Endpoints:**
- `GET /api/advice/:userId/top-tips` - –¢–æ–ø —Å–æ–≤–µ—Ç–æ–≤
- `POST /api/advice/:userId/generate` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —Å–æ–≤–µ—Ç–æ–≤
- `GET /api/advice/:userId/motivation` - –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≤–æ–ø—Ä–æ—Å—ã
- –°–æ–≤–µ—Ç—ã –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ —Å—Ç—É–¥–µ–Ω—Ç–∞
- Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

---

### üèÅ –≠–¢–ê–ü 7: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ Telegram (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 3-4 –¥–Ω—è)

**–¶–µ–ª—å:** AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

**–ó–∞–¥–∞—á–∏:**
1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot API
2. –û—Ç–ø—Ä–∞–≤–∫–∞ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è—Ö
4. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –Ω–µ–¥–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `backend/src/services/telegramMentorService.ts` (–û–ë–ù–û–í–ò–¢–¨)
- `backend/src/cron/dailyMotivation.ts` (–ù–û–í–´–ô)

**–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- –°—Ç—É–¥–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è—Ö –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ Telegram

---

## üõ†Ô∏è –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Backend

```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ services/               # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analyticsEngine.ts  # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –∏ –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ achievementsService.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ missionsService.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ goalsService.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ aiContextBuilder.ts # –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è AI
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ aiAdviceService.ts  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–≤–µ—Ç–æ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ controllers/            # API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboardController.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ achievementsController.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ missionsController.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ goalsController.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ adviceController.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ routes/                 # API —Ä–æ—É—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ achievements.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ missions.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ goals.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ advice.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ errorHandler.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ supabase.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ server.ts
```

---

### 2. Frontend —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ NeuroHub.tsx            # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ Lesson.tsx              # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Ä–æ–∫–∞ (—Å —Ç—Ä–µ–∫–∏–Ω–≥–æ–º –≤–∏–¥–µ–æ)
‚îÇ
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ dashboard-api.ts        # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è dashboard
‚îÇ   ‚îú‚îÄ‚îÄ achievements-api.ts     # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ missions-api.ts         # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è –º–∏—Å—Å–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ goals-api.ts            # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ü–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ video-analytics.ts      # –¢—Ä–µ–∫–∏–Ω–≥ –≤–∏–¥–µ–æ
‚îÇ   ‚îú‚îÄ‚îÄ openai-assistant.ts     # AI —á–∞—Ç
‚îÇ   ‚îî‚îÄ‚îÄ supabase.ts
‚îÇ
‚îî‚îÄ‚îÄ utils/
    ‚îî‚îÄ‚îÄ apiClient.ts            # –ë–∞–∑–æ–≤—ã–π HTTP –∫–ª–∏–µ–Ω—Ç
```

---

### 3. –ö–ª—é—á–µ–≤—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ dashboard
```sql
-- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã NeuroHub
WITH user_info AS (
  SELECT
    u.id,
    u.full_name,
    u.avatar_url,
    us.level,
    us.total_xp,
    us.current_streak,
    us.longest_streak
  FROM users u
  JOIN user_stats us ON u.id = us.user_id
  WHERE u.id = $1
),
today_stats AS (
  SELECT
    COUNT(DISTINCT up.lesson_id) FILTER (WHERE up.completed_at::date = CURRENT_DATE) as lessons_completed,
    COALESCE(SUM(vws.duration_seconds) / 60, 0)::int as watch_time_minutes,
    COALESCE(SUM(ua.xp_reward), 0) as xp_earned
  FROM user_progress up
  LEFT JOIN video_watch_sessions vws ON vws.user_id = up.user_id AND vws.session_start::date = CURRENT_DATE
  LEFT JOIN user_achievements ua ON ua.user_id = up.user_id AND ua.unlocked_at::date = CURRENT_DATE
  WHERE up.user_id = $1
),
week_activity AS (
  SELECT
    DATE(up.last_accessed_at) as date,
    COUNT(DISTINCT up.lesson_id) FILTER (WHERE up.completed_at IS NOT NULL) as lessons_completed,
    COALESCE(SUM(vws.duration_seconds) / 60, 0)::int as watch_time_minutes,
    0 as xp_earned
  FROM user_progress up
  LEFT JOIN video_watch_sessions vws ON vws.user_id = up.user_id AND DATE(vws.session_start) = DATE(up.last_accessed_at)
  WHERE up.user_id = $1
    AND up.last_accessed_at >= CURRENT_DATE - INTERVAL '7 days'
  GROUP BY DATE(up.last_accessed_at)
  ORDER BY date DESC
)
SELECT
  jsonb_build_object(
    'user_info', (SELECT row_to_json(user_info.*) FROM user_info),
    'today_stats', (SELECT row_to_json(today_stats.*) FROM today_stats),
    'week_activity', (SELECT jsonb_agg(row_to_json(week_activity.*)) FROM week_activity)
  ) as dashboard;
```

---

### 4. Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (Supabase Realtime)

**Frontend –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```typescript
// src/pages/NeuroHub.tsx
useEffect(() => {
  if (!user?.id) return;

  // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è user_stats
  const subscription = supabase
    .channel('user_stats_changes')
    .on(
      'postgres_changes',
      {
        event: 'UPDATE',
        schema: 'public',
        table: 'user_stats',
        filter: `user_id=eq.${user.id}`
      },
      (payload) => {
        console.log('‚úÖ user_stats updated:', payload.new);
        // –û–±–Ω–æ–≤–ª—è–µ–º UI
        setDashboardData(prev => ({
          ...prev,
          user_info: {
            ...prev.user_info,
            level: payload.new.level,
            xp: payload.new.total_xp,
            current_streak: payload.new.current_streak
          }
        }));

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º XP popup
        if (payload.new.total_xp > payload.old.total_xp) {
          const xpEarned = payload.new.total_xp - payload.old.total_xp;
          setXpAmount(xpEarned);
          setShowXPPopup(true);
        }
      }
    )
    .subscribe();

  return () => {
    subscription.unsubscribe();
  };
}, [user?.id]);
```

---

## ‚ö†Ô∏è –†–ò–°–ö–ò –ò –ò–• –ú–ò–ù–ò–ú–ò–ó–ê–¶–ò–Ø

### –†–∏—Å–∫ 1: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ë–î –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–æ–∂–Ω—ã–µ JOIN –∑–∞–ø—Ä–æ—Å—ã –º–æ–≥—É—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–∞—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è dashboard
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Redis)
- Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π (–Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–µ 1 —Å–µ–∫, –∞ —Ä–∞–∑ –≤ 10 —Å–µ–∫)

---

### –†–∏—Å–∫ 2: AI –º–æ–∂–µ—Ç –Ω–µ –∑–Ω–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç, –µ—Å–ª–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –ë–î AI –Ω–µ —Å–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç

**–†–µ—à–µ–Ω–∏–µ:**
- Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –≤ localStorage)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞ –Ω–∞ 5 –º–∏–Ω—É—Ç
- Graceful degradation: AI —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç

---

### –†–∏—Å–∫ 3: Streak –º–æ–∂–µ—Ç —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞, –ª–µ—Ç–Ω–µ–µ –≤—Ä–µ–º—è

**–†–µ—à–µ–Ω–∏–µ:**
- –•—Ä–∞–Ω–∏—Ç—å timezone —Å—Ç—É–¥–µ–Ω—Ç–∞ –≤ `profiles.timezone`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `AT TIME ZONE` –≤ SQL –∑–∞–ø—Ä–æ—Å–∞—Ö
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–æ–Ω–∞—Ö

---

### –†–∏—Å–∫ 4: –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–æ–≥—É—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥—É–±–ª–∏—Ä—É—é—â–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** Race condition –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö

**–†–µ—à–µ–Ω–∏–µ:**
- UNIQUE constraint –Ω–∞ `(user_id, achievement_id)`
- ON CONFLICT DO NOTHING –≤ INSERT
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

---

### –†–∏—Å–∫ 5: –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∫—É—Ä–∞—Ç–æ—Ä–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø–æ–ª–Ω–æ–π

**–ü—Ä–æ–±–ª–µ–º–∞:** AI –Ω–µ —Å–º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
- –ê–Ω–∞–ª–∏–∑ –≤–æ–ø—Ä–æ—Å–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ AI –Ω–µ —Å–º–æ–≥ –æ—Ç–≤–µ—Ç–∏—Ç—å
- Fallback: "–Ø –Ω–µ –∑–Ω–∞—é —Ç–æ—á–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞, –Ω–æ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —É—Ä–æ–∫ X"

---

## üìù –ß–ï–ö–õ–ò–°–¢ –ì–û–¢–û–í–ù–û–°–¢–ò –ö –ó–ê–ü–£–°–ö–£

### ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [ ] –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] Seed –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã (–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π)
- [ ] –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–¥–Ω–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞

### ‚úÖ Backend API
- [ ] Analytics Engine —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Dashboard API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- [ ] Achievements API —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Missions API —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] AI Context Builder —Å–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç
- [ ] –í—Å–µ endpoints –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏

### ‚úÖ Frontend
- [ ] NeuroHub –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É API
- [ ] –¢—Ä–µ–∫–∏–Ω–≥ –≤–∏–¥–µ–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ú–∏—Å—Å–∏–∏ –∏ —Ü–µ–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] AI-—á–∞—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞
- [ ] Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç

### ‚úÖ AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫
- [ ] AI –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ –∏–º–µ–Ω–∏
- [ ] AI –∑–Ω–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å —Å—Ç—É–¥–µ–Ω—Ç–∞
- [ ] AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
- [ ] –í–æ–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- [ ] –°–æ–≤–µ—Ç—ã –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

---

## üéØ –ò–¢–û–ì–û–í–ê–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–≤ –ø–æ—Ä—è–¥–∫–µ –≤–∞–∂–Ω–æ—Å—Ç–∏):

1. **–≠–¢–ê–ü 1: Analytics Engine** (–∫—Ä–∏—Ç–∏—á–Ω–æ) - –ë–µ–∑ —ç—Ç–æ–≥–æ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö
2. **–≠–¢–ê–ü 4: Dashboard API** (–∫—Ä–∏—Ç–∏—á–Ω–æ) - –ß—Ç–æ–±—ã Frontend –º–æ–≥ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
3. **–≠–¢–ê–ü 5: AI Context Builder** (–∫—Ä–∏—Ç–∏—á–Ω–æ) - –ß—Ç–æ–±—ã AI —Å—Ç–∞–ª –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º
4. **–≠–¢–ê–ü 2: Achievements System** (–≤–∞–∂–Ω–æ) - Gamification
5. **–≠–¢–ê–ü 3: Missions & Goals** (–≤–∞–∂–Ω–æ) - –ú–æ—Ç–∏–≤–∞—Ü–∏—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
6. **–≠–¢–ê–ü 6: –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–≤–µ—Ç—ã** (—É–ª—É—á—à–µ–Ω–∏–µ)
7. **–≠–¢–ê–ü 7: Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å—Ä–æ–∫–∏:

- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –∂–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç (MVP):** 2-3 –Ω–µ–¥–µ–ª–∏ (–≠—Ç–∞–ø—ã 1, 4, 5)
- **–ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è:** 4-5 –Ω–µ–¥–µ–ª—å (–≤—Å–µ —ç—Ç–∞–ø—ã)
- **–° Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏:** 6 –Ω–µ–¥–µ–ª—å

---

## üìû –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é** - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∞—Å —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç
2. **–í—ã–±—Ä–∞—Ç—å —ç—Ç–∞–ø –¥–ª—è —Å—Ç–∞—Ä—Ç–∞** - –†–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–∞—á–∞—Ç—å —Å –≠—Ç–∞–ø–∞ 0 (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ë–î)
3. **–°–æ–∑–¥–∞—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏–∏** - –Ø —Å–æ–∑–¥–∞–º —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î** - –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
5. **–ù–∞—á–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É Backend** - –≠—Ç–∞–ø 1 (Analytics Engine)

---

**–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≤–∞—Å —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç, –∏ –Ω–∞—á–Ω–µ–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É.** üöÄ
