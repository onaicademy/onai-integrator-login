# üìä –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

## üéØ –¶–µ–ª—å: –û–±—ä–µ–¥–∏–Ω–∏—Ç—å Landing DB –∏ Traffic DB –≤ –µ–¥–∏–Ω—É—é Traffic DB

---

## üìã –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### **Landing DB (xikaiavwqinamgolmtcy)**

**–¢–∞–±–ª–∏—Ü—ã, –æ—Ç–Ω–æ—Å—è—â–∏–µ—Å—è –∫ Traffic Dashboard:**
1. ‚úÖ **landing_leads** - –ª–∏–¥—ã —Å –ª–µ–Ω–¥–∏–Ω–≥–∞ (–ì–õ–ê–í–ù–ê–Ø)
   - –ö–æ–ª–æ–Ω–∫–∏: id, email, name, phone, phone_normalized, source, metadata, amocrm_lead_id, amocrm_contact_id, amocrm_synced, email_sent, sms_sent, click_count, created_at, updated_at
   - –†–∞–∑–º–µ—Ä: ~1000+ –∑–∞–ø–∏—Å–µ–π (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ)
   - **–ö—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏**

2. ‚úÖ **lead_journey** - —ç—Ç–∞–ø—ã customer journey
   - –ö–æ–ª–æ–Ω–∫–∏: id, lead_id, stage, source, metadata, created_at
   - Stages: proftest_submitted, expresscourse_clicked, expresscourse_submitted, payment_*
   - **–ù—É–∂–Ω–∞ –¥–ª—è –ø–æ–ª–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω—ã –≤–æ—Ä–æ–Ω–∫–∏**

3. ‚ö†Ô∏è **scheduled_notifications** - –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ email/SMS
   - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ—Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–∞)

4. ‚ùå **–û—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã** - –ù–ï –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ Traffic Dashboard:
   - users, courses, modules, lessons - —ç—Ç–æ LMS (Learning Management System)
   - video_events, video_analytics - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤–∏–¥–µ–æ
   - achievements, gamification - –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è
   - **–ù–ï –ú–ò–ì–†–ò–†–£–ï–ú**

### **Traffic DB (oetodaexnjcunklkdlkv)**

**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:**
1. ‚úÖ traffic_users - —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∏ (3 –∑–∞–ø–∏—Å–∏)
2. ‚úÖ traffic_teams - –∫–æ–º–∞–Ω–¥—ã (0 –∑–∞–ø–∏—Å–µ–π - –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å)
3. ‚úÖ traffic_user_utm_sources - UTM –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (4 –∑–∞–ø–∏—Å–∏)
4. ‚úÖ traffic_weekly_plans - AI –ø–ª–∞–Ω—ã
5. ‚úÖ traffic_ad_account_bindings - –ø—Ä–∏–≤—è–∑–∫–∏ ad accounts
6. ‚ùå traffic_leads - **–ü–£–°–¢–ê–Ø** (—Ü–µ–ª–µ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏)
7. ‚ùå traffic_sales - **–ü–£–°–¢–ê–Ø**
8. ‚ùå challenge3d_sales - **–ü–£–°–¢–ê–Ø**
9. ‚ùå facebook_ad_spend - **–ü–£–°–¢–ê–Ø**

---

## ‚úÖ –í–ï–†–î–ò–ö–¢: –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê

### **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**

| ‚Ññ | –ü—Ä–æ–±–ª–µ–º–∞ | –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ | –†–µ—à–∞–µ—Ç—Å—è –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–µ–π |
|---|----------|-------------|------------------------|
| 1 | –õ–∏–¥—ã –≤ Landing DB, –∞—Ç—Ä–∏–±—É—Ü–∏—è –≤ Traffic DB | –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–≤—è–∑–∞—Ç—å –ª–∏–¥ —Å —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–æ–º –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º | ‚úÖ |
| 2 | –¢–∞–±–ª–∏—Ü–∞ traffic_leads –ø—É—Å—Ç–∞—è | –°–æ–∑–¥–∞–Ω–∞, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è - –º–∏–≥—Ä–∞—Ü–∏–∏ 014-015 –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã | ‚úÖ |
| 3 | JOIN —á–µ—Ä–µ–∑ —Å–µ—Ç—å | –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (100-1000ms –≤–º–µ—Å—Ç–æ 5-10ms) | ‚úÖ |
| 4 | –ù–µ—Ç ACID –º–µ–∂–¥—É –ë–î | –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –ª–∏–¥ + journey | ‚úÖ |
| 5 | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ | –î–≤–∞ Supabase –∫–ª–∏–µ–Ω—Ç–∞, –¥–≤–µ —Å—Ö–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π | ‚úÖ |
| 6 | –¢–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞ | –ï—Å–ª–∏ Landing DB –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, Traffic Dashboard –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ |
| 7 | –°—Ç–æ–∏–º–æ—Å—Ç—å | 2 Supabase instances –≤–º–µ—Å—Ç–æ 1 | ‚úÖ |

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏:**

```
–î–û (2 –ë–î):
Landing DB: landing_leads (id, utm_source)
    ‚Üì (—á–µ—Ä–µ–∑ —Å–µ—Ç—å, Foreign Data Wrapper)
Traffic DB: traffic_user_utm_sources (utm_source, user_id)
    ‚Üì (JOIN)
Traffic DB: traffic_users (id, full_name, team_name)
    ‚Üì
–†–µ–∑—É–ª—å—Ç–∞—Ç: 3 –∑–∞–ø—Ä–æ—Å–∞, 100-500ms

–ü–û–°–õ–ï (1 –ë–î):
Traffic DB:
  traffic_leads ‚üï traffic_user_utm_sources ‚üï traffic_users
    ‚Üì
–†–µ–∑—É–ª—å—Ç–∞—Ç: 1 –∑–∞–ø—Ä–æ—Å, 5-10ms
```

**–£—Å–∫–æ—Ä–µ–Ω–∏–µ: 10-50x** üöÄ

---

## üì¶ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

### **–§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Traffic DB** ‚è±Ô∏è 30 –º–∏–Ω

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ Traffic DB:
   - `traffic_lead_journey` (–∞–Ω–∞–ª–æ–≥ lead_journey)
   - `traffic_scheduled_notifications` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ `traffic_leads`:
   - `phone_normalized` TEXT
   - `email_sent` BOOLEAN
   - `sms_sent` BOOLEAN
   - `email_clicked` BOOLEAN
   - `email_clicked_at` TIMESTAMPTZ
   - `sms_clicked` BOOLEAN
   - `sms_clicked_at` TIMESTAMPTZ
   - `click_count` INTEGER

3. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏:
   - `normalize_phone(phone TEXT)` - –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
   - `find_or_create_unified_lead()` - –ø–æ–∏—Å–∫/—Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–∞

### **–§–∞–∑–∞ 2: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** ‚è±Ô∏è 1 —á–∞—Å

1. ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ Landing DB:
   - `landing_leads` ‚Üí CSV/JSON
   - `lead_journey` ‚Üí CSV/JSON

2. ‚úÖ –ò–º–ø–æ—Ä—Ç –≤ Traffic DB:
   - CSV ‚Üí `traffic_leads`
   - CSV ‚Üí `traffic_lead_journey`

3. ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π —Å–æ–≤–ø–∞–¥–∞–µ—Ç
   - –í—Å–µ —Å–≤—è–∑–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã (lead_id ‚Üí journey)
   - UTM –∞—Ç—Ä–∏–±—É—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

### **–§–∞–∑–∞ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** ‚è±Ô∏è 2 —á–∞—Å–∞

1. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å backend routes:
   - –ó–∞–º–µ–Ω–∏—Ç—å `landingSupabase` ‚Üí `trafficAdminSupabase`
   - –ó–∞–º–µ–Ω–∏—Ç—å `landing_leads` ‚Üí `traffic_leads`
   - –ó–∞–º–µ–Ω–∏—Ç—å `lead_journey` ‚Üí `traffic_lead_journey`

2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å webhook endpoints:
   - Facebook Lead Ads webhook ‚Üí –ø–∏—à–µ—Ç –≤ `traffic_leads`
   - AmoCRM webhook ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç `traffic_leads`

3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å scheduled jobs:
   - Email/SMS —Ä–∞—Å—Å—ã–ª–∫–∏ ‚Üí —á–∏—Ç–∞—é—Ç –∏–∑ `traffic_scheduled_notifications`

### **–§–∞–∑–∞ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚è±Ô∏è 1 —á–∞—Å

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Traffic Dashboard:
   - –õ–∏–¥—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
   - –ê—Ç—Ä–∏–±—É—Ü–∏—è –∫ —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–µ/–∫–æ–º–∞–Ω–¥–µ —Ä–∞–±–æ—Ç–∞—é—Ç

2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ–±—Ö—É–∫–∏:
   - –ù–æ–≤—ã–π –ª–∏–¥ –∏–∑ Facebook —Å–æ–∑–¥–∞–µ—Ç—Å—è
   - AmoCRM –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
   - –ó–∞–ø—Ä–æ—Å—ã < 50ms
   - JOIN —Ä–∞–±–æ—Ç–∞—é—Ç –±—ã—Å—Ç—Ä–æ

### **–§–∞–∑–∞ 5: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ Landing DB** ‚è±Ô∏è 30 –º–∏–Ω

1. ‚ö†Ô∏è –°–æ–∑–¥–∞—Ç—å backup Landing DB
2. ‚ö†Ô∏è –û—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ Landing DB –≤ –∫–æ–¥–µ
3. ‚ö†Ô∏è (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –£–¥–∞–ª–∏—Ç—å Landing DB instance –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä

### **–¢–µ–∫—É—â–∞—è (2 –ë–î):**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Landing DB (xikaiavwqinamgolmtcy)                           ‚îÇ
‚îÇ   ‚îú‚îÄ landing_leads (1000+ records)                          ‚îÇ
‚îÇ   ‚îú‚îÄ lead_journey (3000+ records)                           ‚îÇ
‚îÇ   ‚îî‚îÄ [LMS tables] (not relevant)                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì (Network, FDW, slow)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Traffic DB (oetodaexnjcunklkdlkv)                           ‚îÇ
‚îÇ   ‚îú‚îÄ traffic_leads (0 records) ‚ùå EMPTY                     ‚îÇ
‚îÇ   ‚îú‚îÄ traffic_user_utm_sources (4 records)                   ‚îÇ
‚îÇ   ‚îú‚îÄ traffic_users (3 records)                              ‚îÇ
‚îÇ   ‚îî‚îÄ traffic_teams (0 records)                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã, –∞—Ç—Ä–∏–±—É—Ü–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞
```

### **–¶–µ–ª–µ–≤–∞—è (1 –ë–î):**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Traffic DB (oetodaexnjcunklkdlkv) - UNIFIED                 ‚îÇ
‚îÇ   ‚îú‚îÄ traffic_leads (1000+ records) ‚úÖ MIGRATED              ‚îÇ
‚îÇ   ‚îú‚îÄ traffic_lead_journey (3000+ records) ‚úÖ MIGRATED       ‚îÇ
‚îÇ   ‚îú‚îÄ traffic_user_utm_sources (4 records)                   ‚îÇ
‚îÇ   ‚îú‚îÄ traffic_users (3 records)                              ‚îÇ
‚îÇ   ‚îú‚îÄ traffic_teams (2 records)                              ‚îÇ
‚îÇ   ‚îú‚îÄ traffic_sales (future)                                 ‚îÇ
‚îÇ   ‚îú‚îÄ challenge3d_sales (future)                             ‚îÇ
‚îÇ   ‚îî‚îÄ facebook_ad_spend (future)                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì (Local JOINs, fast)
              traffic_leads
                   ‚üï
         traffic_user_utm_sources
                   ‚üï
            traffic_users
                   ‚üï
            traffic_teams

–†–µ–∑—É–ª—å—Ç–∞—Ç: –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ, –±—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã
```

---

## üí∞ –≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

| –†–µ—Å—É—Ä—Å | –î–æ (2 –ë–î) | –ü–æ—Å–ª–µ (1 –ë–î) | –≠–∫–æ–Ω–æ–º–∏—è |
|--------|-----------|--------------|----------|
| **Supabase instances** | 2 | 1 | -50% |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | $50/–º–µ—Å | $25/–º–µ—Å | **$300/–≥–æ–¥** |
| **–ó–∞–ø—Ä–æ—Å—ã –∫ –ë–î** | ~10,000/–¥–µ–Ω—å | ~5,000/–¥–µ–Ω—å | -50% |
| **Latency** | 100-500ms | 5-10ms | **-95%** |
| **–¢–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞** | 2 | 1 | -50% |
| **–ö–æ–¥ –ø–æ–¥–¥–µ—Ä–∂–∫–∏** | 2 –∫–ª–∏–µ–Ω—Ç–∞ | 1 –∫–ª–∏–µ–Ω—Ç | -50% |

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï: –ü—Ä–∏—Å—Ç—É–ø–∞–µ–º –∫ –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ Traffic DB

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~5 —á–∞—Å–æ–≤ (–≤–∫–ª—é—á–∞—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–†–∏—Å–∫–∏:** –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ backup)

**–í—ã–≥–æ–¥–∞:** –û–≥—Ä–æ–º–Ω–∞—è (–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ø—Ä–æ—Å—Ç–æ—Ç–∞, —ç–∫–æ–Ω–æ–º–∏—è)

---

## üìù –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

–°–æ–∑–¥–∞—Ç—å Migration 016: Database Consolidation

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
1. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—Ö–µ–º—ã `traffic_leads`
2. –°–æ–∑–¥–∞–Ω–∏–µ `traffic_lead_journey`
3. –°–∫—Ä–∏–ø—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞/–∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
4. Views –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Legacy –∫–æ–¥–æ–º
5. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
