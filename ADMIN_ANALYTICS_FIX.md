# üîß –ê–î–ú–ò–ù –ê–ù–ê–õ–ò–¢–ò–ö–ê (DASHBOARD) - –ò–°–ü–†–ê–í–õ–ï–ù–û

## üö® –ü–†–û–ë–õ–ï–ú–ê

–ê–¥–º–∏–Ω Dashboard (https://onai.academy/integrator/admin/analytics) –ø–æ–∫–∞–∑—ã–≤–∞–ª **–ù–ï–í–ï–†–ù–´–ï –¶–ò–§–†–´** –¥–ª—è Tripwire —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏!

### –ß—Ç–æ –±—ã–ª–æ –Ω–µ —Ç–∞–∫:
1. ‚ùå **"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏"** - –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª–æ –∏–∑ `users` —Ç–∞–±–ª–∏—Ü—ã (–æ–±—â–∞—è –ë–î)
2. ‚ùå **"Sales Manager - Tripwire"** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ leaderboard API –≤–º–µ—Å—Ç–æ stats

### –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:
- –ù–µ–≤–µ—Ä–Ω—ã–µ —Ü–∏—Ñ—Ä—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- –ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞

---

## üîç –ü–†–ò–ß–ò–ù–ê

Frontend –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ï API endpoints:

### –ë—ã–ª–æ (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
```typescript
// ‚ùå loadStudentStats - –∑–∞–ø—Ä–æ—Å –≤ users —Ç–∞–±–ª–∏—Ü—É
const { data: allUsers } = await supabase
  .from('users')
  .select('*')
  .neq('role', 'admin');

// ‚ùå loadTripwireStats - leaderboard –≤–º–µ—Å—Ç–æ stats
const response = await api.get('/api/admin/tripwire/leaderboard');
```

### –°—Ç–∞–ª–æ (–ü–†–ê–í–ò–õ–¨–ù–û):
```typescript
// ‚úÖ loadStudentStats - Tripwire API stats
const response = await api.get('/api/tripwire/admin/stats');

// ‚úÖ loadTripwireStats - Tripwire API stats + leaderboard
const statsResponse = await api.get('/api/tripwire/admin/stats');
const leaderboardResponse = await api.get('/api/admin/tripwire/leaderboard');
```

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–∞–π–ª: `src/pages/admin/AdminDashboard.tsx`

#### 1. loadStudentStats (—Å—Ç—Ä–æ–∫–∏ 40-59)
**–î–û:**
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–ª–æ –∏–∑ `users` —Ç–∞–±–ª–∏—Ü—ã
- –ü–æ–∫–∞–∑—ã–≤–∞–ª–æ –í–°–ï–• –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–Ω–µ —Ç–æ–ª—å–∫–æ Tripwire)

**–ü–û–°–õ–ï:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `/api/tripwire/admin/stats`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –†–ï–ê–õ–¨–ù–û–ï –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Tripwire —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- –î–∞–Ω–Ω—ã–µ –∏–∑ `tripwire_user_profile`

#### 2. loadTripwireStats (—Å—Ç—Ä–æ–∫–∏ 78-143)
**–î–û:**
- –¢–æ–ª—å–∫–æ leaderboard (–ø—Ä–æ–¥–∞–∂–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤)
- –ù–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

**–ü–û–°–õ–ï:**
- `/api/tripwire/admin/stats` (—Ä–µ–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- + leaderboard (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥–∞–∂–∞—Ö)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç: —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, completion rate

#### 3. formatStudentStats (—Å—Ç—Ä–æ–∫–∏ 144-159)
**–î–û:**
```typescript
{ label: "–í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤", value: studentStats.total },
{ label: "–ê–∫—Ç–∏–≤–Ω—ã—Ö", value: studentStats.active },
{ label: "–ù–æ–≤—ã—Ö –∑–∞ –Ω–µ–¥–µ–ª—é", value: studentStats.newThisWeek },
```

**–ü–û–°–õ–ï:**
```typescript
{ label: "–í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤", value: studentStats.total },
{ label: "–ê–∫—Ç–∏–≤–Ω—ã—Ö (7 –¥–Ω)", value: studentStats.active },
{ label: "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–π", value: tripwireStats?.completedStudents },
```

#### 4. –ö–∞—Ä—Ç–æ—á–∫–∞ "Sales Manager - Tripwire" (—Å—Ç—Ä–æ–∫–∏ 286-297)
**–î–û:**
```typescript
{ label: "–í—Å–µ–≥–æ –ø—Ä–æ–¥–∞–∂", value: totalSales },
{ label: "–í—ã—Ä—É—á–∫–∞", value: totalRevenue },
{ label: "–≠—Ç–æ—Ç –º–µ—Å—è—Ü", value: thisMonthSales },
```

**–ü–û–°–õ–ï:**
```typescript
{ label: "–í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤", value: totalStudents },
{ label: "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–π –∫—É—Ä—Å–∞", value: completedStudents (completionRate%) },
{ label: "–í—ã—Ä—É—á–∫–∞", value: totalRevenue },
```

---

## üìä –ß–¢–û –¢–ï–ü–ï–†–¨ –ü–û–ö–ê–ó–´–í–ê–ï–¢–°–Ø

### –ö–∞—Ä—Ç–æ—á–∫–∞ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏":
- ‚úÖ –í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: **56** (—Ä–µ–∞–ª—å–Ω–æ–µ –∏–∑ tripwire_user_profile)
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã—Ö (7 –¥–Ω): **X** (—Ä–µ–∞–ª—å–Ω–æ–µ –∏–∑ tripwire_progress)
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–π: **6** (–∫—Ç–æ –∑–∞–≤–µ—Ä—à–∏–ª –≤—Å–µ –º–æ–¥—É–ª–∏)

### –ö–∞—Ä—Ç–æ—á–∫–∞ "Sales Manager - Tripwire":
- ‚úÖ –í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: **56** 
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–π –∫—É—Ä—Å–∞: **6 (11%)**
- ‚úÖ –í—ã—Ä—É—á–∫–∞: **280,000‚Ç∏** (—Ä–µ–∞–ª—å–Ω–∞—è –∏–ª–∏ —Ä–∞—Å—á—ë—Ç–Ω–∞—è)

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. **–û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å:**
   ```
   https://onai.academy/integrator/admin/analytics
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏":**
   - –í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å **56** (–∏–ª–∏ —Ç–µ–∫—É—â–µ–µ –∫–æ–ª-–≤–æ)
   - –ê–∫—Ç–∏–≤–Ω—ã—Ö: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
   - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–π: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å **6** (–∏–ª–∏ —Ç–µ–∫—É—â–µ–µ)

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É "Sales Manager - Tripwire":**
   - –í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: **56**
   - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–π –∫—É—Ä—Å–∞: **6 (11%)**
   - –í—ã—Ä—É—á–∫–∞: **280,000‚Ç∏**

4. **–°—Ä–∞–≤–Ω–∏—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:**
   ```sql
   -- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î:
   SELECT COUNT(*) FROM tripwire_user_profile;
   -- –î–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å "–í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤"
   
   SELECT COUNT(*) FROM tripwire_user_profile 
   WHERE modules_completed >= total_modules;
   -- –î–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–π"
   ```

---

## üìÅ –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´

### Frontend:
- ‚úÖ `src/pages/admin/AdminDashboard.tsx`
  - loadStudentStats (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Tripwire API)
  - loadTripwireStats (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è stats + leaderboard)
  - formatStudentStats (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è)
  - –ö–∞—Ä—Ç–æ—á–∫–∞ Sales Manager (—Å—Ç—É–¥–µ–Ω—Ç—ã + –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è)

### Backend:
- ‚úÖ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (API endpoint `/api/tripwire/admin/stats` —É–∂–µ —Ä–∞–±–æ—Ç–∞–ª!)

---

## üîÑ –°–í–Ø–ó–¨ –° –î–†–£–ì–ò–ú–ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø–ú–ò

–≠—Ç–æ **—Ç—Ä–µ—Ç—å–µ** –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è:

1. ‚úÖ **TRIPWIRE_–ò–°–ü–†–ê–í–õ–ï–ù–û.md** - —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–æ–¥—É–ª–µ–π
2. ‚úÖ **ADMIN_STUDENTS_PROGRESS_FIX.md** - —Ç–∞–±–ª–∏—Ü–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
3. ‚úÖ **ADMIN_ANALYTICS_FIX.md** (—ç—Ç–æ—Ç —Ñ–∞–π–ª) - –¥–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

–í—Å–µ —Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ API endpoints**:
- `/api/tripwire/admin/stats` - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/api/tripwire/admin/students` - —Å–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û

### API Endpoint —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏!
- ‚úÖ `authenticateJWT, requireAdmin`
- ‚úÖ –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã –≤–∏–¥—è—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π Tripwire –ë–î

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
- ‚ùå –ù–ï–¢ –∫—ç—à–∞
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è dashboard!

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

**–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 1  
**–°—Ç—Ä–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–æ:** ~100  
**–§—É–Ω–∫—Ü–∏–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** 2  
**–ö–∞—Ä—Ç–æ—á–µ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–æ:** 2  

**–ó–∞—Ç—Ä–∞—á–µ–Ω–æ –≤—Ä–µ–º–µ–Ω–∏:** ~15 –º–∏–Ω—É—Ç  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô**  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

---

## ‚úÖ –ò–¢–û–ì

**–î–û:**
- ‚ùå –ù–µ–≤–µ—Ä–Ω—ã–µ —Ü–∏—Ñ—Ä—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (–∏–∑ –æ–±—â–µ–π users —Ç–∞–±–ª–∏—Ü—ã)
- ‚ùå –ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ (—Ç–æ–ª—å–∫–æ leaderboard)
- ‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è—Ö
- ‚ùå –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞

**–ü–û–°–õ–ï:**
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ —Ü–∏—Ñ—Ä—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (–∏–∑ tripwire_user_profile)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (stats + leaderboard)
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫—É—Ä—Å–∞
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

**–î–∞—Ç–∞**: 19 –¥–µ–∫–∞–±—Ä—è 2025, 13:25 MSK  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å**: AI Assistant  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û –ò –ì–û–¢–û–í–û –ö –ü–†–û–í–ï–†–ö–ï**

**–ü—Ä–æ–≤–µ—Ä—è–π –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å!** üöÄ
