# Фиксы карточек модулей

## Проблемы:
1. ❌ Изменения дизайна не применились
2. ❌ Периодически модули становятся пустыми (то второй, то третий)

## Примененные фиксы:

### 1. **Вертикальный layout карточек** ✅
- Карточки теперь используют вертикальный layout
- Кнопка и информация перемещены вниз к нижнему краю
- Добавлена минимальная высота `min-h-[280px]`

### 2. **Защита от пустых модулей** ✅
- **Frontend (`ModuleCard.tsx`)**: Не рендерит карточку если нет `title`
- **Frontend (`Course.tsx`)**: Фильтрует модули без `title` перед рендером
- **Backend (`courses.ts`)**: Фильтрует модули без `title` в API ответе

### 3. **Дополнительное логирование** ✅
- Добавлено логирование данных каждого модуля
- Консоль покажет, если модуль без title пытается отрендериться

## Что нужно сделать:

### 1. Перезапустить backend сервер:
```bash
cd backend
npm run dev
```

### 2. Очистить кэш браузера:
- **Chrome/Edge**: `Ctrl + Shift + Delete` → Очистить изображения и файлы в кэше
- Или сделать **Hard Refresh**: `Ctrl + F5`

### 3. Проверить консоль браузера:
Откройте Developer Tools (`F12`) и посмотрите:
- Есть ли ошибки `❌ ModuleCard: title отсутствует`
- Какие данные приходят для каждого модуля

### 4. Если модули все еще пустые:

**Проверить базу данных:**
```sql
SELECT id, title, description, course_id, order_index, is_archived 
FROM modules 
WHERE course_id = 1 
ORDER BY order_index;
```

Если есть модули с `title = NULL` или `title = ''`, то нужно:
```sql
-- Удалить модули без title
DELETE FROM modules WHERE title IS NULL OR title = '';

-- Или исправить их
UPDATE modules SET title = 'Модуль ' || id WHERE title IS NULL OR title = '';
```

## Файлы изменены:
1. ✅ `src/components/course/ModuleCard.tsx` - вертикальный layout + защита от пустых данных
2. ✅ `src/pages/Course.tsx` - фильтрация модулей без title
3. ✅ `backend/src/routes/courses.ts` - фильтрация на сервере

## Проверка работы:
1. Откройте страницу курса: `http://localhost:5173/course/1`
2. Все карточки модулей должны быть заполнены
3. Кнопка "НАЧАТЬ МОДУЛЬ" должна быть внизу карточки
4. Информация о времени/уроках должна быть над кнопкой
