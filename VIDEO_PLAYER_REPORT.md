# üìä –û—Ç—á—ë—Ç: –í–∏–¥–µ–æ–ø–ª–µ–µ—Ä —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —É—Ä–æ–∫–∞

**–î–∞—Ç–∞:** 16 –Ω–æ—è–±—Ä—è 2025  
**–§–∞–π–ª:** `src/pages/Lesson.tsx`  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

---

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. **API –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
–î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–∫–∞ –∏–∑ –±—ç–∫–µ–Ω–¥–∞:

- ‚úÖ **GET `/api/lessons/:lessonId`** - –¥–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∞ (title, description, duration_minutes)
- ‚úÖ **GET `/api/videos/lesson/:lessonId`** - –≤–∏–¥–µ–æ —Ñ–∞–π–ª (video_url)
- ‚úÖ **GET `/api/materials/:lessonId`** - –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

### 2. **–ö–∞—Å—Ç–æ–º–Ω—ã–π –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä**
–°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π HTML5 –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä:

#### –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ **Play / Pause** - –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏ –ø–∞—É–∑–∞
- ‚úÖ **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä** - –ø–µ—Ä–µ–º–æ—Ç–∫–∞ —Å —Ç—Ä–µ–∫–∏–Ω–≥–æ–º seek —Å–æ–±—ã—Ç–∏—è
- ‚úÖ **–ì—Ä–æ–º–∫–æ—Å—Ç—å** - —Ä–µ–≥—É–ª—è—Ç–æ—Ä –≥—Ä–æ–º–∫–æ—Å—Ç–∏ + –∫–Ω–æ–ø–∫–∞ Mute
- ‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å** - –≤—ã–±–æ—Ä –∏–∑ 0.5x, 0.75x, 1x, 1.25x, 1.5x, 1.75x, 2x
- ‚úÖ **Fullscreen** - –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
- ‚úÖ **–í—Ä–µ–º—è** - —Ç–µ–∫—É—â–µ–µ / –æ–±—â–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Ñ–æ—Ä–º–∞—Ç M:SS)

#### UI/UX:
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—ã —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏ (—É–±–∏—Ä–∞—é—Ç—Å—è –æ—Ç –∫—É—Ä—Å–æ—Ä–∞)
- ‚úÖ –ë–æ–ª—å—à–∞—è –∫–Ω–æ–ø–∫–∞ Play –≤ —Ü–µ–Ω—Ç—Ä–µ –∫–æ–≥–¥–∞ –≤–∏–¥–µ–æ –Ω–∞ –ø–∞—É–∑–µ
- ‚úÖ –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–∞–º–∏ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
- ‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è (framer-motion)

### 3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤–∏–¥–µ–æ**
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ç—Ä–µ–∫–∏–Ω–≥ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π:

#### –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è:
| –°–æ–±—ã—Ç–∏–µ | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è | –î–∞–Ω–Ω—ã–µ |
|---------|-------------------|--------|
| `play` | –ù–∞–∂–∞—Ç–∏–µ Play | `position_seconds` |
| `pause` | –ù–∞–∂–∞—Ç–∏–µ Pause | `position_seconds` |
| `seek` | –ü–µ—Ä–µ–º–æ—Ç–∫–∞ –≤–∏–¥–µ–æ | `seek_to_seconds` |
| `progress` | –ö–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ | `progress_percent` |
| `complete` | –í–∏–¥–µ–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ | `position_seconds` |
| `playback_rate_change` | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ | `playback_rate` |
| `mute` | –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞ | `muted` (true/false) |
| `fullscreen_toggle` | –ü–µ—Ä–µ—Ö–æ–¥ –≤ fullscreen | - |
| `lesson_complete` | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Ä–æ–∫–∞ | - |

#### –§–æ—Ä–º–∞—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏:
```typescript
POST /api/analytics/video-event
{
  "user_id": "uuid –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
  "lesson_id": 123,
  "video_id": 456,
  "session_id": "—Å–ª—É—á–∞–π–Ω—ã–π ID —Å–µ—Å—Å–∏–∏",
  "event_type": "play",
  "position_seconds": 45.5,
  // + –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ–±—ã—Ç–∏—è
}
```

### 4. **–ú–∞—Ç–µ—Ä–∏–∞–ª—ã —É—Ä–æ–∫–∞**
–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:

- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
- ‚úÖ –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –≤ MB)
- ‚úÖ –ò–∫–æ–Ω–∫–∞ —Ç–∏–ø–∞ (PDF, Link, Download)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- ‚úÖ Hover —ç—Ñ—Ñ–µ–∫—Ç —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ü–≤–µ—Ç–∞ –Ω–∞ –∑–µ–ª—ë–Ω—ã–π
- ‚úÖ Fallback –µ—Å–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

### State –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```typescript
// –î–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∞
const [lesson, setLesson] = useState<any>(null);
const [video, setVideo] = useState<any>(null);
const [materials, setMaterials] = useState<any[]>([]);
const [loading, setLoading] = useState(true);
const [isCompleted, setIsCompleted] = useState(false);

// –í–∏–¥–µ–æ–ø–ª–µ–µ—Ä
const videoRef = useRef<HTMLVideoElement>(null);
const [playing, setPlaying] = useState(false);
const [currentTime, setCurrentTime] = useState(0);
const [duration, setDuration] = useState(0);
const [volume, setVolume] = useState(1);
const [muted, setMuted] = useState(false);
const [playbackRate, setPlaybackRate] = useState(1);
const [showControls, setShowControls] = useState(true);

// –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
const [sessionId] = useState(() => Math.random().toString(36).substring(7));
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `loadLessonData()` | –ó–∞–≥—Ä—É–∂–∞–µ—Ç —É—Ä–æ–∫, –≤–∏–¥–µ–æ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏–∑ API |
| `trackEvent(type, data)` | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É |
| `togglePlay()` | Play/Pause + —Ç—Ä–µ–∫–∏–Ω–≥ |
| `handleTimeUpdate()` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ + —Ç—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ |
| `handleLoadedMetadata()` | –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–∏–¥–µ–æ |
| `handleEnded()` | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–∏–¥–µ–æ |
| `changePlaybackRate(rate)` | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ + —Ç—Ä–µ–∫–∏–Ω–≥ |
| `changeVolume(vol)` | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç–∏ |
| `toggleMute()` | –í–∫–ª/–≤—ã–∫–ª –∑–≤—É–∫ + —Ç—Ä–µ–∫–∏–Ω–≥ |
| `toggleFullscreen()` | Fullscreen —Ä–µ–∂–∏–º + —Ç—Ä–µ–∫–∏–Ω–≥ |
| `handleSeek(time)` | –ü–µ—Ä–µ–º–æ—Ç–∫–∞ + —Ç—Ä–µ–∫–∏–Ω–≥ |
| `formatTime(seconds)` | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ (M:SS) |

---

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω

### –°–æ—Ö—Ä–∞–Ω—ë–Ω –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:

‚úÖ –ß—ë—Ä–Ω—ã–π —Ñ–æ–Ω —Å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –Ω–µ–π—Ä–æ—Å–µ—Ç—å—é  
‚úÖ –ó–µ–ª—ë–Ω—ã–µ –∞–∫—Ü–µ–Ω—Ç—ã (#00ff00)  
‚úÖ –¢—ë–º–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ (#1a1a24)  
‚úÖ –ü—Ä–æ–ª–µ—Ç–∞—é—â–∏–µ –∫–æ–º–µ—Ç—ã  
‚úÖ –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ (framer-motion)

### –í–∏–¥–µ–æ–ø–ª–µ–µ—Ä:

```css
/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
aspect-video (16:9)
border: border-[#00ff00]/20
shadow: shadow-lg shadow-[#00ff00]/10

/* –ö–æ–Ω—Ç—Ä–æ–ª—ã */
–ì—Ä–∞–¥–∏–µ–Ω—Ç —Ñ–æ–Ω–∞: from-black via-black/80 to-transparent
–ö–Ω–æ–ø–∫–∏: white ‚Üí hover:[#00ff00]
–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä: gray-600 ‚Üí [#00ff00] –ø–æ–ª–∑—É–Ω–æ–∫

/* –ë–æ–ª—å—à–∞—è –∫–Ω–æ–ø–∫–∞ Play */
w-20 h-20 rounded-full
bg-[#00ff00]/20 border-2 border-[#00ff00]
backdrop-blur-sm
```

---

## üîå API Endpoints (Backend)

### –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

#### 1. GET `/api/lessons/:lessonId`
**–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–∫–∞**

**Response:**
```json
{
  "lesson": {
    "id": 3,
    "module_id": 2,
    "title": "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Telegram-–±–æ—Ç–∞",
    "description": "–ù–∞—É—á–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Telegram-–±–æ—Ç–∞",
    "duration_minutes": 12,
    "order": 3,
    "created_at": "2025-11-15T10:00:00Z"
  }
}
```

#### 2. GET `/api/videos/lesson/:lessonId`
**–ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∏–¥–µ–æ –¥–ª—è —É—Ä–æ–∫–∞**

**Response:**
```json
{
  "video": {
    "id": 1,
    "lesson_id": 3,
    "video_url": "https://storage.example.com/videos/lesson-3.mp4",
    "duration_seconds": 720,
    "quality": "1080p",
    "created_at": "2025-11-15T10:00:00Z"
  }
}
```

**–í–∞–∂–Ω–æ:** 
- `video_url` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–æ–π –Ω–∞ MP4 —Ñ–∞–π–ª
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CORS –¥–ª—è –≤–∏–¥–µ–æ
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å signed URL –µ—Å–ª–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ S3/CloudStorage

#### 3. GET `/api/materials/:lessonId`
**–ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —É—Ä–æ–∫–∞**

**Response:**
```json
{
  "materials": [
    {
      "id": 1,
      "lesson_id": 3,
      "filename": "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –±–æ—Ç–∞.pdf",
      "file_url": "https://storage.example.com/materials/instruction.pdf",
      "file_size_bytes": 2048576,
      "type": "pdf",
      "created_at": "2025-11-15T10:00:00Z"
    },
    {
      "id": 2,
      "lesson_id": 3,
      "filename": "BotFather –≤ Telegram",
      "file_url": "https://t.me/botfather",
      "file_size_bytes": 0,
      "type": "link",
      "created_at": "2025-11-15T10:00:00Z"
    }
  ]
}
```

#### 4. POST `/api/analytics/video-event`
**–¢—Ä–µ–∫–∏–Ω–≥ —Å–æ–±—ã—Ç–∏—è –≤–∏–¥–µ–æ**

**Request Body:**
```json
{
  "user_id": "1d063207-02ca-41e9-b17b-bf83830e66ca",
  "lesson_id": 3,
  "video_id": 1,
  "session_id": "abc123xyz",
  "event_type": "play",
  "position_seconds": 45.5,
  "progress_percent": 6.25
}
```

**Response:**
```json
{
  "success": true,
  "event_id": 12345
}
```

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `video_analytics`:

```sql
CREATE TABLE video_analytics (
  id SERIAL PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  lesson_id INTEGER REFERENCES lessons(id),
  video_id INTEGER REFERENCES videos(id),
  session_id VARCHAR(50),
  event_type VARCHAR(50),
  position_seconds FLOAT,
  progress_percent FLOAT,
  playback_rate FLOAT,
  muted BOOLEAN,
  seek_to_seconds FLOAT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
CREATE INDEX idx_video_analytics_user ON video_analytics(user_id);
CREATE INDEX idx_video_analytics_lesson ON video_analytics(lesson_id);
CREATE INDEX idx_video_analytics_session ON video_analytics(session_id);
CREATE INDEX idx_video_analytics_type ON video_analytics(event_type);
```

---

## üöÄ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

```
User opens /course/1/module/2/lesson/3
    ‚Üì
useEffect –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
    ‚Üì
loadLessonData() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
    ‚Üì
–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API:
  - GET /api/lessons/3
  - GET /api/videos/lesson/3
  - GET /api/materials/3
    ‚Üì
State –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (lesson, video, materials)
    ‚Üì
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å –¥–∞–Ω–Ω—ã–º–∏
```

### 2. –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ:

```
User clicks Play button
    ‚Üì
togglePlay() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
    ‚Üì
videoRef.current.play()
    ‚Üì
trackEvent('play') ‚Üí POST /api/analytics/video-event
    ‚Üì
setPlaying(true)
    ‚Üì
handleTimeUpdate() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
    ‚Üì
–ö–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥: trackEvent('progress')
```

### 3. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Ä–æ–∫–∞:

```
User clicks "–ó–∞–≤–µ—Ä—à–∏—Ç—å —É—Ä–æ–∫"
    ‚Üì
handleComplete() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
    ‚Üì
localStorage.setItem('lesson-3-completed', 'true')
    ‚Üì
trackEvent('lesson_complete')
    ‚Üì
setIsCompleted(true)
    ‚Üì
–ö–Ω–æ–ø–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è disabled
```

---

## üêõ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### Fallback —Å—Ü–µ–Ω–∞—Ä–∏–∏:

1. **–£—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ API:**
   ```typescript
   // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è mock –¥–∞–Ω–Ω—ã–µ:
   setLesson({
     id: parseInt(lessonId!),
     title: "–£—Ä–æ–∫ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...",
     description: "–î–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ API"
   });
   ```

2. **–í–∏–¥–µ–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ:**
   ```tsx
   // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è placeholder:
   <div className="aspect-video bg-[#0a0a0f] flex items-center justify-center">
     <p className="text-gray-400">–í–∏–¥–µ–æ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ</p>
   </div>
   ```

3. **–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç:**
   ```tsx
   // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ:
   <p className="text-sm text-gray-400 text-center py-4">
     –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
   </p>
   ```

4. **–û—à–∏–±–∫–∞ —Ç—Ä–µ–∫–∏–Ω–≥–∞:**
   ```typescript
   // –ù–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –ø–ª–µ–µ—Ä–∞:
   catch (error) {
     console.error('‚ùå –û—à–∏–±–∫–∞ —Ç—Ä–µ–∫–∏–Ω–≥–∞:', error);
     // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
   }
   ```

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

#### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö:
- [ ] –£—Ä–æ–∫ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ API
- [ ] –í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è
- [ ] –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] Loading —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è

#### –í–∏–¥–µ–æ–ø–ª–µ–µ—Ä:
- [ ] Play/Pause —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –ü–µ—Ä–µ–º–æ—Ç–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ì—Ä–æ–º–∫–æ—Å—Ç—å —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è
- [ ] Mute –≤–∫–ª—é—á–∞–µ—Ç—Å—è/–≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è
- [ ] –°–∫–æ—Ä–æ—Å—Ç—å –∏–∑–º–µ–Ω—è–µ—Ç—Å—è (0.5x - 2x)
- [ ] Fullscreen —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í—Ä–µ–º—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (M:SS)
- [ ] –ö–æ–Ω—Ç—Ä–æ–ª—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è/—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è

#### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞:
- [ ] Play —Å–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- [ ] Pause —Å–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- [ ] Seek —Å–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–º–æ—Ç–∫–µ
- [ ] Progress –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- [ ] Complete –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
- [ ] Session ID –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π

#### –ú–∞—Ç–µ—Ä–∏–∞–ª—ã:
- [ ] –§–∞–π–ª—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ MB
- [ ] –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Hover —ç—Ñ—Ñ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### Backend (–Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å):

1. **–°–æ–∑–¥–∞—Ç—å endpoints:**
   - `GET /api/lessons/:lessonId`
   - `GET /api/videos/lesson/:lessonId`
   - `GET /api/materials/:lessonId`
   - `POST /api/analytics/video-event`

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:**
   - –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ –≤ S3/CloudStorage
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è signed URLs –¥–ª—è –≤–∏–¥–µ–æ
   - CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤–∏–¥–µ–æ

3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `video_analytics`
   - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã

### Frontend (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

1. **–£–ª—É—á—à–µ–Ω–∏—è:**
   - [ ] –ö–Ω–æ–ø–∫–∞ "–ü—Ä–µ–¥—ã–¥—É—â–∏–π —É—Ä–æ–∫"
   - [ ] –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ (Space, ‚Üê, ‚Üí, F)
   - [ ] Picture-in-Picture —Ä–µ–∂–∏–º
   - [ ] –°—É–±—Ç–∏—Ç—Ä—ã
   - [ ] –ö–∞—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ (–µ—Å–ª–∏ –µ—Å—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏)

2. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:**
   - [ ] –î–∞—à–±–æ—Ä–¥ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö —É—Ä–æ–∫–æ–≤
   - [ ] –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –ø–µ—Ä–µ–º–æ—Ç–æ–∫
   - [ ] –°—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

---

## üìû –ó–∞–º–µ—Ç–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

1. **Session ID** –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.

2. **–¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API.

3. **video_url** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–æ–π –Ω–∞ MP4 —Ñ–∞–π–ª. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è YouTube/Vimeo - –Ω—É–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä.

4. **–í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ try/catch –∏ –Ω–µ –ª–æ–º–∞—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

5. **localStorage** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ).

6. **useAuth** hook –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `user.id` –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

### –§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

- `src/pages/Lesson.tsx` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- `src/utils/apiClient.ts` - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
- `src/hooks/useAuth.tsx` - hook –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ Frontend –≥–æ—Ç–æ–≤  
**Backend:** ‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π




