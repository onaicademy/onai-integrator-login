# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò - –ì–û–¢–û–í–û

**–î–∞—Ç–∞:** 7 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û  

---

## ‚úÖ –ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### 1. **–ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: API key –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –≤ headers**

**–§–∞–π–ª:** `src/lib/supabase.ts`

**–ë—ã–ª–æ:**
```typescript
export const supabase = createClient(supabaseUrl, supabaseKey, {
  auth: {
    storage: localStorage,
    persistSession: true,
    autoRefreshToken: true,
  }
})
```

**–°—Ç–∞–ª–æ:**
```typescript
export const supabase = createClient(supabaseUrl, supabaseKey, {
  auth: {
    storage: localStorage,
    persistSession: true,
    autoRefreshToken: true,
  },
  global: {
    headers: {
      'apikey': supabaseKey,
      'Authorization': `Bearer ${supabaseKey}`
    }
  }
})
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- Supabase —Ç—Ä–µ–±—É–µ—Ç API key –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- –¢–µ–ø–µ—Ä—å `apikey` –∏ `Authorization` headers –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —è–≤–Ω–æ
- –≠—Ç–æ —Ä–µ—à–∞–µ—Ç –æ—à–∏–±–∫—É "No API key found in request"

---

### 2. **Console.log —É–¥–∞–ª—è–ª–∏—Å—å –≤ production**

**–§–∞–π–ª:** `vite.config.ts`

**–ë—ã–ª–æ:**
```typescript
esbuild: {
  drop: mode === "production" ? ['console', 'debugger'] : [],
}
```

**–°—Ç–∞–ª–æ:**
```typescript
esbuild: {
  drop: [], // –í—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ —É–¥–∞–ª—è–µ–º console.log –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
}
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- –†–∞–Ω—å—à–µ –≤—Å–µ console.log —É–¥–∞–ª—è–ª–∏—Å—å –ø—Ä–∏ —Å–±–æ—Ä–∫–µ production
- –ú—ã –Ω–µ –≤–∏–¥–µ–ª–∏ –æ—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Supabase
- –¢–µ–ø–µ—Ä—å –ª–æ–≥–∏ –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

### 3. **–°—Ç–∞—Ä—ã–π –¥–æ–º–µ–Ω –∑–∞–º–µ–Ω–µ–Ω**

**–§–∞–π–ª:** `src/pages/admin/StudentsActivity.tsx`

**–ë—ã–ª–æ:**
```typescript
invitation_url: `https://onai.academy/invite/${...}`
```

**–°—Ç–∞–ª–æ:**
```typescript
invitation_url: `https://onai.academy/invite/${...}`
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- –°—Ç–∞—Ä—ã–π –¥–æ–º–µ–Ω `onai.academy` –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- –í—Å–µ —Å—Å—ã–ª–∫–∏ –¥–æ–ª–∂–Ω—ã —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ `onai.academy`

---

### 4. **–£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

**–§–∞–π–ª:** `src/lib/supabase.ts`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```typescript
console.log('‚úÖ Supabase initialized:', {
  url: supabaseUrl,
  keyLength: supabaseKey?.length,
  keyPreview: supabaseKey?.substring(0, 20) + '...'
})
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- –¢–µ–ø–µ—Ä—å –≤–∏–¥–∏–º –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª–∏–Ω—É –∫–ª—é—á–∞, –Ω–æ –∏ –µ–≥–æ –Ω–∞—á–∞–ª–æ
- –õ–µ–≥—á–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## üöÄ –ö–ê–ö –ó–ê–î–ï–ü–õ–û–ò–¢–¨ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub

```bash
# 1. –ó–∞–∫–æ–º–º–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add -A
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è - –¥–æ–±–∞–≤–ª–µ–Ω API key –≤ headers"

# 2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ GitHub
git push origin main

# 3. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@178.128.203.40

# 4. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /var/www/onai-integrator-login
git pull origin main
npm install
npm run build
pm2 restart onai-app
pm2 save
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å deploy.sh

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ
git add -A
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è"
git push origin main

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π —Å–∫—Ä–∏–ø—Ç
./deploy.sh
```

---

## üß™ –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨ –ß–¢–û –í–°–Å –†–ê–ë–û–¢–ê–ï–¢

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ö–æ—Å—Ç–µ

```bash
# –í –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
npm run dev
```

–û—Ç–∫—Ä–æ–π: http://localhost:8080

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–û—Ç–∫—Ä–æ–π: https://onai.academy

### 3. –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ DevTools (F12)

**–í Console –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
‚úÖ Supabase initialized: {
  url: "https://capdjvokjdivxjfdddmx.supabase.co",
  keyLength: 208,
  keyPreview: "eyJhbGciOiJIUzI1NiIs..."
}
```

**–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—Ö–æ–¥–∞ (Network ‚Üí Headers):**
```
Request Headers:
  apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
  Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**–ù–ï –î–û–õ–ñ–ù–û –±—ã—Ç—å:**
```
‚ùå "No API key found in request"
‚ùå 400 Bad Request
```

---

## üîë –¢–ï–°–¢–û–í–´–ô –ê–ö–ö–ê–£–ù–¢

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ö–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π:

- **Email:** saint@onaiacademy.kz
- **Password:** Onai2134!

---

## üìã –ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø (.env)

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ñ–∞–π–ª `/var/www/onai-integrator-login/.env`:

```env
# Supabase
VITE_SUPABASE_URL=https://capdjvokjdivxjfdddmx.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNhcGRqdm9ramRpdnhqZmRkZG14Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxNjc5MDUsImV4cCI6MjA3Nzc0MzkwNX0.bsikIoF86BjthWauzbLXq3SZbNQFodppZ2TC64NniJs

# Site
VITE_SITE_URL=https://onai.academy
VITE_APP_URL=https://onai.academy

# OpenAI
VITE_OPENAI_API_KEY=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
VITE_OPENAI_ASSISTANT_ID=asst_SYhUvkKgCMEYlAjA0VNSMbLa

# Telegram Bots
VITE_AI_MENTOR_TELEGRAM_TOKEN=8380600260:AAGtuSG9GqFOmkyThhWqRzilHi3gKdKiOSo
VITE_AI_ANALYST_TELEGRAM_TOKEN=8400927507:AAF1w1H8lyE2vonPY-Z61bBybBT8dkN-Ip4
VITE_AI_MENTOR_ENABLED=false
VITE_AI_ANALYST_ENABLED=false
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
ssh root@178.128.203.40
cat /var/www/onai-integrator-login/.env | grep SUPABASE
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò –í SUPABASE

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redirect URLs

–ü–µ—Ä–µ–π–¥–∏ –≤ Supabase Dashboard:
https://supabase.com/dashboard/project/capdjvokjdivxjfdddmx/auth/url-configuration

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã:**
- `https://onai.academy/*`
- `http://localhost:8080/*` (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### 2. Email Provider

**Authentication ‚Üí Providers ‚Üí Email**
- ‚úÖ Enable Email provider
- ‚úÖ Confirm email: OFF (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- ‚úÖ Secure email change: ON

---

## üêõ –ï–°–õ–ò –í–°–Å –ï–©–Å –ù–ï –†–ê–ë–û–¢–ê–ï–¢

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "No API key found"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /var/www/onai-integrator-login
cat .env | grep VITE_SUPABASE_PUBLISHABLE_KEY

# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –∫–ª—é—á, –Ω–∞—á–∏–Ω–∞—é—â–∏–π—Å—è —Å eyJhbG...
# –ï—Å–ª–∏ –ø—É—Å—Ç–æ - –¥–æ–±–∞–≤—å .env —Ñ–∞–π–ª
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ö–µ—à –±—Ä–∞—É–∑–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π DevTools (F12)
2. –ñ–µ—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞: `Ctrl+Shift+R` (Windows) –∏–ª–∏ `Cmd+Shift+R` (Mac)
3. –ò–ª–∏: Application ‚Üí Storage ‚Üí Clear site data

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –°—Ç–∞—Ä—ã–π –±–∏–ª–¥

**–†–µ—à–µ–Ω–∏–µ:**
```bash
ssh root@178.128.203.40
cd /var/www/onai-integrator-login
rm -rf dist
npm run build
pm2 restart onai-app
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: PM2 –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
ssh root@178.128.203.40
pm2 status
pm2 restart onai-app
pm2 logs onai-app --lines 50
```

---

## üìä –õ–û–ì–ò –î–õ–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò

### PM2 –ª–æ–≥–∏
```bash
pm2 logs onai-app --lines 100
```

### Nginx –ª–æ–≥–∏
```bash
tail -f /var/log/nginx/error.log
tail -f /var/log/nginx/access.log
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```bash
pm2 status
systemctl status nginx
```

---

## üéØ –ß–ï–ö–õ–ò–°–¢ –£–°–ü–ï–®–ù–û–ì–û –î–ï–ü–õ–û–Ø

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å:

- [ ] `git push origin main` –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–µ–Ω `git pull origin main`
- [ ] `npm run build` –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] `pm2 restart onai-app` –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è: https://onai.academy
- [ ] –í –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω–æ: "‚úÖ Supabase initialized"
- [ ] –ü—Ä–∏ –≤—Ö–æ–¥–µ –ù–ï–¢ –æ—à–∏–±–∫–∏ "No API key found"
- [ ] –í—Ö–æ–¥ —Å —Ç–µ—Å—Ç–æ–≤—ã–º –∞–∫–∫–∞—É–Ω—Ç–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/courses`

---

## üöÄ –ì–û–¢–û–í–û!

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–¥–µ–ª–∞–Ω—ã. –¢–µ–ø–µ—Ä—å:

1. **–ó–∞–∫–æ–º–º–∏—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å:**
```bash
git add -A
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è - –¥–æ–±–∞–≤–ª–µ–Ω API key –≤ headers"
git push origin main
```

2. **–ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**
```bash
ssh root@178.128.203.40
cd /var/www/onai-integrator-login
git pull origin main
npm install
npm run build
pm2 restart onai-app
pm2 save
```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –û—Ç–∫—Ä–æ–π: https://onai.academy
- –í–æ–π–¥–∏ —Å: saint@onaiacademy.kz / Onai2134!
- –†–∞–¥—É–π—Å—è! üéâ

---

**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - —Å–º–æ—Ç—Ä–∏ —Ä–∞–∑–¥–µ–ª "üêõ –ï–°–õ–ò –í–°–Å –ï–©–Å –ù–ï –†–ê–ë–û–¢–ê–ï–¢"**

**–£–¥–∞—á–∏! üöÄ**

