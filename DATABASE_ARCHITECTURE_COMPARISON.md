# üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ë–ê–ó –î–ê–ù–ù–´–•: MAIN vs TRIPWIRE

**–î–∞—Ç–∞:** 2025-12-04  
**–ê–≤—Ç–æ—Ä:** AI Architect  
**–ü—Ä–æ–µ–∫—Ç:** onAI Academy Platform

---

## üìä EXECUTIVE SUMMARY

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **–î–í–ï –ò–ó–û–õ–ò–†–û–í–ê–ù–ù–´–ï –ë–ê–ó–´ –î–ê–ù–ù–´–•**:
1. **Main Database** (arqhkacellqbhjhbebfh.supabase.co) - –û—Å–Ω–æ–≤–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
2. **Tripwire Database** (pjmvxecykysfrzppdcto.supabase.co) - Sales Manager —Å–∏—Å—Ç–µ–º–∞

**–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ:** Main Database –£–ñ–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Direct Query Builder (–±–µ–∑ RPC) –¥–ª—è –í–°–ï–• –æ–ø–µ—Ä–∞—Ü–∏–π.  
**–†–µ—à–µ–Ω–∏–µ:** Tripwire Database –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ –≤ —Ç–æ–º –∂–µ —Å—Ç–∏–ª–µ –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

---

## üåê –°–•–ï–ú–ê –î–í–£–• –ë–ê–ó –î–ê–ù–ù–´–•

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         FRONTEND (Vercel)                            ‚îÇ
‚îÇ                      https://onai.academy                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    BACKEND API (DigitalOcean)                        ‚îÇ
‚îÇ                   https://api.onai.academy                           ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ  ‚îÇ   adminSupabase      ‚îÇ         ‚îÇ tripwireAdminSupabase‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  (Main Database)     ‚îÇ         ‚îÇ  (Tripwire Database) ‚îÇ         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ                                ‚îÇ
              ‚ñº                                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Main Supabase DB      ‚îÇ    ‚îÇ  Tripwire Supabase DB   ‚îÇ
‚îÇ arqhkacellqbhjhbebfh... ‚îÇ    ‚îÇ pjmvxecykysfrzppdcto... ‚îÇ
‚îÇ                         ‚îÇ    ‚îÇ                         ‚îÇ
‚îÇ ‚Ä¢ users                 ‚îÇ    ‚îÇ ‚Ä¢ users                 ‚îÇ
‚îÇ ‚Ä¢ courses               ‚îÇ    ‚îÇ ‚Ä¢ tripwire_users        ‚îÇ
‚îÇ ‚Ä¢ student_progress      ‚îÇ    ‚îÇ ‚Ä¢ sales_activity_log    ‚îÇ
‚îÇ ‚Ä¢ user_achievements     ‚îÇ    ‚îÇ ‚Ä¢ tripwire_progress     ‚îÇ
‚îÇ ‚Ä¢ user_missions         ‚îÇ    ‚îÇ ‚Ä¢ tripwire_lessons      ‚îÇ
‚îÇ ‚Ä¢ profiles              ‚îÇ    ‚îÇ                         ‚îÇ
‚îÇ ‚Ä¢ ...                   ‚îÇ    ‚îÇ                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ö–õ–ò–ï–ù–¢–û–í

### 1. Main Database Client (`backend/src/config/supabase.ts`)

```typescript
import { createClient } from '@supabase/supabase-js';

const supabaseUrl = process.env.SUPABASE_URL!;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;

export const adminSupabase = createClient(supabaseUrl, serviceRoleKey, {
  auth: {
    autoRefreshToken: false,
    persistSession: false  // Prevent session contamination
  },
  global: {
    headers: {
      Authorization: `Bearer ${serviceRoleKey}`  // üî• Explicit Bearer token
    }
  }
});

// Backward compatibility
export const supabase = adminSupabase;
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ Service Role Key (bypasses RLS)
- ‚úÖ No session persistence (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- ‚úÖ Explicit Authorization header

---

### 2. Tripwire Database Client (`backend/src/config/supabase-tripwire.ts`)

```typescript
import { createClient } from '@supabase/supabase-js';

const tripwireUrl = process.env.TRIPWIRE_SUPABASE_URL!;
const tripwireServiceRoleKey = process.env.TRIPWIRE_SERVICE_ROLE_KEY!;

export const tripwireAdminSupabase = createClient(tripwireUrl, tripwireServiceRoleKey, {
  auth: {
    autoRefreshToken: false,
    persistSession: false
  },
  db: {
    schema: 'public'  // ‚Üê –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º —Å—Ö–µ–º—É –¥–ª—è PostgREST
  },
  global: {
    headers: {
      Authorization: `Bearer ${tripwireServiceRoleKey}`
    }
  }
});
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–π Service Role Key
- ‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –æ—Ç Main Database
- ‚úÖ Explicit schema: 'public'

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –°–ï–†–í–ò–°–û–í

### Main Database Services (–∏—Å–ø–æ–ª—å–∑—É—é—Ç `adminSupabase`)

```
backend/src/services/
‚îú‚îÄ‚îÄ studentService.ts          ‚Üê CRUD —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (Direct Query Builder)
‚îú‚îÄ‚îÄ dashboardService.ts        ‚Üê –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞ (JS –∞–≥—Ä–µ–≥–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ courseService.ts           ‚Üê –ö—É—Ä—Å—ã
‚îú‚îÄ‚îÄ lessonService.ts           ‚Üê –£—Ä–æ–∫–∏
‚îú‚îÄ‚îÄ profileService.ts          ‚Üê –ü—Ä–æ—Ñ–∏–ª–∏
‚îú‚îÄ‚îÄ supabaseDatabaseService.ts ‚Üê Metadata —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ ...
```

**–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç Direct Query Builder:**
- `.from('table').select()`
- `.from('table').insert()`
- `.from('table').update()`
- `.from('table').delete()`

**NO RPC –≤—ã–∑–æ–≤–æ–≤** (–∫—Ä–æ–º–µ –æ–¥–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–ª—É—á–∞—è –≤ `fileCleanupService.ts`).

---

### Tripwire Database Services (–∏—Å–ø–æ–ª—å–∑—É—é—Ç `tripwireAdminSupabase`)

```
backend/src/services/
‚îú‚îÄ‚îÄ tripwireManagerService.ts           ‚Üê üî• –ù–û–í–ê–Ø –í–ï–†–°–ò–Ø (Direct Query Builder)
‚îú‚îÄ‚îÄ tripwireManagerService_RPC_VERSION.ts ‚Üê –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (RPC)
‚îú‚îÄ‚îÄ tripwire/
‚îÇ   ‚îú‚îÄ‚îÄ tripwireService.ts
‚îÇ   ‚îú‚îÄ‚îÄ tripwireDashboardService.ts
‚îÇ   ‚îú‚îÄ‚îÄ tripwireProfileService.ts
‚îÇ   ‚îú‚îÄ‚îÄ ...
```

**–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (`tripwireManagerService.ts`):**
- ‚úÖ –ü–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ –Ω–∞ Direct Query Builder
- ‚úÖ –°–ª–µ–¥—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ Main Database
- ‚úÖ JS –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

---

## üîç –°–†–ê–í–ù–ï–ù–ò–ï –ü–û–î–•–û–î–û–í

### ‚úÖ Main Database: Direct Query Builder (–ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø –°–ï–ô–ß–ê–°)

#### –ü—Ä–∏–º–µ—Ä 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ (`studentService.ts`)

```typescript
// 1. –°–æ–∑–¥–∞—ë–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Supabase Auth
const { data: authData, error: authError } = await supabase.auth.admin.createUser({
  email: data.email,
  password: data.password,
  email_confirm: true,
  user_metadata: { full_name: data.full_name, role: data.role },
});

// 2. –°–æ–∑–¥–∞—ë–º –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ users
const { error: profileError } = await supabase
  .from('users')
  .upsert({
    id: authData.user.id,
    email: data.email,
    full_name: data.full_name,
    role: data.role,
    onboarding_completed: data.role !== 'student',
  }, { onConflict: 'id' });

// 3. –°–æ–∑–¥–∞—ë–º student_profiles (–µ—Å–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç)
if (data.role === 'student') {
  const { error: studentProfileError } = await supabase
    .from('student_profiles')
    .insert({
      id: authData.user.id,
      email: data.email,
      full_name: data.full_name,
      phone: data.phone || null,
      is_active: true,
    });
}

// 4. –ù–∞–∑–Ω–∞—á–∞–µ–º –∫—É—Ä—Å—ã
if (data.course_ids && data.course_ids.length > 0) {
  const courseAssignments = data.course_ids.map(courseId => ({
    user_id: authData.user!.id,
    course_id: courseId,
    is_active: true,
  }));

  const { error: coursesError } = await supabase
    .from('user_courses')
    .insert(courseAssignments);
}
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- 4 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
- –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –ª–æ–≥–∏–∫–∞
- –õ–µ–≥–∫–æ –¥–µ–±–∞–∂–∏—Ç—å
- –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç Schema Cache

---

#### –ü—Ä–∏–º–µ—Ä 2: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞ (`dashboardService.ts`)

```typescript
// 1. –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å
const { data: profile } = await supabase
  .from('profiles')
  .select('full_name, avatar_url, level, xp, current_streak')
  .eq('id', userId)
  .single();

// 2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
const today = new Date().toISOString().split('T')[0];
const { data: todayProgress } = await supabase
  .from('student_progress')
  .select('is_completed, watch_time_seconds, updated_at')
  .eq('user_id', userId)
  .gte('updated_at', `${today}T00:00:00`)
  .lte('updated_at', `${today}T23:59:59`);

// üî• JS –ê–ì–†–ï–ì–ê–¶–ò–Ø
const todayLessonsCompleted = todayProgress?.filter(p => p.is_completed).length || 0;
const todayWatchTime = todayProgress?.reduce((sum, p) => sum + (p.watch_time_seconds || 0), 0) || 0;
const todayXpEarned = todayLessonsCompleted * 50;

// 3. –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –Ω–µ–¥–µ–ª—é
const { data: weekProgress } = await supabase
  .from('student_progress')
  .select('completed_at, watch_time_seconds')
  .eq('user_id', userId)
  .eq('is_completed', true)
  .gte('completed_at', `${sevenDaysAgoStr}T00:00:00`);

// üî• JS –ì–†–£–ü–ü–ò–†–û–í–ö–ê –ø–æ –¥–Ω—è–º
const weekActivity: DashboardActivity[] = [];
for (let i = 6; i >= 0; i--) {
  const date = new Date();
  date.setDate(date.getDate() - i);
  const dateStr = date.toISOString().split('T')[0];
  
  const dayData = weekProgress?.filter(p => p.completed_at?.startsWith(dateStr)) || [];
  const lessonsCompleted = dayData.length;
  const watchTime = dayData.reduce((sum, p) => sum + (p.watch_time_seconds || 0), 0);
  
  weekActivity.push({
    date: dateStr,
    lessons_completed: lessonsCompleted,
    watch_time_minutes: Math.round(watchTime / 60),
    xp_earned: lessonsCompleted * 50,
  });
}
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ü–æ–ª—É—á–∞–µ–º —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –≤ JavaScript
- `Array.filter()`, `Array.reduce()`, —Ü–∏–∫–ª—ã
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ª–æ–≥–∏–∫–æ–π

---

### ‚ùå Tripwire Database: RPC Functions (–°–¢–ê–†–ê–Ø –í–ï–†–°–ò–Ø)

#### –ü—Ä–∏–º–µ—Ä: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ (—Å—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥)

```typescript
// –û–¥–Ω–∞ RPC —Ñ—É–Ω–∫—Ü–∏—è –¥–µ–ª–∞–µ—Ç –≤—Å—ë
const { data, error } = await tripwireAdminSupabase
  .rpc('rpc_create_tripwire_user_full', {
    p_user_id: newUser.user.id,
    p_full_name: full_name,
    p_email: email,
    p_granted_by: currentUserId,
    p_manager_name: currentUserName || currentUserEmail || 'Unknown Manager',
    p_generated_password: userPassword,
    p_welcome_email_sent: false,
  });
```

**–í–Ω—É—Ç—Ä–∏ RPC —Ñ—É–Ω–∫—Ü–∏–∏ (SQL):**
```sql
CREATE OR REPLACE FUNCTION rpc_create_tripwire_user_full(
  p_user_id UUID,
  p_full_name TEXT,
  p_email TEXT,
  p_granted_by UUID,
  p_manager_name TEXT,
  p_generated_password TEXT,
  p_welcome_email_sent BOOLEAN
) RETURNS JSON AS $$
BEGIN
  -- INSERT –≤ tripwire_users
  INSERT INTO tripwire_users (user_id, full_name, email, granted_by, ...)
  VALUES (p_user_id, p_full_name, p_email, p_granted_by, ...);
  
  -- INSERT –≤ sales_activity_log
  INSERT INTO sales_activity_log (manager_id, action_type, student_id, ...)
  VALUES (p_granted_by, 'user_created', p_user_id, ...);
  
  RETURN json_build_object('success', true, 'user_id', p_user_id);
END;
$$ LANGUAGE plpgsql;
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå Schema Cache –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚ùå –ù—É–∂–µ–Ω `NOTIFY pgrst, 'reload schema'` –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚ùå –õ–æ–≥–∏–∫–∞ —Ä–∞–∑–º–∞–∑–∞–Ω–∞ –º–µ–∂–¥—É Backend (TS) –∏ Database (SQL)
- ‚ùå –°–ª–æ–∂–Ω–µ–µ –¥–µ–±–∞–∂–∏—Ç—å (–Ω—É–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å pg_stat_statements)

---

## üîÑ –ù–û–í–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê TRIPWIRE (–ü–û–°–õ–ï –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê)

### –ü—Ä–∏–º–µ—Ä: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ (–Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥)

```typescript
// 1. –°–æ–∑–¥–∞—ë–º –≤ Auth
const { data: newUser, error: authError } = await tripwireAdminSupabase.auth.admin.createUser({
  email: email,
  password: userPassword,
  email_confirm: true,
  user_metadata: {
    granted_by: currentUserId,
    created_by_manager: true,
    full_name: full_name,
    platform: 'tripwire',
  },
});

// 2. üî• DIRECT INSERT –≤ tripwire_users
const { data: tripwireUserData, error: tripwireInsertError } = await tripwireAdminSupabase
  .from('tripwire_users')
  .insert({
    user_id: newUser.user.id,
    full_name: full_name,
    email: email,
    granted_by: currentUserId,
    status: 'active',
    welcome_email_sent: false,
    generated_password: userPassword,
    payment_amount: 0,
  })
  .select()
  .single();

// 3. üî• DIRECT INSERT –≤ sales_activity_log
const { error: logError } = await tripwireAdminSupabase
  .from('sales_activity_log')
  .insert({
    manager_id: currentUserId,
    action_type: 'user_created',
    student_id: newUser.user.id,
    student_name: full_name,
    student_email: email,
    manager_name: currentUserName || currentUserEmail || 'Unknown Manager',
    generated_password: userPassword,
  });

// 4. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º email —á–µ—Ä–µ–∑ emailService...

// 5. üî• DIRECT UPDATE email status
if (emailSent) {
  const { error: updateError } = await tripwireAdminSupabase
    .from('tripwire_users')
    .update({ welcome_email_sent: true })
    .eq('user_id', newUser.user.id);
}
```

**–¢–µ–ø–µ—Ä—å:**
- ‚úÖ –ò–¥–µ–Ω—Ç–∏—á–Ω—ã–π —Å—Ç–∏–ª—å —Å Main Database
- ‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –ª–æ–≥–∏–∫–∞
- ‚úÖ –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç Schema Cache
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

---

## üìä –°–†–ê–í–ù–ò–¢–ï–õ–¨–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Main Database | Tripwire (–°—Ç–∞—Ä–∞—è) | Tripwire (–ù–æ–≤–∞—è) |
|----------|---------------|-------------------|------------------|
| **–ü–æ–¥—Ö–æ–¥** | Direct Query Builder | RPC Functions | Direct Query Builder |
| **–ê–≥—Ä–µ–≥–∞—Ü–∏—è** | JavaScript (Backend) | SQL (Database) | JavaScript (Backend) |
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Schema Cache** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ (–ø—Ä–æ–±–ª–µ–º–∞) | ‚ùå –ù–µ—Ç |
| **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å** | ‚ùå –ù–µ—Ç (–æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã) | ‚úÖ –î–∞ (SQL BEGIN/COMMIT) | ‚ùå –ù–µ—Ç |
| **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ª–æ–≥–∏–∫–∏** | ‚úÖ –í—ã—Å–æ–∫–∞—è | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è (SQL + TS) | ‚úÖ –í—ã—Å–æ–∫–∞—è |
| **–õ–µ–≥–∫–æ—Å—Ç—å –¥–µ–±–∞–≥–∞** | ‚úÖ –õ–µ–≥–∫–æ | ‚ö†Ô∏è –°–ª–æ–∂–Ω–µ–µ | ‚úÖ –õ–µ–≥–∫–æ |
| **–ü–µ—Ä—Ñ–æ–º–∞–Ω—Å (–º–∞–ª—ã–µ –¥–∞–Ω–Ω—ã–µ)** | ‚úÖ –•–æ—Ä–æ—à–∏–π | ‚úÖ –•–æ—Ä–æ—à–∏–π | ‚úÖ –•–æ—Ä–æ—à–∏–π |
| **–ü–µ—Ä—Ñ–æ–º–∞–Ω—Å (–±–æ–ª—å—à–∏–µ –¥–∞–Ω–Ω—ã–µ)** | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–π | ‚úÖ –û—Ç–ª–∏—á–Ω—ã–π | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–π |
| **Network Traffic** | ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π | ‚úÖ –ù–∏–∑–∫–∏–π | ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π |
| **Memory Usage (Backend)** | ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π | ‚úÖ –ù–∏–∑–∫–∏–π | ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π |
| **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã** | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |

---

## üéØ –ü–û–ß–ï–ú–£ –í–´–ë–†–ê–ù DIRECT QUERY BUILDER?

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**
   - Main Database –£–ñ–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Direct Query Builder
   - Tripwire Database —Ç–µ–ø–µ—Ä—å –≤ —Ç–æ–º –∂–µ —Å—Ç–∏–ª–µ
   - –õ–µ–≥—á–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

2. **–ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç PostgREST Schema Cache**
   - –ù–µ –Ω—É–∂–Ω–æ `NOTIFY pgrst, 'reload schema'` –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–π
   - –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
   - –ú–µ–Ω—å—à–µ –º–∞–≥–∏–∏, –±–æ–ª—å—à–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏

3. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏ –¥–µ–±–∞–≥**
   - –í–µ—Å—å –∫–æ–¥ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (TypeScript)
   - –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å `console.log()` –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
   - Stack traces –ø–æ–Ω—è—Ç–Ω—ã–µ

4. **–ì–∏–±–∫–æ—Å—Ç—å**
   - –õ–µ–≥–∫–æ –º–µ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É (–Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å RPC —Ñ—É–Ω–∫—Ü–∏–∏)
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
   - Retry –º–µ—Ö–∞–Ω–∏–∑–º—ã, fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

5. **TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è**
   - `.from('table').select()` —Ç–∏–ø–∏–∑–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ Supabase codegen
   - RPC —Ñ—É–Ω–∫—Ü–∏–∏ —á–∞—Å—Ç–æ —Ç–µ—Ä—è—é—Ç —Ç–∏–ø—ã

---

### ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

1. **–ü–µ—Ä—Ñ–æ–º–∞–Ω—Å –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö**
   - `getSalesLeaderboard()` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –í–°–ï –∑–∞–ø–∏—Å–∏
   - `getTripwireStats()` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –í–°–ï –∑–∞–ø–∏—Å–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
   - –î–ª—è >10,000 —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ

2. **Network Traffic**
   - –ü–µ—Ä–µ–¥–∞–µ–º —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç Database ‚Üí Backend
   - SQL –∞–≥—Ä–µ–≥–∞—Ü–∏—è –±—ã–ª–∞ –±—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ

3. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å**
   - –ù–µ—Ç ACID –≥–∞—Ä–∞–Ω—Ç–∏–π –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
   - –ï—Å–ª–∏ 2–π INSERT —É–ø–∞–¥–µ—Ç, 1–π –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ –±–∞–∑–µ

4. **Memory Usage**
   - –í—Å–µ –∑–∞–ø–∏—Å–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ø–∞–º—è—Ç—å Node.js –ø—Ä–æ—Ü–µ—Å—Å–∞
   - –î–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞

---

## üîß –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò –î–õ–Ø PRODUCTION

### 1. Redis –ö—ç—à –¥–ª—è Leaderboard

```typescript
// –ö—ç—à–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ 10 –º–∏–Ω—É—Ç
const cacheKey = 'sales:leaderboard';
const cached = await redis.get(cacheKey);

if (cached) {
  return JSON.parse(cached);
}

const leaderboard = await getSalesLeaderboard();
await redis.setex(cacheKey, 600, JSON.stringify(leaderboard)); // 10 –º–∏–Ω—É—Ç

return leaderboard;
```

---

### 2. –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

```sql
-- tripwire_users
CREATE INDEX IF NOT EXISTS idx_tripwire_users_granted_by 
  ON tripwire_users(granted_by);
  
CREATE INDEX IF NOT EXISTS idx_tripwire_users_created_at 
  ON tripwire_users(created_at DESC);
  
CREATE INDEX IF NOT EXISTS idx_tripwire_users_status 
  ON tripwire_users(status);

-- sales_activity_log
CREATE INDEX IF NOT EXISTS idx_sales_activity_log_manager_id 
  ON sales_activity_log(manager_id);
  
CREATE INDEX IF NOT EXISTS idx_sales_activity_log_created_at 
  ON sales_activity_log(created_at DESC);
```

---

### 3. Limit –¥–ª—è –±–æ–ª—å—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

```typescript
// –¢–æ–ø 100 –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –≤–º–µ—Å—Ç–æ –≤—Å–µ—Ö
const { data: students } = await tripwireAdminSupabase
  .from('tripwire_users')
  .select('granted_by, status, payment_amount')
  .order('created_at', { ascending: false })
  .limit(10000); // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ
```

---

### 4. –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ Views (–¥–ª—è –±—É–¥—É—â–µ–≥–æ)

```sql
-- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —á–∞—Å)
CREATE MATERIALIZED VIEW manager_stats_hourly AS
SELECT 
  granted_by as manager_id,
  COUNT(*) as total_students,
  COUNT(*) FILTER (WHERE status = 'active') as active_students,
  SUM(payment_amount) as total_revenue,
  DATE_TRUNC('hour', NOW()) as computed_at
FROM tripwire_users
GROUP BY granted_by;

-- Refresh –∫–∞–∂–¥—ã–π —á–∞—Å —á–µ—Ä–µ–∑ cron job
REFRESH MATERIALIZED VIEW manager_stats_hourly;
```

---

## üöÄ DEPLOYMENT STRATEGY

### Phase 1: Testing (–¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø)
1. ‚úÖ –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω (Direct Query Builder)
2. ‚ö†Ô∏è TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
3. ‚ö†Ô∏è –õ–∏–Ω—Ç–µ—Ä —á–∏—Å—Ç
4. ‚ùå –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (TODO)
5. ‚ùå Performance —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (TODO)

---

### Phase 2: Staging Deployment
1. Deploy –Ω–∞ staging server
2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ production-like –æ–∫—Ä—É–∂–µ–Ω–∏–∏
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ Foreign Keys
4. Load testing —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

---

### Phase 3: Production Deployment
1. –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
2. Deploy –Ω–∞ production
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ (response time, error rate)
4. Rollback –ø–ª–∞–Ω (–æ—Ç–∫–∞—Ç –Ω–∞ RPC –≤–µ—Ä—Å–∏—é –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫)

---

## üìù –í–´–í–û–î–´

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

1. **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ:** Tripwire Database —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—É –∂–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —á—Ç–æ –∏ Main Database
2. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å:** –í–µ—Å—å –∫–æ–¥ –≤ TypeScript, –ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å
3. **–ù–µ—Ç Schema Cache –ø—Ä–æ–±–ª–µ–º:** –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–π
4. **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** TypeScript —Ç–∏–ø—ã –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

1. **–ü–µ—Ä—Ñ–æ–º–∞–Ω—Å:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å `getSalesLeaderboard()` –∏ `getTripwireStats()` –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å compensating transactions –∏–ª–∏ SQL —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å Redis –¥–ª—è leaderboard –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
4. **–ò–Ω–¥–µ–∫—Å—ã:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã

---

### üéØ Next Steps

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Database —Å—Ö–µ–º—É (Foreign Keys, Indexes, RLS)
2. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ UI
3. ‚úÖ –ó–∞–º–µ—Ä–∏—Ç—å response time –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö endpoints
4. ‚úÖ Deploy –Ω–∞ staging
5. ‚úÖ Deploy –Ω–∞ production

---

## üìö –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**Main Database –∏ Tripwire Database —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –û–î–ò–ù–ê–ö–û–í–£–Æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:**
- Direct Query Builder –≤–º–µ—Å—Ç–æ RPC
- JavaScript –∞–≥—Ä–µ–≥–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ SQL GROUP BY
- –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –∏ –ø–æ–Ω—è—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –∫–æ–¥

**–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è:**
- Small to Medium scale (<10,000 —Å—Ç—É–¥–µ–Ω—Ç–æ–≤)
- –ë—ã—Å—Ç—Ä–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –õ–µ–≥–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –¥–µ–±–∞–≥

**–î–ª—è Enterprise scale (>100,000 —Å—Ç—É–¥–µ–Ω—Ç–æ–≤) —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å:**
- –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ Views
- Redis –∫—ç—à
- –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (RPC –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, Direct –¥–ª—è CRUD)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞, –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é  
**–†–∏—Å–∫–∏:** ‚ö†Ô∏è –ü–µ—Ä—Ñ–æ–º–∞–Ω—Å –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö (—Ä–µ—à–∞–µ—Ç—Å—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏)  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ–ø–ª–æ—é:** ‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ





























