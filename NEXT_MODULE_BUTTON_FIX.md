# üîß FIX: –ö–Ω–æ–ø–∫–∞ "–°–õ–ï–î–£–Æ–©–ò–ô –ú–û–î–£–õ–¨" - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π Mapping

## üêõ –ü—Ä–æ–±–ª–µ–º–∞:
–ö–Ω–æ–ø–∫–∞ "–°–õ–ï–î–£–Æ–©–ò–ô –ú–û–î–£–õ–¨" —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏–ª–∞ –Ω–∞ **–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π lesson ID**:
- –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ Module 16 (Lesson 67) ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–ª—Å—è `lesson/17` ‚ùå
- –î–æ–ª–∂–µ–Ω –±—ã–ª –æ—Ç–∫—Ä—ã—Ç—å—Å—è ‚Üí `lesson/68` (Module 17) ‚úÖ

---

## üîç –ü—Ä–∏—á–∏–Ω–∞:
```typescript
// ‚ùå –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID):
{isCompleted && hasNextLesson && (
  <button onClick={() => navigate(`/tripwire/lesson/${nextLessonId}`)}>
    –°–õ–ï–î–£–Æ–©–ò–ô –ú–û–î–£–õ–¨
  </button>
)}
```

**–ü—Ä–æ–±–ª–µ–º–∞**: `nextLessonId` ‚Äî —ç—Ç–æ ID —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–∫–∞ **–≤–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—è**, –∞ –Ω–µ **–ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–∫–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –º–æ–¥—É–ª—è**.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### 1. –ò—Å–ø—Ä–∞–≤–∏–ª mapping –≤ `TripwireLesson.tsx`:

```typescript
// ‚úÖ –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π mapping):
{isCompleted && moduleId && moduleId < 18 && (
  <button onClick={() => {
    // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–´–ô MAPPING: Module ‚Üí Lesson
    const nextModuleFirstLesson = 
      moduleId === 16 ? 68 :  // Module 16 ‚Üí Lesson 68 (Module 17)
      moduleId === 17 ? 69 :  // Module 17 ‚Üí Lesson 69 (Module 18)
      null;
    
    if (nextModuleFirstLesson) {
      navigate(`/tripwire/lesson/${nextModuleFirstLesson}`);
    }
  }}>
    –°–õ–ï–î–£–Æ–©–ò–ô –ú–û–î–£–õ–¨
  </button>
)}
```

---

## üìä –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

| –¢–µ–∫—É—â–∏–π –º–æ–¥—É–ª—å | –¢–µ–∫—É—â–∏–π —É—Ä–æ–∫ | –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –Ω–∞ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------------|--------------|---------------------|-----------|
| **Module 16**  | Lesson 67    | ‚Üí Lesson **68**     | Module 17 ‚úÖ |
| **Module 17**  | Lesson 68    | ‚Üí Lesson **69**     | Module 18 ‚úÖ |
| **Module 18**  | Lesson 69    | ‚Üí **–ù–ï–¢ –ö–ù–û–ü–ö–ò**    | –ü–æ—Å–ª–µ–¥–Ω–∏–π –º–æ–¥—É–ª—å |

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

### 2. –û—Ç–∫–∞—Ç–∏–ª –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –ë–î:
```sql
DELETE FROM student_progress WHERE user_id = '23408904-cb2f-4b11-92a6-f435fb7c3905';
DELETE FROM tripwire_progress WHERE tripwire_user_id = '23408904-cb2f-4b11-92a6-f435fb7c3905';
DELETE FROM module_unlocks WHERE user_id = '23408904-cb2f-4b11-92a6-f435fb7c3905' AND module_id > 16;
DELETE FROM user_achievements WHERE user_id = '23408904-cb2f-4b11-92a6-f435fb7c3905';
```

### 3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞–ª frontend:
```bash
# –û—á–∏—Å—Ç–∏–ª –≤—Å–µ –∫—ç—à–∏ Vite
rm -rf dist .vite node_modules/.vite

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª dev server
npm run dev
```

---

## üéØ –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

### Step 1: Module 16 ‚Üí Module 17
1. –û—Ç–∫—Ä–æ–π `http://localhost:8080/tripwire/lesson/67`
2. –ü–µ—Ä–µ–º–æ—Ç–∞–π –≤–∏–¥–µ–æ >80%
3. –ù–∞–∂–º–∏ **"–ó–ê–í–ï–†–®–ò–¢–¨ –£–†–û–ö"**
4. –ü—Ä–æ–≤–µ—Ä—å:
   - ‚úÖ Confetti
   - ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/tripwire` (–≥–ª–∞–≤–Ω–∞—è)
   - ‚úÖ –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è Module 17
5. –û—Ç–∫—Ä–æ–π Module 17 —Å –≥–ª–∞–≤–Ω–æ–π
6. –ü—Ä–æ–≤–µ—Ä—å URL: `http://localhost:8080/tripwire/lesson/68` ‚úÖ

### Step 2: Module 17 ‚Üí Module 18
1. –ü–µ—Ä–µ–º–æ—Ç–∞–π –≤–∏–¥–µ–æ >80%
2. –ù–∞–∂–º–∏ **"–ó–ê–í–ï–†–®–ò–¢–¨ –£–†–û–ö"**
3. –ù–∞–∂–º–∏ **"–°–õ–ï–î–£–Æ–©–ò–ô –ú–û–î–£–õ–¨"**
4. –ü—Ä–æ–≤–µ—Ä—å URL: `http://localhost:8080/tripwire/lesson/69` ‚úÖ

### Step 3: Module 18 (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π)
1. –ü–µ—Ä–µ–º–æ—Ç–∞–π –≤–∏–¥–µ–æ >80%
2. –ù–∞–∂–º–∏ **"–ó–ê–í–ï–†–®–ò–¢–¨ –£–†–û–ö"**
3. –ü—Ä–æ–≤–µ—Ä—å: **–ù–ï–¢ –∫–Ω–æ–ø–∫–∏ "–°–õ–ï–î–£–Æ–©–ò–ô –ú–û–î–£–õ–¨"** (–ø–æ—Å–ª–µ–¥–Ω–∏–π –º–æ–¥—É–ª—å) ‚úÖ

---

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

### `/Users/miso/onai-integrator-login/src/pages/tripwire/TripwireLesson.tsx`
- **–°—Ç—Ä–æ–∫–∏ 770-791**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–∫–∏ "–°–õ–ï–î–£–Æ–©–ò–ô –ú–û–î–£–õ–¨"
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ**: –ó–∞–º–µ–Ω–∏–ª `hasNextLesson` –Ω–∞ `moduleId < 18`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏–ª —è–≤–Ω—ã–π mapping `moduleId ‚Üí nextModuleFirstLesson`

---

## ‚úÖ –°—Ç–∞—Ç—É—Å:
- [x] –ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- [x] –ë–î –æ—Ç–∫–∞—á–µ–Ω–∞
- [x] Frontend –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω
- [ ] **–û–ñ–ò–î–ê–ï–¢ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø** üîÑ

---

## üö® –í–∞–∂–Ω–æ:
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ frontend, **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** —Å–¥–µ–ª–∞–π **Hard Reload** –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- **Mac**: `Cmd + Shift + R`
- **PC**: `Ctrl + Shift + R`

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä –∑–∞–≥—Ä—É–∑–∏—Ç **–Ω–æ–≤—ã–π** JS bundle –±–µ–∑ –∫—ç—à–∞.

---

## üéâ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ñ–∏–∫—Å–∞ –∫–Ω–æ–ø–∫–∞ "–°–õ–ï–î–£–Æ–©–ò–ô –ú–û–î–£–õ–¨" –±—É–¥–µ—Ç **—Ç–æ—á–Ω–æ** –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ lesson ID:
- Module 16 ‚Üí **Lesson 68** ‚úÖ
- Module 17 ‚Üí **Lesson 69** ‚úÖ
- Module 18 ‚Üí **–ù–µ—Ç –∫–Ω–æ–ø–∫–∏** ‚úÖ

