# ü§ñ –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã Telegram –±–æ—Ç–æ–≤

## –ü—Ä–æ–±–ª–µ–º–∞ (–±—ã–ª–∞)

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –ò localhost, –∏ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ **–û–î–ò–ù –ò –¢–û–¢ –ñ–ï –±–æ—Ç** `@onaimentor_bot`, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç 409:

```
error: [polling_error] {"code":"ETELEGRAM","message":"ETELEGRAM: 409 Conflict: terminated by other getUpdates request; make sure that only one bot instance is running"}
```

## –†–µ—à–µ–Ω–∏–µ (—Å–µ–π—á–∞—Å)

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –±–æ—Ç–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ `NODE_ENV`:

| –û–∫—Ä—É–∂–µ–Ω–∏–µ | NODE_ENV | –ë–æ—Ç | –¢–æ–∫–µ–Ω |
|-----------|----------|-----|-------|
| **Localhost** | `development` | `@onainastavnik_bot` (—Ç–µ—Å—Ç–æ–≤—ã–π) | `TELEGRAM_MENTOR_BOT_TOKEN_TEST` |
| **Production** | `production` | `@onaimentor_bot` (–ø—Ä–æ–¥–∞–∫—à–Ω) | `TELEGRAM_MENTOR_BOT_TOKEN` |

## –ö–æ–¥ (backend/src/routes/telegram.ts)

```typescript
// üîÑ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ï –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –ë–û–¢–û–í –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è
const isProduction = process.env.NODE_ENV === 'production';

// Localhost ‚Üí @onainastavnik_bot (—Ç–µ—Å—Ç–æ–≤—ã–π)
// Production ‚Üí @onaimentor_bot (–ø—Ä–æ–¥–∞–∫—à–Ω)
const TELEGRAM_BOT_TOKEN = isProduction 
  ? process.env.TELEGRAM_MENTOR_BOT_TOKEN || ''
  : process.env.TELEGRAM_MENTOR_BOT_TOKEN_TEST || '';

const BOT_USERNAME = isProduction ? '@onaimentor_bot' : '@onainastavnik_bot';
```

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π Telegram, –Ω–∞–π–¥–∏ **@BotFather**
2. –û—Ç–ø—Ä–∞–≤—å –∫–æ–º–∞–Ω–¥—É `/mybots`
3. –í—ã–±–µ—Ä–∏ –±–æ—Ç–∞ **AI –ù–∞—Å—Ç–∞–≤–Ω–∏–∫ –¢–µ—Å—Ç** (`@onainastavnik_bot`)
4. –ù–∞–∂–º–∏ **API Token**
5. –°–∫–æ–ø–∏—Ä—É–π —Ç–æ–∫–µ–Ω (—Ñ–æ—Ä–º–∞—Ç: `1234567890:AABBccDDeeFFggHHiiJJkkLLmmNNooP`)

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ .env

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `backend/.env` –∏ –∑–∞–º–µ–Ω–∏ —Å—Ç—Ä–æ–∫—É:

```bash
TELEGRAM_MENTOR_BOT_TOKEN_TEST=–ù–£–ñ–ï–ù_–¢–û–ö–ï–ù_–û–¢_BOTFATHER
```

–ù–∞:

```bash
TELEGRAM_MENTOR_BOT_TOKEN_TEST=–í–ê–®_–ù–ê–°–¢–û–Ø–©–ò–ô_–¢–û–ö–ï–ù_–¢–ï–°–¢–û–í–û–ì–û_–ë–û–¢–ê
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏ —Ç–µ–∫—É—â–∏–π backend (Ctrl+C)
# –ó–∞–ø—É—Å—Ç–∏ –∑–∞–Ω–æ–≤–æ
cd backend && npm run dev
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:

```bash
ü§ñ –í—ã–±—Ä–∞–Ω –¢–ï–°–¢–û–í–´–ô –±–æ—Ç: @onainastavnik_bot
   Environment: development
   Token: 1234567890...
ü§ñ Telegram bot started in POLLING mode (localhost)
   Bot username: @onainastavnik_bot
```

‚úÖ **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏—Å—á–µ–∑–Ω–µ—Ç!** –ë–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –æ—à–∏–±–æ–∫ 409.

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### –ù–∞ localhost (development):
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `@onainastavnik_bot` (—Ç–µ—Å—Ç–æ–≤—ã–π)
- ‚úÖ –†–µ–∂–∏–º: Polling (–±–æ—Ç —Å–∞–º –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç Telegram)
- ‚úÖ –ù–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å production

### –ù–∞ production (DigitalOcean):
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `@onaimentor_bot` (–ø—Ä–æ–¥–∞–∫—à–Ω)
- ‚úÖ –†–µ–∂–∏–º: Webhook (Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä)
- ‚úÖ –ù–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å localhost

## üìä –í–ª–∏—è–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

### ‚ùå –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- Backend –Ω–∞ localhost –ù–ï –ø–æ–ª—É—á–∞–ª —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç Telegram (–∫–æ–Ω—Ñ–ª–∏–∫—Ç)
- Backend –Ω–∞ production –ù–ï –ø–æ–ª—É—á–∞–ª —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç Telegram (–∫–æ–Ω—Ñ–ª–∏–∫—Ç)
- API —Ä–∞–±–æ—Ç–∞–ª–æ, –Ω–æ Telegram –±–æ—Ç –±—ã–ª **–Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω**

### ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- Backend –Ω–∞ localhost —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–µ—Å—Ç–æ–≤—ã–º –±–æ—Ç–æ–º
- Backend –Ω–∞ production —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ–¥–∞–∫—à–Ω –±–æ—Ç–æ–º
- –û–±–∞ –±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç **–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ** –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ production

–ü—Ä–∏ –¥–µ–ø–ª–æ–µ –ù–ï –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–æ–¥ - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ `NODE_ENV`:

1. Git push: `git push origin main`
2. –î–µ–ø–ª–æ–π: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ `@onaimentor_bot`
3. –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω:** 2025-11-29  
**–ê–≤—Ç–æ—Ä:** AI Assistant

