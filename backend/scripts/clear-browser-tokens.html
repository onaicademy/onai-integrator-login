<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üîÑ Clear Tokens & Reload</title>
  <style>
    body {
      margin: 0;
      padding: 40px;
      background: #0A0A0A;
      color: #00FF94;
      font-family: 'Monaco', 'Courier New', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .container {
      text-align: center;
      max-width: 600px;
    }
    h1 {
      font-size: 32px;
      margin-bottom: 20px;
    }
    .status {
      background: #1F1F1F;
      border: 1px solid #00FF94;
      border-radius: 12px;
      padding: 30px;
      margin: 20px 0;
    }
    .log {
      text-align: left;
      font-size: 14px;
      line-height: 1.8;
      margin: 10px 0;
    }
    button {
      background: #00FF94;
      color: #000;
      border: none;
      padding: 15px 40px;
      font-size: 18px;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover {
      background: #00CC77;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîÑ CLEAR TOKENS</h1>
    <div class="status">
      <div id="log" class="log"></div>
    </div>
    <button onclick="clearAndReload()">üöÄ –û–ß–ò–°–¢–ò–¢–¨ –ò –ü–ï–†–ï–ó–ê–ì–†–£–ó–ò–¢–¨</button>
  </div>

  <script>
    function log(message) {
      const logEl = document.getElementById('log');
      logEl.innerHTML += message + '<br>';
    }

    function clearAndReload() {
      log('üóëÔ∏è  –û—á–∏—Å—Ç–∫–∞ localStorage...');
      
      // –£–¥–∞–ª—è–µ–º –≤—Å–µ Tripwire —Ç–æ–∫–µ–Ω—ã
      const keysToRemove = [];
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key && (
          key.includes('tripwire') || 
          key.includes('sb-') ||
          key.includes('supabase')
        )) {
          keysToRemove.push(key);
        }
      }
      
      log(`üì¶ –ù–∞–π–¥–µ–Ω–æ –∫–ª—é—á–µ–π: ${keysToRemove.length}`);
      keysToRemove.forEach(key => {
        log(`   üîë –£–¥–∞–ª—è—é: ${key}`);
        localStorage.removeItem(key);
      });
      
      log('‚úÖ localStorage –æ—á–∏—â–µ–Ω!');
      log('üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã...');
      
      setTimeout(() => {
        window.location.href = 'http://localhost:8080/integrator/login';
      }, 2000);
    }

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–µ —Ç–æ–∫–µ–Ω—ã
    window.onload = () => {
      log('üì¶ –¢–µ–∫—É—â–∏–µ —Ç–æ–∫–µ–Ω—ã –≤ localStorage:');
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key && (key.includes('tripwire') || key.includes('sb-'))) {
          log(`   üîë ${key}`);
        }
      }
      log('');
      log('üëÜ –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É —á—Ç–æ–±—ã –æ—á–∏—Å—Ç–∏—Ç—å');
    };
  </script>
</body>
</html>
