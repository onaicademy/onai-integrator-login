# ๐ TODO: ะะฑัะฐะทะพะฒะฐัะตะปัะฝะฐั ะฟะปะฐััะพัะผะฐ - ะะพัะฐะณะพะฒัะน ะฟะปะฐะฝ

**ะะฐัะฐ:** 15 ะฝะพัะฑัั 2025  
**ะกัะฐััั:** ะ ัะฐะฑะพัะต

---

## ๐ฏ ะญะขะะ 1: ะะะะ ะะะะะซะฅ (ะะะะะะะขะะข!)

### โ ะจะะ 1.1: ะัะพะฒะตัะบะฐ ััััะบัััั ะะ
**ะคะฐะนะป:** Supabase SQL Editor  
**ะะพะผะฐะฝะดะฐ:**
```sql
SELECT column_name, data_type 
FROM information_schema.columns 
WHERE table_schema = 'public' AND table_name = 'courses'
ORDER BY ordinal_position;
```

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
- `id` = INTEGER โ
- `name` = text โ
- `slug` = text โ
- `order_index` = integer โ
- ... ะพััะฐะปัะฝัะต ะฟะพะปั

**ะกัะฐััั:** โณ ะัะถะฝะพ ะฟัะพะฒะตัะธัั

---

### โ ะจะะ 1.2: ะกะพะทะดะฐะฝะธะต ัะตััะพะฒะพะณะพ ะบัััะฐ
**ะคะฐะนะป:** `TEST_DATA_FIXED.sql`  
**ะะตะนััะฒะธะต:** ะะฐะฟัััะธัั ะฒ Supabase SQL Editor

**ะงัะพ ัะพะทะดะฐัั:**
- 1 ะบััั "ะัะฝะพะฒั Python"
- 2 ะผะพะดัะปั
- 4 ััะพะบะฐ (3 ะฒะธะดะตะพ + 1 ัะตะบััะพะฒัะน + 1 ัะตัั)
- 1 ะฒะธะดะตะพ-ะบะพะฝัะตะฝั ะดะปั ััะพะบะฐ 1
- 1 ัะฐะทะดะฐัะพัะฝัะน ะผะฐัะตัะธะฐะป

**ะะฐะบ ะทะฐะฟัััะธัั:**
1. ะัะบัะพะน Supabase Dashboard โ SQL Editor
2. ะกะบะพะฟะธััะน **ะะะกะฌ** ะบะพะด ะธะท `TEST_DATA_FIXED.sql`
3. ะััะฐะฒั ะฒ SQL Editor
4. ะะฐะถะผะธ **RUN** โถ๏ธ

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
```
โ ะกะพะทะดะฐะฝ ะบััั ั ID: 1
โ ะกะพะทะดะฐะฝ ะผะพะดัะปั 1 ั ID: ...
โ ะกะพะทะดะฐะฝ ะผะพะดัะปั 2 ั ID: ...
โ ะกะพะทะดะฐะฝ ััะพะบ 1 (preview) ั ID: ...
โ ะกะพะทะดะฐะฝ ััะพะบ 2 ั ID: ...
โ ะกะพะทะดะฐะฝ ััะพะบ 3 (ัะตะบััะพะฒัะน) ั ID: ...
โ ะกะพะทะดะฐะฝ ััะพะบ 4 (ัะตัั) ั ID: ...
โ ะะพะฑะฐะฒะปะตะฝะพ ะฒะธะดะตะพ ะดะปั ััะพะบะฐ 1
โ ะะพะฑะฐะฒะปะตะฝ ัะฐะทะดะฐัะพัะฝัะน ะผะฐัะตัะธะฐะป ะดะปั ััะพะบะฐ 2

ะัะพะณะพ: 1 ะบััั, 2 ะผะพะดัะปั, 4 ััะพะบะฐ
```

**ะกัะฐััั:** โณ ะะดัะผ ะฒัะฟะพะปะฝะตะฝะธั

---

### โ ะจะะ 1.3: ะกะพะทะดะฐะฝะธะต ัะฐะฑะปะธั ะฐะฝะฐะปะธัะธะบะธ
**ะคะฐะนะป:** `20251115_video_analytics_and_mentor.sql`  
**ะะตะนััะฒะธะต:** ะะฐะฟัััะธัั ะฒ Supabase SQL Editor

**ะงัะพ ัะพะทะดะฐัั:**
- `video_segments_analytics` - ะะพัะตะณะผะตะฝัะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ (ะบะฐะถะดัะต 10 ัะตะบ)
- `student_learning_metrics` - ะะตััะธะบะธ ะพะฑััะตะฝะธั ัััะดะตะฝัะฐ
- `course_health_metrics` - ะะดะพัะพะฒัะต ะบัััะฐ
- `mentor_motivation_log` - ะะพะณ ะผะพัะธะฒะฐัะธะพะฝะฝัั ัะพะพะฑัะตะฝะธะน
- ะคัะฝะบัะธั `analyze_student_status()` - ะะฝะฐะปะธะท ััะฐัััะฐ ัััะดะตะฝัะฐ

**ะะฐะบ ะทะฐะฟัััะธัั:**
1. ะัะบัะพะน Supabase Dashboard โ SQL Editor
2. ะกะบะพะฟะธััะน **ะะะกะฌ** ะบะพะด ะธะท `20251115_video_analytics_and_mentor.sql`
3. ะััะฐะฒั ะฒ SQL Editor
4. ะะฐะถะผะธ **RUN** โถ๏ธ

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
```
Success! No rows returned
```

**ะกัะฐััั:** โณ ะะดัะผ ะฒัะฟะพะปะฝะตะฝะธั ะฟะพัะปะต ะจะฐะณะฐ 1.2

---

### โ ะจะะ 1.4: ะัะพะฒะตัะบะฐ ััะพ ะฒัั ัะพะทะดะฐะปะพัั
**ะคะฐะนะป:** Supabase SQL Editor  
**ะะพะผะฐะฝะดะฐ:**
```sql
-- ะัะพะฒะตัะบะฐ ะฝะพะฒัั ัะฐะฑะปะธั
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public' 
AND table_name IN ('video_segments_analytics', 'student_learning_metrics', 'course_health_metrics', 'mentor_motivation_log')
ORDER BY table_name;
```

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
```
course_health_metrics
mentor_motivation_log
student_learning_metrics
video_segments_analytics
```

**ะกัะฐััั:** โณ ะะพัะปะต ะจะฐะณะฐ 1.3

---

## ๐ฏ ะญะขะะ 2: AI-ะะะะขะะ (ะะะกะะ ะญะขะะะ 1)

### โ ะจะะ 2.1: ะัะฟัะฐะฒะธัั ัะธััะตะผั AI-ะะตะฝัะพัะฐ
**ะะทะผะตะฝะตะฝะธะต:** ะฃะฑัะฐัั ะบะฝะพะฟะบะธ ะธะท Telegram, ะพััะฐะฒะธัั ัะพะปัะบะพ ัััะปะบั ะฝะฐ ะฟะปะฐััะพัะผั

**ะะพะฒะฐั ะปะพะณะธะบะฐ:**
```
AI-ะะตะฝัะพั ะพัะฟัะฐะฒะปัะตั ะฒ Telegram:
1. ะะพัะธะฒะฐัะธะพะฝะฝะพะต ัะพะพะฑัะตะฝะธะต
2. ะกัะฐัะธััะธะบั (ััะพะบะธ, ะฒัะตะผั ะฟัะพัะผะพััะฐ)
3. ะกััะปะบะฐ ะฝะฐ ะฟะปะฐััะพัะผั: "ะัะพะดะพะปะถะธัั ะพะฑััะตะฝะธะต ๐"
4. ะ ะบะพะฝัะต: "ะะพะฟัะพัั? โ ะะฐะดะฐะน ะธั ะฝะฐ ะฟะปะฐััะพัะผะต ะฒ ัะฐัะต ั AI-ะััะฐัะพัะพะผ"

ะะะข ะบะฝะพะฟะพะบ ะฒ Telegram!
ะะพะฟัะพัั ัััะดะตะฝัั ะทะฐะดะฐัั ะฝะฐ ะะะะขะคะะะะ, ะฝะต ะฒ ะฑะพัะต!
```

**ะคะฐะนะป ะดะปั ะพะฑะฝะพะฒะปะตะฝะธั:** `AI_MENTOR_MOTIVATION_SYSTEM.md`

**ะกัะฐััั:** โณ ะะดัะผ ะฟะพัะปะต ะญัะฐะฟะฐ 1

---

### โ ะจะะ 2.2: ะกะพะทะดะฐัั Backend API ะดะปั AI-ะะตะฝัะพัะฐ
**ะคะฐะนะปั ะดะปั ัะพะทะดะฐะฝะธั:**
- `backend/src/controllers/mentorController.ts`
- `backend/src/services/mentorService.ts`
- `backend/src/routes/mentor.ts`

**Endpoints:**
- `POST /api/mentor/analyze-all` - ะะฝะฐะปะธะท ะฒัะตั ัััะดะตะฝัะพะฒ (CRON)
- `GET /api/mentor/analyze/:userId` - ะะฝะฐะปะธะท ะบะพะฝะบัะตัะฝะพะณะพ ัััะดะตะฝัะฐ
- `POST /api/mentor/send-motivation` - ะัะฟัะฐะฒะบะฐ ะผะพัะธะฒะฐัะธะธ
- `GET /api/mentor/history/:userId` - ะััะพัะธั ะผะพัะธะฒะฐัะธะพะฝะฝัั ัะพะพะฑัะตะฝะธะน

**ะกัะฐััั:** โณ ะะพัะปะต ะจะฐะณะฐ 2.1

---

### โ ะจะะ 2.3: ะะฐัััะพะธัั Telegram ะฑะพัะฐ (ัะพะปัะบะพ ะพัะฟัะฐะฒะบะฐ)
**ะคะฐะนะป:** `backend/src/services/telegramMentorService.ts`

**ะคัะฝะบัะธะพะฝะฐะป:**
- ะัะฟัะฐะฒะบะฐ ะผะพัะธะฒะฐัะธะพะฝะฝัั ัะพะพะฑัะตะฝะธะน
- ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ั ัะผะพะดะทะธ
- ะะพะฑะฐะฒะปะตะฝะธะต ัััะปะบะธ ะฝะฐ ะฟะปะฐััะพัะผั

**ะะะข ะพะฑัะฐะฑะพัะบะธ ะบะฝะพะฟะพะบ!**

**ะกัะฐััั:** โณ ะะพัะปะต ะจะฐะณะฐ 2.2

---

### โ ะจะะ 2.4: ะะฐัััะพะธัั CRON ะทะฐะดะฐัั
**ะกะฟะพัะพะฑ:** Supabase pg_cron

**ะะฐัะฟะธัะฐะฝะธะต:** ะะฐะถะดัะต 3 ะดะฝั ะฒ 8:00 ัััะฐ (UTC+6 ะะปะผะฐัั)

**SQL ะบะพะผะฐะฝะดะฐ:**
```sql
SELECT cron.schedule(
  'mentor-motivation-3days',
  '0 2 */3 * *', -- 02:00 UTC = 08:00 ะะปะผะฐัั
  $$ /* ะัะทะพะฒ API */ $$
);
```

**ะกัะฐััั:** โณ ะะพัะปะต ะจะฐะณะฐ 2.3

---

## ๐ฏ ะญะขะะ 3: ะะะะะ-ะะะะะะขะะะ (ะะะกะะ ะญะขะะะ 2)

### โ ะจะะ 3.1: Backend API ะดะปั ััะตะบะธะฝะณะฐ ะฒะธะดะตะพ
**ะคะฐะนะปั:**
- `backend/src/controllers/videoAnalyticsController.ts`
- `backend/src/services/videoAnalyticsService.ts`
- `backend/src/routes/videoAnalytics.ts`

**Endpoints:**
- `POST /api/videos/progress` - ะะฑะฝะพะฒะปะตะฝะธะต ะฟัะพะณัะตััะฐ
- `POST /api/videos/events` - ะขัะตะบะธะฝะณ ัะพะฑััะธะน (play, pause, seek)
- `GET /api/analytics/student/:userId/course/:courseId` - ะะฝะฐะปะธัะธะบะฐ ัััะดะตะฝัะฐ
- `GET /api/analytics/course/:courseId` - ะะฝะฐะปะธัะธะบะฐ ะบัััะฐ
- `GET /api/analytics/video/:videoId/heatmap` - ะขะตะฟะปะพะฒะฐั ะบะฐััะฐ

**ะกัะฐััั:** โณ ะะพัะปะต ะญัะฐะฟะฐ 2

---

### โ ะจะะ 3.2: Frontend - ะขัะตะบะธะฝะณ ัะพะฑััะธะน ะฒะธะดะตะพ
**ะะพะผะฟะพะฝะตะฝั:** `src/components/courses/VideoPlayer.tsx`

**ะขัะตะบะธะฝะณ:**
- `play` - ะะฐัะฐะปะพ ะฒะพัะฟัะพะธะทะฒะตะดะตะฝะธั
- `pause` - ะะฐัะทะฐ
- `seek` - ะะตัะตะผะพัะบะฐ
- `complete` - ะะฐะฒะตััะตะฝะธะต ะฟัะพัะผะพััะฐ
- `skip` - ะัะพะฟััะบ ัะตะณะผะตะฝัะฐ

**ะัะฟัะฐะฒะบะฐ:** ะะฐ Backend API ะบะฐะถะดัะต 10 ัะตะบัะฝะด + ะฟัะธ ัะพะฑััะธัั

**ะกัะฐััั:** โณ ะะพัะปะต ะจะฐะณะฐ 3.1

---

### โ ะจะะ 3.3: ะะฐัะฑะพัะด ะฐะฝะฐะปะธัะธะบะธ ะดะปั ะฐะดะผะธะฝะฐ
**ะกััะฐะฝะธัะฐ:** `/admin/analytics`

**ะะพะบะฐะทัะฒะฐะตั:**
- ะะฑัะฐั ััะฐัะธััะธะบะฐ ะบัััะพะฒ
- ะขะพะฟ ะฟัะพะฑะปะตะผะฝัั ะฒะธะดะตะพ (ะฒััะพะบะธะน drop-off)
- ะขะตะฟะปะพะฒะฐั ะบะฐััะฐ ะบัััะฐ
- ะกะฟะธัะบะธ ัััะดะตะฝัะพะฒ ะฒ ัะธัะบะต (churn_risk > 0.7)

**ะกัะฐััั:** โณ ะะพัะปะต ะจะฐะณะฐ 3.2

---

## ๐ ะขะะะฃะฉะะ ะะะะะะะกะก

```
ะญะขะะ 1: ะะฐะทะฐ ะดะฐะฝะฝัั [0/4] โณ
โโ 1.1 ะัะพะฒะตัะบะฐ ััััะบัััั ะะ โณ
โโ 1.2 ะกะพะทะดะฐะฝะธะต ัะตััะพะฒะพะณะพ ะบัััะฐ โณ
โโ 1.3 ะกะพะทะดะฐะฝะธะต ัะฐะฑะปะธั ะฐะฝะฐะปะธัะธะบะธ โณ
โโ 1.4 ะัะพะฒะตัะบะฐ ัะฐะฑะปะธั โณ

ะญะขะะ 2: AI-ะะตะฝัะพั [0/4] ๐ (ะทะฐะฑะปะพะบะธัะพะฒะฐะฝ)
โโ 2.1 ะัะฟัะฐะฒะธัั ัะธััะตะผั โณ
โโ 2.2 Backend API โณ
โโ 2.3 Telegram ะฑะพั โณ
โโ 2.4 CRON ะทะฐะดะฐัะฐ โณ

ะญะขะะ 3: ะะธะดะตะพ-ะฐะฝะฐะปะธัะธะบะฐ [0/3] ๐ (ะทะฐะฑะปะพะบะธัะพะฒะฐะฝ)
โโ 3.1 Backend API โณ
โโ 3.2 Frontend ััะตะบะธะฝะณ โณ
โโ 3.3 ะะฐัะฑะพัะด ะฐะฝะฐะปะธัะธะบะธ โณ
```

---

## ๐ ะกะะะะฃะฎะฉะะ ะจะะ ะะะฏะะ ะกะะะงะะก:

### **ะจะะ 1.2: ะะฐะฟัััะธัั TEST_DATA_FIXED.sql**

1. ะัะบัะพะน Supabase Dashboard
2. SQL Editor โ New Query
3. ะกะบะพะฟะธััะน ะบะพะด ะธะท `TEST_DATA_FIXED.sql`
4. ะััะฐะฒั ะธ ะฝะฐะถะผะธ RUN โถ๏ธ
5. ะกะบะฐะถะธ ะผะฝะต ัะตะทัะปััะฐั!

**ะะฐะถะฝะพ:** ะะพะฟะธััะน ะธะผะตะฝะฝะพ ะธะท `.sql` ัะฐะนะปะฐ, ะะ ะธะท `.md`!

---

**ะะะขะะ ะ ะะะะฃะกะะฃ!** ๐

