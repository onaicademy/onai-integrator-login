# üéØ –ü–õ–ê–ù –í–ù–ï–î–†–ï–ù–ò–Ø –°–ò–°–¢–ï–ú–´ –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê –ò –î–ï–ë–ê–ì–ê

**–î–∞—Ç–∞:** 20 –¥–µ–∫–∞–±—Ä—è 2024  
**–¶–µ–ª—å:** –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –±–µ–∑ –ø–æ–ª–æ–º–æ–∫

---

## üìã –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –°–¶–ï–ù–ê–†–ò–ò –ü–û –ü–†–û–î–£–ö–¢–ê–ú

### **1. TRIPWIRE (–û—Å–Ω–æ–≤–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞)**

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è/–î–æ—Å—Ç—É–ø—ã**
   - Login —á–µ—Ä–µ–∑ email/password
   - JWT token –≤–∞–ª–∏–¥–∞—Ü–∏—è
   - Role-based access (student/admin)

2. **–ü—Ä–æ—Å–º–æ—Ç—Ä –∫—É—Ä—Å–∞ –∏ –º–æ–¥—É–ª–µ–π**
   - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∫—É—Ä—Å–æ–≤
   - –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥—É–ª—è
   - –¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

3. **–ü—Ä–æ—Å–º–æ—Ç—Ä —É—Ä–æ–∫–∞**
   - –í–∏–¥–µ–æ –ø–ª–µ–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
   - Honest tracking —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

4. **AI Mentor –¥–∏–∞–ª–æ–≥**
   - OpenAI Assistant –æ—Ç–≤–µ—á–∞–µ—Ç
   - Context —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
   - Thread –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è

5. **Achievements —Å–∏—Å—Ç–µ–º–∞**
   - –ê—á–∏–≤–∫–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
   - –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
   - –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è

---

### **2. TRAFFIC DASHBOARD (–¢–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∏)**

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞**
   - Login –≤ Traffic DB
   - –†–æ–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è (targetologist/admin)
   - Session –≤–∞–ª–∏–¥–Ω—ã–π

2. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ FB Ads**
   - Token validation
   - Ad accounts –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
   - Campaigns –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

3. **–ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏**
   - Express Course –¥–∞–Ω–Ω—ã–µ
   - Main Products –¥–∞–Ω–Ω—ã–µ
   - ROI —Ä–∞—Å—á—ë—Ç—ã

4. **AmoCRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
   - Leads –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è
   - UTM –ø–∞—Ä—Å–∏—Ç—Å—è
   - Sales —Å—á–∏—Ç–∞—é—Ç—Å—è

5. **Onboarding tour**
   - Driver.js –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
   - –®–∞–≥–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
   - –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

---

### **3. REFERRAL SYSTEM (–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)**

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏**
   - User –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
   - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ —Å–æ–∑–¥–∞–Ω
   - –°—Å—ã–ª–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

2. **–¢—Ä–µ–∫–∏–Ω–≥ –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø–æ —Å—Å—ã–ª–∫–µ**
   - Cookie/localStorage —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
   - Referrer ID —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è
   - Attribution —Ä–∞–±–æ—Ç–∞–µ—Ç

3. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª–∞**
   - –ù–æ–≤—ã–π user —Å–æ–∑–¥–∞—ë—Ç—Å—è
   - –°–≤—è–∑—å referrer ‚Üî referee
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

4. **–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è**
   - –£—Å–ª–æ–≤–∏—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
   - Reward –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è
   - Webhook —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)

5. **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏**
   - –ö–æ–ª-–≤–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
   - –ó–∞—Ä–∞–±–æ—Ç–æ–∫
   - –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–ª–∞—Ç

---

## üè• –®–ê–ì 2: HEALTH/STATUS ENDPOINTS

### **Backend Structure:**

```typescript
// backend/src/routes/health.ts
import { Router } from 'express';
import { tripwireSupabase } from '@/config/supabase-tripwire';
import { trafficSupabase } from '@/config/supabase-traffic';
import OpenAI from 'openai';

const router = Router();

/**
 * GET /api/health
 * –û–±—â–∏–π health check
 */
router.get('/', async (req, res) => {
  try {
    const health = {
      status: 'healthy',
      timestamp: new Date().toISOString(),
      uptime: process.uptime(),
      services: {}
    };

    // Check Tripwire DB
    try {
      const { data } = await tripwireSupabase.from('users').select('id').limit(1);
      health.services.tripwire_db = data ? 'healthy' : 'degraded';
    } catch (e) {
      health.services.tripwire_db = 'unhealthy';
      health.status = 'degraded';
    }

    // Check Traffic DB
    try {
      const { data } = await trafficSupabase.from('traffic_users').select('id').limit(1);
      health.services.traffic_db = data ? 'healthy' : 'degraded';
    } catch (e) {
      health.services.traffic_db = 'unhealthy';
      health.status = 'degraded';
    }

    // Check OpenAI
    try {
      const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });
      await openai.models.list();
      health.services.openai = 'healthy';
    } catch (e) {
      health.services.openai = 'unhealthy';
      health.status = 'degraded';
    }

    // Check AmoCRM
    try {
      const response = await fetch(`${process.env.AMOCRM_DOMAIN}/api/v4/account`, {
        headers: { 'Authorization': `Bearer ${process.env.AMOCRM_ACCESS_TOKEN}` }
      });
      health.services.amocrm = response.ok ? 'healthy' : 'unhealthy';
    } catch (e) {
      health.services.amocrm = 'unhealthy';
    }

    res.status(health.status === 'healthy' ? 200 : 503).json(health);
  } catch (error) {
    res.status(500).json({
      status: 'unhealthy',
      error: error.message,
      timestamp: new Date().toISOString()
    });
  }
});

/**
 * GET /api/health/tripwire
 * Tripwire-specific checks
 */
router.get('/tripwire', async (req, res) => {
  // Detailed Tripwire checks
  const checks = {
    db: false,
    auth: false,
    video_tracking: false,
    ai_mentor: false,
    achievements: false
  };

  try {
    // DB check
    const { data: users } = await tripwireSupabase.from('users').select('id').limit(1);
    checks.db = !!users;

    // Auth check (JWT secret exists)
    checks.auth = !!process.env.JWT_SECRET;

    // Video tracking (—á–µ—Å—Ç–Ω—ã–π —Ç–∞–π–º–µ—Ä)
    checks.video_tracking = !!process.env.HONEST_TRACKING_ENABLED;

    // AI Mentor (OpenAI key)
    checks.ai_mentor = !!process.env.OPENAI_API_KEY;

    // Achievements (table exists)
    const { data: achievements } = await tripwireSupabase.from('achievements').select('id').limit(1);
    checks.achievements = !!achievements;

    const allHealthy = Object.values(checks).every(v => v === true);
    
    res.status(allHealthy ? 200 : 503).json({
      status: allHealthy ? 'healthy' : 'degraded',
      checks,
      timestamp: new Date().toISOString()
    });
  } catch (error) {
    res.status(500).json({
      status: 'unhealthy',
      checks,
      error: error.message,
      timestamp: new Date().toISOString()
    });
  }
});

/**
 * GET /api/health/traffic
 * Traffic Dashboard checks
 */
router.get('/traffic', async (req, res) => {
  const checks = {
    db: false,
    fb_integration: false,
    amocrm: false,
    analytics: false
  };

  try {
    // Traffic DB
    const { data } = await trafficSupabase.from('traffic_users').select('id').limit(1);
    checks.db = !!data;

    // FB Token
    checks.fb_integration = !!process.env.FACEBOOK_PERMANENT_TOKEN;

    // AmoCRM
    const amocrmResponse = await fetch(`${process.env.AMOCRM_DOMAIN}/api/v4/account`, {
      headers: { 'Authorization': `Bearer ${process.env.AMOCRM_ACCESS_TOKEN}` }
    });
    checks.amocrm = amocrmResponse.ok;

    // Analytics endpoint
    checks.analytics = true; // Assume healthy if code reaches here

    const allHealthy = Object.values(checks).every(v => v === true);
    
    res.status(allHealthy ? 200 : 503).json({
      status: allHealthy ? 'healthy' : 'degraded',
      checks,
      timestamp: new Date().toISOString()
    });
  } catch (error) {
    res.status(500).json({
      status: 'unhealthy',
      checks,
      error: error.message,
      timestamp: new Date().toISOString()
    });
  }
});

/**
 * GET /api/health/referral
 * Referral system checks
 */
router.get('/referral', async (req, res) => {
  const checks = {
    db: false,
    link_generation: false,
    tracking: false
  };

  try {
    // Check if referral service exists
    checks.db = true; // TODO: Add actual DB check when implemented
    checks.link_generation = true; // TODO: Check link generation logic
    checks.tracking = true; // TODO: Check tracking logic

    const allHealthy = Object.values(checks).every(v => v === true);
    
    res.status(allHealthy ? 200 : 503).json({
      status: allHealthy ? 'healthy' : 'degraded',
      checks,
      timestamp: new Date().toISOString()
    });
  } catch (error) {
    res.status(500).json({
      status: 'unhealthy',
      checks,
      error: error.message,
      timestamp: new Date().toISOString()
    });
  }
});

export default router;
```

---

## üîç –®–ê–ì 3: CORRELATION ID MIDDLEWARE

### **Logger Middleware:**

```typescript
// backend/src/middleware/correlationId.ts
import { Request, Response, NextFunction } from 'express';
import { v4 as uuidv4 } from 'uuid';

declare global {
  namespace Express {
    interface Request {
      correlationId?: string;
    }
  }
}

export const correlationIdMiddleware = (req: Request, res: Response, next: NextFunction) => {
  // Get from header or generate new
  const correlationId = req.headers['x-correlation-id'] as string || uuidv4();
  
  req.correlationId = correlationId;
  res.setHeader('X-Correlation-Id', correlationId);
  
  next();
};

// Enhanced logger
export const logger = {
  info: (message: string, meta?: any, correlationId?: string) => {
    console.log(JSON.stringify({
      level: 'info',
      message,
      correlationId,
      timestamp: new Date().toISOString(),
      ...meta
    }));
  },
  
  error: (message: string, error?: Error, meta?: any, correlationId?: string) => {
    console.error(JSON.stringify({
      level: 'error',
      message,
      error: error?.message,
      stack: error?.stack,
      correlationId,
      timestamp: new Date().toISOString(),
      ...meta
    }));
  },
  
  warn: (message: string, meta?: any, correlationId?: string) => {
    console.warn(JSON.stringify({
      level: 'warn',
      message,
      correlationId,
      timestamp: new Date().toISOString(),
      ...meta
    }));
  }
};

// Request logger middleware
export const requestLogger = (req: Request, res: Response, next: NextFunction) => {
  const startTime = Date.now();
  
  res.on('finish', () => {
    const duration = Date.now() - startTime;
    
    logger.info('HTTP Request', {
      method: req.method,
      url: req.url,
      statusCode: res.statusCode,
      duration,
      userAgent: req.headers['user-agent'],
      ip: req.ip
    }, req.correlationId);
  });
  
  next();
};
```

---

## üö® –®–ê–ì 4: SENTRY INTEGRATION

### **Setup:**

```typescript
// backend/src/config/sentry.ts
import * as Sentry from '@sentry/node';
import { ProfilingIntegration } from '@sentry/profiling-node';
import { Express } from 'express';

export function initSentry(app: Express) {
  if (!process.env.SENTRY_DSN) {
    console.warn('‚ö†Ô∏è SENTRY_DSN not set, skipping Sentry initialization');
    return;
  }

  Sentry.init({
    dsn: process.env.SENTRY_DSN,
    environment: process.env.NODE_ENV || 'development',
    integrations: [
      new Sentry.Integrations.Http({ tracing: true }),
      new Sentry.Integrations.Express({ app }),
      new ProfilingIntegration(),
    ],
    tracesSampleRate: 0.1, // 10% of requests
    profilesSampleRate: 0.1,
    
    beforeSend(event, hint) {
      // Add correlation ID if available
      if (hint?.originalException) {
        const error = hint.originalException as any;
        if (error.correlationId) {
          event.tags = {
            ...event.tags,
            correlationId: error.correlationId
          };
        }
      }
      return event;
    }
  });

  // Request handler must be first
  app.use(Sentry.Handlers.requestHandler());
  app.use(Sentry.Handlers.tracingHandler());
}

export function setupSentryErrorHandler(app: Express) {
  // Error handler must be last
  app.use(Sentry.Handlers.errorHandler({
    shouldHandleError(error) {
      // Capture 4xx and 5xx errors
      return true;
    }
  }));
}

// Helper to capture errors with context
export function captureError(error: Error, context?: {
  user?: { id: string; email?: string };
  tags?: Record<string, string>;
  extra?: Record<string, any>;
  correlationId?: string;
}) {
  Sentry.withScope((scope) => {
    if (context?.user) {
      scope.setUser(context.user);
    }
    
    if (context?.tags) {
      Object.entries(context.tags).forEach(([key, value]) => {
        scope.setTag(key, value);
      });
    }
    
    if (context?.extra) {
      scope.setContext('additional', context.extra);
    }
    
    if (context?.correlationId) {
      scope.setTag('correlationId', context.correlationId);
    }
    
    Sentry.captureException(error);
  });
}
```

---

## üß™ –®–ê–ì 5: SMOKE TESTS

### **Test Structure:**

```typescript
// backend/tests/smoke/tripwire.test.ts
import { describe, it, expect } from '@jest/globals';
import axios from 'axios';

const BASE_URL = process.env.TEST_BASE_URL || 'http://localhost:3000';

describe('Tripwire Smoke Tests', () => {
  it('should have healthy status', async () => {
    const response = await axios.get(`${BASE_URL}/api/health/tripwire`);
    expect(response.status).toBe(200);
    expect(response.data.status).toBe('healthy');
  });
  
  it('should authenticate user', async () => {
    const response = await axios.post(`${BASE_URL}/api/auth/login`, {
      email: 'test@onai.academy',
      password: 'test123'
    });
    expect(response.status).toBe(200);
    expect(response.data.token).toBeDefined();
  });
  
  it('should load courses', async () => {
    // Assume we have token from previous test
    const response = await axios.get(`${BASE_URL}/api/courses`);
    expect(response.status).toBe(200);
    expect(Array.isArray(response.data)).toBe(true);
  });
});

// backend/tests/smoke/traffic.test.ts
describe('Traffic Dashboard Smoke Tests', () => {
  it('should have healthy status', async () => {
    const response = await axios.get(`${BASE_URL}/api/health/traffic`);
    expect(response.status).toBe(200);
    expect(response.data.status).toBe('healthy');
  });
  
  it('should connect to AmoCRM', async () => {
    const response = await axios.get(`${BASE_URL}/api/traffic/amocrm-status`);
    expect(response.status).toBe(200);
    expect(response.data.connected).toBe(true);
  });
});

// backend/tests/smoke/referral.test.ts
describe('Referral System Smoke Tests', () => {
  it('should have healthy status', async () => {
    const response = await axios.get(`${BASE_URL}/api/health/referral`);
    expect(response.status).toBe(200);
  });
  
  it('should generate referral link', async () => {
    const response = await axios.post(`${BASE_URL}/api/referral/generate`, {
      userId: 'test-user-id'
    });
    expect(response.status).toBe(200);
    expect(response.data.link).toBeDefined();
  });
});
```

### **Run Scripts:**

```json
// package.json
{
  "scripts": {
    "test:smoke": "NODE_ENV=test jest tests/smoke --detectOpenHandles",
    "test:smoke:watch": "npm run test:smoke -- --watch",
    "test:smoke:ci": "npm run test:smoke -- --ci --coverage"
  }
}
```

---

## üîÑ –®–ê–ì 6: CURSOR-–¶–ò–ö–õ

### **–ù–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ª–∞–¥–∫–∏:**

**–ë–´–õ–û:**
```
‚ùå "–ö–Ω–æ–ø–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"
‚ùå –û—Ç–∫—Ä—ã–≤–∞—é DevTools
‚ùå –°–º–æ—Ç—Ä—é Network
‚ùå –ò—â—É –æ—à–∏–±–∫—É
‚ùå –ì–∞–¥–∞—é —á—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å
```

**–°–¢–ê–õ–û:**
```
‚úÖ Smoke test —É–ø–∞–ª: "tripwire.test.ts:15 - User auth failed"
‚úÖ Correlation ID: abc-123-def
‚úÖ –°–º–æ—Ç—Ä—é –ª–æ–≥–∏: grep "abc-123-def" logs/backend.log
‚úÖ –í–∏–∂—É stacktrace –≤ Sentry
‚úÖ –ò—Å–ø—Ä–∞–≤–ª—è—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ç—Ä–æ–∫—É
‚úÖ –ó–∞–ø—É—Å–∫–∞—é smoke test —Å–Ω–æ–≤–∞
‚úÖ –ó–µ–ª—ë–Ω—ã–π ‚úÖ
```

---

## üìä –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

### **–î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:**
- üêõ Bug –Ω–∞—Ö–æ–¥–∏—Ç—Å—è: ~30 –º–∏–Ω—É—Ç
- üîç Root cause: ~1 —á–∞—Å
- üîß Fix + Deploy: ~2 —á–∞—Å–∞
- **Total: ~3.5 —á–∞—Å–∞**

### **–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:**
- üö® Smoke test —Å–æ–æ–±—â–∞–µ—Ç —Å—Ä–∞–∑—É: ~1 –º–∏–Ω—É—Ç–∞
- üîç Correlation ID ‚Üí –õ–æ–≥–∏: ~5 –º–∏–Ω—É—Ç
- üîß Fix (—Ç–æ—á–µ—á–Ω—ã–π): ~15 –º–∏–Ω—É—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞: ~2 –º–∏–Ω—É—Ç—ã
- **Total: ~23 –º–∏–Ω—É—Ç—ã** (9x –±—ã—Å—Ç—Ä–µ–µ!)

---

## üìù IMPLEMENTATION CHECKLIST

### **Phase 1: Foundation** (Day 1)
- [ ] –î–æ–±–∞–≤–∏—Ç—å health endpoints
- [ ] –î–æ–±–∞–≤–∏—Ç—å correlation ID middleware
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å structured logging
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Sentry

### **Phase 2: Tests** (Day 2)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å smoke tests –¥–ª—è Tripwire
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å smoke tests –¥–ª—è Traffic
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å smoke tests –¥–ª—è Referral
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

### **Phase 3: Monitoring** (Day 3)
- [ ] Dashboard –¥–ª—è health checks
- [ ] Alerts –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–∞–¥–µ–Ω–∏—è
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª—ã/—Å–µ—Ä–≤–∏—Å
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´

### **–ö—Ä–∏—Ç–∏—á–Ω–æ (–¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—ã–º):**
1. Health endpoints –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
2. Correlation ID middleware
3. –ë–∞–∑–æ–≤—ã–µ smoke tests (auth + main flow)

### **–í–∞–∂–Ω–æ (–¥–µ–ª–∞—Ç—å –≤—Ç–æ—Ä—ã–º):**
4. Sentry integration
5. Structured logging
6. Error handling improvements

### **–•–æ—Ä–æ—à–æ –∏–º–µ—Ç—å (–¥–µ–ª–∞—Ç—å —Ç—Ä–µ—Ç—å–∏–º):**
7. CI automation
8. Monitoring dashboard
9. Performance profiling

---

## üöÄ –ù–ê–ß–ù–Å–ú –° –≠–¢–û–ì–û

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
1. `backend/src/routes/health.ts` - Health endpoints
2. `backend/src/middleware/correlationId.ts` - Correlation ID
3. `backend/src/middleware/errorHandler.ts` - Enhanced error handling
4. `backend/src/config/sentry.ts` - Sentry setup
5. `backend/tests/smoke/` - Smoke tests

**–ù–µ —Ç—Ä–æ–≥–∞–µ–º (—á—Ç–æ–±—ã –Ω–µ —Å–ª–æ–º–∞—Ç—å):**
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ routes
- Database schemas
- Frontend –∫–æ–¥ (–ø–æ–∫–∞)
- ENV variables

**Cursor-prompt –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```
"–î–æ–±–∞–≤—å health endpoint –¥–ª—è Tripwire. 
Correlation ID: {id}
–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–ª–æ—Å—å:
npm run test:smoke"
```

---

**–ë–†–ê–¢–ê–ù, –≠–¢–û –ü–õ–ê–ù! –ù–ê–ß–ò–ù–ê–ï–ú? üöÄ**
