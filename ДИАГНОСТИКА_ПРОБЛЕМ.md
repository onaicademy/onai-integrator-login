# üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú

**–î–∞—Ç–∞:** 10 –Ω–æ—è–±—Ä—è 2025  
**–ü—Ä–æ–±–ª–µ–º—ã:**
1. ‚ùå –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
2. ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
3. ‚ùå –ö–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ—Å—Ç–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã

---

## üìù –ß–¢–û –°–î–ï–õ–ê–ù–û

### 1. –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `StudentsActivity.tsx` —Ç–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π —à–∞–≥ –∑–∞–≥—Ä—É–∑–∫–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏, –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î, –º–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö

### 2. –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç-—Ñ–∞–π–ª
- `test-supabase-connection.html` - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, auth, —Ç–∞–±–ª–∏—Ü—ã, RLS –ø–æ–ª–∏—Ç–∏–∫–∏

### 3. –£–ª—É—á—à–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º –≤—ã—Ö–æ–¥–∞
- `ProfileSettings.tsx` —Ç–µ–ø–µ—Ä—å –æ—á–∏—â–∞–µ—Ç: sessionStorage, localStorage (—Ç–æ–∫–µ–Ω—ã Supabase), React Query –∫–µ—à

---

## üß™ –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨

### –®–ê–ì 1: –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π `https://localhost:8080/`
2. –ù–∞–∂–º–∏ F12 (Developer Tools)
3. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Console"

### –®–ê–ì 2: –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

1. –ó–∞–ª–æ–≥–∏–Ω—å—Å—è –ø–æ–¥ –∞–¥–º–∏–Ω–æ–º
2. –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
   ```
   ‚úÖ Supabase config ready
   ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à—ë–ª –≤ —Å–∏—Å—Ç–µ–º—É: saint@onaiacademy.kz
   ```

### –®–ê–ì 3: –ü–µ—Ä–µ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

1. –û—Ç–∫—Ä–æ–π `/admin/students-activity`
2. –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
   ```
   üìã StudentsActivity: fetchStudents –≤—ã–∑–≤–∞–Ω
   üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏...
   ‚úÖ –°–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–∞, user: saint@onaiacademy.kz
   üì§ –ó–∞–ø—Ä–æ—Å student_profiles...
   ‚úÖ –ü–æ–ª—É—á–µ–Ω–æ X –∑–∞–ø–∏—Å–µ–π –∏–∑ student_profiles
   ‚úÖ –°–º–∞–ø–ø–∏—Ä–æ–≤–∞–Ω–æ X —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
   ```

### –®–ê–ì 4: –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è

**–ü—Ä–æ–≤–µ—Ä—å –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:**

#### ‚ùå –û—à–∏–±–∫–∞: "relation student_profiles does not exist"
**–ü—Ä–∏—á–∏–Ω–∞:** –¢–∞–±–ª–∏—Ü–∞ `student_profiles` –Ω–µ —Å–æ–∑–¥–∞–Ω–∞ –≤ Supabase  
**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π Supabase Dashboard ‚Üí SQL Editor
2. –í—ã–ø–æ–ª–Ω–∏ SQL –∏–∑ —Ñ–∞–π–ª–∞ `supabase/migrations/create_student_profiles.sql`

#### ‚ùå –û—à–∏–±–∫–∞: "JWT expired" –∏–ª–∏ "permission denied"
**–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å—Ç—ë–∫ —Ç–æ–∫–µ–Ω –∏–ª–∏ RLS –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø  
**–†–µ—à–µ–Ω–∏–µ:**
1. –í—ã–π–¥–∏ –∏ –≤–æ–π–¥–∏ –∑–∞–Ω–æ–≤–æ
2. –ü—Ä–æ–≤–µ—Ä—å RLS policies –¥–ª—è `student_profiles`:
   ```sql
   -- –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∞ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
   CREATE POLICY "Admins can read all student profiles"
   ON student_profiles FOR SELECT
   TO authenticated
   USING (
     EXISTS (
       SELECT 1 FROM profiles
       WHERE profiles.id = auth.uid()
       AND profiles.role = 'admin'
       AND profiles.is_active = true
     )
   );
   ```

#### ‚ùå –û—à–∏–±–∫–∞: "–°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞"
**–ü—Ä–∏—á–∏–Ω–∞:** Supabase –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–µ—Å—Å–∏—é  
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å `.env`:
   ```
   VITE_SUPABASE_URL=https://arqhkacellqbhjhbebfh.supabase.co
   VITE_SUPABASE_ANON_KEY=ey...
   ```
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ dev-—Å–µ—Ä–≤–µ—Ä: `Ctrl+C`, –∑–∞—Ç–µ–º `npm run dev`

---

## üß∞ –¢–ï–°–¢-–§–ê–ô–õ (test-supabase-connection.html)

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

1. –û—Ç–∫—Ä–æ–π `http://localhost:8080/test-supabase-connection.html`
2. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É:
   - **1. Test Connection** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - **2. Test Auth Session** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Å–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏ –Ω–∞ —Å–∞–π—Ç!)
   - **3. Test Profiles Table** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã profiles
   - **4. Test Student Profiles** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã student_profiles
   - **5. Test RLS Policies** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–∏—Ç–∏–∫ –¥–æ—Å—Ç—É–ø–∞

3. –°–º–æ—Ç—Ä–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

---

## üîß –ü–†–û–í–ï–†–ö–ê –í–´–•–û–î–ê –ò–ó –ü–†–û–§–ò–õ–Ø

### –¢–µ—Å—Ç:

1. –í–æ–π–¥–∏ –≤ —Å–∏—Å—Ç–µ–º—É
2. –û—Ç–∫—Ä–æ–π `/settings`
3. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É "–í—ã–π—Ç–∏"
4. –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   ```
   üëã –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã—à–µ–ª –∏–∑ —Å–∏—Å—Ç–µ–º—ã
   ```
5. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/login` –ø—Ä–æ–∏–∑–æ—à—ë–ª
6. –ü–æ–ø—Ä–æ–±—É–π –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥ - –¥–æ–ª–∂–µ–Ω —Å–Ω–æ–≤–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –≤–æ–π—Ç–∏

### –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å Network –≤–∫–ª–∞–¥–∫—É (F12 ‚Üí Network)
2. –ù–∞–π–¥–∏ –∑–∞–ø—Ä–æ—Å `signOut`
3. –ü–æ—Å–º–æ—Ç—Ä–∏ —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 200)
4. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ localStorage –æ—á–∏—Å—Ç–∏–ª—Å—è:
   - F12 ‚Üí Application ‚Üí Local Storage ‚Üí localhost:8080
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫–ª—é—á–µ–π —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `sb-`

---

## üìä –ü–†–û–í–ï–†–ö–ê –ö–ù–û–ü–ö–ò "–î–û–ë–ê–í–ò–¢–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø"

### –¢–µ—Å—Ç:

1. –û—Ç–∫—Ä–æ–π `/admin/students-activity`
2. –ù–∞–∂–º–∏ "–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
3. –ó–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É:
   - Email: `test@example.com`
   - –ü–æ–ª–Ω–æ–µ –∏–º—è: `–¢–µ—Å—Ç –¢–µ—Å—Ç–æ–≤`
   - –¢–µ–ª–µ—Ñ–æ–Ω: `+7 777 777 7777`
   - –ü–∞—Ä–æ–ª—å: `Test1234` (–º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤, —Ç–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω–∏—Ü–∞)
   - –†–æ–ª—å: –°—Ç—É–¥–µ–Ω—Ç
   - –°—Ä–æ–∫: 12 –º–µ—Å—è—Ü–µ–≤
4. –ù–∞–∂–º–∏ "–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"

### –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
üì§ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {email: "test@example.com", ...}
üìÖ –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 12 –º–µ—Å—è—Ü–µ–≤
üìÖ –ò—Å—Ç–µ–∫–∞–µ—Ç: 2026-11-10T...
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω!
```

### –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

#### ‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ React –≤ –∫–æ–Ω—Å–æ–ª–∏
- –ü–æ–ø—Ä–æ–±—É–π –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+R)

#### ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ Edge Function `create-student` –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞ –≤ Supabase
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Edge Function –≤ Supabase Dashboard

---

## üö® –ö–†–ò–¢–ò–ß–ù–´–ï –ü–†–û–í–ï–†–ö–ò

### 1. –¢–∞–±–ª–∏—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç

–û—Ç–∫—Ä–æ–π Supabase Dashboard ‚Üí Table Editor, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
- ‚úÖ `profiles`
- ‚úÖ `student_profiles`
- ‚úÖ `courses`
- ‚úÖ `student_courses`
- ‚úÖ `achievements`
- ‚úÖ `user_achievements`
- ‚úÖ `ai_curator_threads`
- ‚úÖ `ai_curator_messages`

### 2. RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

Supabase Dashboard ‚Üí Authentication ‚Üí Policies

**–î–ª—è `profiles`:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
- –ê–¥–º–∏–Ω—ã –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –≤—Å–µ –ø—Ä–æ—Ñ–∏–ª–∏

**–î–ª—è `student_profiles`:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
- –ê–¥–º–∏–Ω—ã –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –≤—Å–µ –ø—Ä–æ—Ñ–∏–ª–∏

### 3. Edge Functions –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã

Supabase Dashboard ‚Üí Edge Functions:
- ‚úÖ `create-student` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

---

## üìû –ï–°–õ–ò –ù–ò–ß–ï–ì–û –ù–ï –ü–û–ú–û–ì–õ–û

1. **–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å:**
   ```bash
   # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å dev-—Å–µ—Ä–≤–µ—Ä
   Ctrl+C
   
   # –£–±–∏—Ç—å –≤—Å–µ Node –ø—Ä–æ—Ü–µ—Å—Å—ã
   taskkill /IM node.exe /F
   
   # –û—á–∏—Å—Ç–∏—Ç—å node_modules –∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
   rm -rf node_modules package-lock.json
   npm install
   
   # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
   npm run dev
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env —Ñ–∞–π–ª:**
   - –£–±–µ–¥–∏—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `VITE_`
   - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤
   - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∫–ª—é—á–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Supabase Dashboard:**
   - Project Settings ‚Üí API
   - –°–∫–æ–ø–∏—Ä—É–π URL –∏ anon key –∑–∞–Ω–æ–≤–æ
   - –í—Å—Ç–∞–≤—å –≤ `.env`

4. **–û—Ç–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç-—Ñ–∞–π–ª** –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏

---

## ‚úÖ CHECKLIST –§–ò–ù–ê–õ–¨–ù–û–ô –ü–†–û–í–ï–†–ö–ò

- [ ] –õ–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [ ] –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Å—ë –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- [ ] –í –∫–æ–Ω—Å–æ–ª–∏ –Ω–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫
- [ ] RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –∑–∞–ø—Ä–æ—Å—ã

---

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—Å—ë –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –£–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ console.log (–¥–ª—è production)
2. –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è —Å–ø–∏—Å–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (–µ—Å–ª–∏ –∏—Ö >100)
3. –î–æ–±–∞–≤–∏—Ç—å debounce –¥–ª—è –ø–æ–∏—Å–∫–∞
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã (select —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è)
5. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É edge cases (–ø—É—Å—Ç—ã–µ —Å–ø–∏—Å–∫–∏, –º–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ)

