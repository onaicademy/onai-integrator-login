# üìã Traffic Dashboard - –ü–æ–ª–Ω—ã–π –ü–ª–∞–Ω –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## üéØ –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ –¥–ª—è —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–æ–≤ —Å –ø–æ–ª–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –ø–æ –≤–æ—Ä–æ–Ω–∫–∞–º –ø—Ä–æ–¥–∞–∂ (–û–¥–Ω–æ–¥–Ω–µ–≤–Ω–∏–∫, –¢—Ä–µ—Ö–¥–Ω–µ–≤–Ω–∏–∫, –≠–∫—Å–ø—Ä–µ—Å—Å-–∫—É—Ä—Å) –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ (Facebook, YouTube, TikTok).

---

## üèóÔ∏è –§–ê–ó–ê 1: –û—á–∏—Å—Ç–∫–∞ –∏ –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –°—Ç—Ä—É–∫—Ç—É—Ä—ã

### 1.1 –£–ø—Ä–æ—â–µ–Ω–∏–µ –°–∞–π–¥–±–∞—Ä–∞ (–£–±—Ä–∞—Ç—å –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
**–ü—Ä–æ–±–ª–µ–º–∞**: –†–∞–∑–¥–µ–ª "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ –≤–µ—Ä—Ö–Ω–∏—Ö —Ç–∞–±–∞—Ö –∏ –≤ —Å–∞–π–¥–±–∞—Ä–µ

**–†–µ—à–µ–Ω–∏–µ**:
- –£–±—Ä–∞—Ç—å —Ä–∞–∑–¥–µ–ª "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" –∏–∑ –≤–µ—Ä—Ö–Ω–∏—Ö —Ç–∞–±–æ–≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Å–∞–π–¥–±–∞—Ä–µ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∞–π–¥–±–∞—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:
  ```
  üìä –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –¢–∞—Ä–≥–µ—Ç Dashboard)

  –ê–ù–ê–õ–ò–¢–ò–ö–ê
  ‚îî‚îÄ‚îÄ üìà –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø—Ä–æ–¥–∞–∂
  ‚îî‚îÄ‚îÄ üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

  –£–ü–†–ê–í–õ–ï–ù–ò–ï
  ‚îî‚îÄ‚îÄ üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ)
  ‚îî‚îÄ‚îÄ üèóÔ∏è –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–º–∞–Ω–¥
  ‚îî‚îÄ‚îÄ üîå API –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
  ```

### 1.2 –£–¥–∞–ª–µ–Ω–∏–µ –î—É–±–ª–∏—Ä—É—é—â–∏—Ö –†–∞–∑–¥–µ–ª–æ–≤
- –£–±—Ä–∞—Ç—å "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" –∏–∑ –≤–∫–ª–∞–¥–æ–∫ TrafficAdminPanel
- –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ: –¢–∞—Ä–≥–µ—Ç Dashboard, –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –ê—Ç—Ä–∏–±—É—Ü–∏—è, –ù–∞—Å—Ç—Ä–æ–π–∫–∏ AI, –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–æ–≤

---

## üèóÔ∏è –§–ê–ó–ê 2: –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ü—Ä–æ–¥–∞–∂ - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AmoCRM –∏ –ë–î

### 2.1 –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¢–µ–∫—É—â–µ–≥–æ –°–æ—Å—Ç–æ—è–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞**: –†–∞–∑–¥–µ–ª "–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø—Ä–æ–¥–∞–∂" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Å—Ç—ã–µ –º–µ—Ç—Ä–∏–∫–∏

**–ó–∞–¥–∞—á–∏**:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ AmoCRM API
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö –ë–î:
   - `landing_bd` - –ª–∏–¥—ã —Å –ª–µ–Ω–¥–∏–Ω–≥–æ–≤
   - `traffic_bd` - –ª–∏–¥—ã —Å —Ç—Ä–∞—Ñ–∏–∫–∞
   - `tripwire_bd` - –ª–∏–¥—ã —Å —Ç—Ä–∏–ø–≤–∞–µ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å UTM-–º–µ—Ç–æ–∫ –≤ —Å–¥–µ–ª–∫–∞—Ö AmoCRM

### 2.2 –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è –î–∞–Ω–Ω—ã—Ö
**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö**:

1. **AmoCRM (–æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ–¥–∞–∂)**
   - –¢–∞–±–ª–∏—Ü–∞: —Å–¥–µ–ª–∫–∏ —Å UTM-–º–µ—Ç–∫–∞–º–∏
   - –≠–Ω–¥–ø–æ–∏–Ω—Ç: `/api/amocrm/deals-by-utm`
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `utm_source`, `date_from`, `date_to`

2. **–ë–î - –õ–∏–¥—ã (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏)**
   - `landing_bd`: –ª–∏–¥—ã —Å –ª–µ–Ω–¥–∏–Ω–≥–æ–≤
   - `traffic_bd`: –ª–∏–¥—ã —Å —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π
   - `tripwire_bd`: –ª–∏–¥—ã —Å —Ç—Ä–∏–ø–≤–∞–µ—Ä–∞
   - –ü–æ–ª—è: `utm_source`, `utm_medium`, `utm_campaign`, `created_at`, `status`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è**:
```typescript
interface SourceStats {
  source: string; // utm_source
  leads: number; // –í—Å–µ–≥–æ –ª–∏–¥–æ–≤
  sales: number; // –ü—Ä–æ–¥–∞–∂–∏ (–∏–∑ AmoCRM)
  revenue: number; // –í—ã—Ä—É—á–∫–∞ (–∏–∑ AmoCRM)
  conversionRate: number; // % –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ lead -> sale
  avgCheck: number; // –°—Ä–µ–¥–Ω–∏–π —á–µ–∫
}
```

### 2.3 –°–æ–∑–¥–∞–Ω–∏–µ –ù–æ–≤–æ–≥–æ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
**–§–∞–π–ª**: `src/components/traffic/SourcesAnalytics.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- –¢–∞–±–ª–∏—Ü–∞ —Å UTM sources –∏ –∏—Ö –º–µ—Ç—Ä–∏–∫–∞–º–∏
- –§–∏–ª—å—Ç—Ä –ø–æ –ø–µ—Ä–∏–æ–¥—É (7/14/30 –¥–Ω–µ–π, –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω)
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ: –∏—Å—Ç–æ—á–Ω–∏–∫—É, –∫–∞–º–ø–∞–Ω–∏–∏, –∫—Ä–µ–∞—Ç–∏–≤—É
- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV

---

## üèóÔ∏è –§–ê–ó–ê 3: –£–ø—Ä–æ—â–µ–Ω–∏–µ –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –ö–æ–º–∞–Ω–¥

### 3.1 –ù–æ–≤–∞—è –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –§–æ—Ä–º–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–µ–∫—É—â–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω—ã–π

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–æ—Ä–º—ã** (–æ–¥–Ω–æ –æ–∫–Ω–æ):

```typescript
interface TeamFormData {
  // –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  name: string; // –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: "Kenesary Team")
  email: string; // Email –∫–æ–º–∞–Ω–¥—ã
  responsibleName: string; // –ò–º—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
  password: string; // –ü–∞—Ä–æ–ª—å (—Å –∫–Ω–æ–ø–∫–æ–π "–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è")

  // UTM Sources (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä)
  utmSources: string[]; // –ú–∞—Å—Å–∏–≤ UTM sources –¥–ª—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã

  // –¶–≤–µ—Ç –∫–æ–º–∞–Ω–¥—ã (–¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏)
  color: string; // Hex color
}
```

**UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
1. Input: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
2. Input: Email –∫–æ–º–∞–Ω–¥—ã
3. Input: –ò–º—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
4. Input: –ü–∞—Ä–æ–ª—å + Button "–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è" (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π –ø–∞—Ä–æ–ª—å —Ç–∏–ø–∞ "ChangeMe123!")
5. MultiSelect: UTM Sources (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)
6. ColorPicker: –¶–≤–µ—Ç –∫–æ–º–∞–Ω–¥—ã
7. Buttons: "–°–æ–∑–¥–∞—Ç—å" / "–û—Ç–º–µ–Ω–∞"

### 3.2 –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ü–∞—Ä–æ–ª—è
**–§—É–Ω–∫—Ü–∏—è**:
```typescript
function generatePassword(): string {
  const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789';
  const length = 12;
  let password = '';
  for (let i = 0; i < length; i++) {
    password += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return password + '!';
}
```

### 3.3 UTM Sources Management
**–ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è UTM sources –∫–æ–º–∞–Ω–¥—ã**:
- –¢–∞–±–ª–∏—Ü–∞: `traffic_teams`
- –ü–æ–ª–µ: `utm_sources` (JSON array)
- –ü—Ä–∏–º–µ—Ä: `["facebook_kenesary", "instagram_kenesary", "google_kenesary"]`

**–ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –ª–∏–¥–∞/–ø—Ä–æ–¥–∞–∂–∏**:
1. –õ–∏–¥ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å UTM –º–µ—Ç–∫–æ–π
2. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤ –∫–∞–∫–æ–π –∫–æ–º–∞–Ω–¥–µ –µ—Å—Ç—å —ç—Ç–æ—Ç `utm_source`
3. –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –ª–∏–¥/–ø—Ä–æ–¥–∞–∂—É —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥–µ

---

## üèóÔ∏è –§–ê–ó–ê 4: API –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 4.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –î–∞–Ω–Ω—ã—Ö
**–ó–∞–¥–∞—á–∞**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –∏–ª–∏ —ç—Ç–æ –º–æ–∫–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∏**:
1. Facebook Ads API:
   - –≠–Ω–¥–ø–æ–∏–Ω—Ç: `/api/facebook/ad-accounts/status`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—Ä–æ—Å –∫ API, —Å—Ç–∞—Ç—É—Å —Ç–æ–∫–µ–Ω–∞, –¥–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

2. AmoCRM API:
   - –≠–Ω–¥–ø–æ–∏–Ω—Ç: `/api/amocrm/connection-status`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: —Å—Ç–∞—Ç—É—Å —Ç–æ–∫–µ–Ω–∞, –ø–æ—Å–ª–µ–¥–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫ –∑–∞ —Å–µ–≥–æ–¥–Ω—è

3. Email (Resend):
   - –≠–Ω–¥–ø–æ–∏–Ω—Ç: `/api/email/status`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –∫–≤–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏, –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø–∏—Å—å–º–æ

4. Telegram Bot:
   - –≠–Ω–¥–ø–æ–∏–Ω—Ç: `/api/telegram/bot-status`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞, –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

### 4.2 –°–æ–∑–¥–∞–Ω–∏–µ –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –ü–∞–Ω–µ–ª–∏
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `src/components/traffic/APIDiagnostics.tsx`

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ API**:
```typescript
interface APIStatus {
  name: string; // "Facebook Ads"
  status: 'active' | 'error' | 'warning'; // –°—Ç–∞—Ç—É—Å
  lastSync: Date; // –ü–æ—Å–ª–µ–¥–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
  tokenExpiry: Date | null; // –ö–æ–≥–¥–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —Ç–æ–∫–µ–Ω
  requestsToday: number; // –ó–∞–ø—Ä–æ—Å–æ–≤ —Å–µ–≥–æ–¥–Ω—è
  rateLimitRemaining: number; // –û—Å—Ç–∞–≤—à–∏–π—Å—è –ª–∏–º–∏—Ç
  errorMessage?: string; // –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
}
```

**UI**:
- –ó–µ–ª–µ–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä: –≤—Å–µ –û–ö
- –ñ–µ–ª—Ç—ã–π: –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (—Ç–æ–∫–µ–Ω —Å–∫–æ—Ä–æ –∏—Å—Ç–µ—á–µ—Ç, –ª–∏–º–∏—Ç –±–ª–∏–∑–æ–∫)
- –ö—Ä–∞—Å–Ω—ã–π: –æ—à–∏–±–∫–∞ (—Ç–æ–∫–µ–Ω –∏—Å—Ç–µ–∫, API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
- –ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ API
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"

---

## üèóÔ∏è –§–ê–ó–ê 5: –¢–∞—Ä–≥–µ—Ç Dashboard - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –í–æ—Ä–æ–Ω–∫–∏

### 5.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Dashboard
**–ü—Ä–æ–±–ª–µ–º–∞**: –°–µ–π—á–∞—Å –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –≤–æ—Ä–æ–Ω–∫–∞–º–∏

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:

```typescript
type FunnelType = 'one-day' | 'three-day' | 'express-course';

interface FunnelDashboard {
  type: FunnelType;
  name: string; // "–û–¥–Ω–æ–¥–Ω–µ–≤–Ω–∏–∫" | "–¢—Ä–µ—Ö–¥–Ω–µ–≤–Ω–∏–∫" | "–≠–∫—Å–ø—Ä–µ—Å—Å-–∫—É—Ä—Å"
  metrics: FunnelMetrics;
  campaigns: Campaign[];
}

interface FunnelMetrics {
  // –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
  spend: number; // –†–∞—Å—Ö–æ–¥—ã
  revenue: number; // –í—ã—Ä—É—á–∫–∞
  profit: number; // –ü—Ä–∏–±—ã–ª—å
  roas: number; // ROAS
  roi: number; // ROI

  // –í–æ—Ä–æ–Ω–∫–∞
  impressions: number; // –ü–æ–∫–∞–∑—ã
  clicks: number; // –ö–ª–∏–∫–∏
  ctr: number; // CTR
  leads: number; // –õ–∏–¥—ã
  purchases: number; // –ü–æ–∫—É–ø–∫–∏
  conversionRate: number; // CR (lead -> purchase)

  // –°—Ç–æ–∏–º–æ—Å—Ç—å
  cpm: number; // CPM
  cpc: number; // CPC
  cpl: number; // CPL (cost per lead)
  cpa: number; // CPA (cost per acquisition)

  // –°—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
  avgCheck: number; // –°—Ä–µ–¥–Ω–∏–π —á–µ–∫
  avgLTV: number; // Lifetime value
}
```

### 5.2 UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**1. Tabs –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–æ—Ä–æ–Ω–æ–∫**:
```tsx
<Tabs defaultValue="express-course">
  <TabsList>
    <TabsTrigger value="one-day">
      üöÄ –û–¥–Ω–æ–¥–Ω–µ–≤–Ω–∏–∫
    </TabsTrigger>
    <TabsTrigger value="three-day">
      üìö –¢—Ä–µ—Ö–¥–Ω–µ–≤–Ω–∏–∫
    </TabsTrigger>
    <TabsTrigger value="express-course">
      ‚ö° –≠–∫—Å–ø—Ä–µ—Å—Å-–∫—É—Ä—Å
    </TabsTrigger>
  </TabsList>

  <TabsContent value="express-course">
    <FunnelDashboardView funnel="express-course" />
  </TabsContent>
  {/* ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ */}
</Tabs>
```

**2. –î–ª—è –∫–∞–∂–¥–æ–π –≤–æ—Ä–æ–Ω–∫–∏ - –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ —Å**:
- Metrics Grid (ROAS, ROI, CPA, etc.)
- Funnel Pyramid (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–æ—Ä–æ–Ω–∫–∏)
- Campaigns Table (—Ç–∞–±–ª–∏—Ü–∞ –∫–∞–º–ø–∞–Ω–∏–π)
- Charts (–≥—Ä–∞—Ñ–∏–∫–∏ –ø–æ –¥–Ω—è–º)

### 5.3 –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –î–∞–Ω–Ω—ã—Ö –¥–ª—è –í–æ—Ä–æ–Ω–æ–∫

**–ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫ –∫–∞–∫–æ–π –≤–æ—Ä–æ–Ω–∫–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫–∞–º–ø–∞–Ω–∏—è**:
```sql
-- –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ UTM campaign
utm_campaign LIKE '%one-day%' -> –û–¥–Ω–æ–¥–Ω–µ–≤–Ω–∏–∫
utm_campaign LIKE '%three-day%' -> –¢—Ä–µ—Ö–¥–Ω–µ–≤–Ω–∏–∫
utm_campaign LIKE '%express%' -> –≠–∫—Å–ø—Ä–µ—Å—Å-–∫—É—Ä—Å

-- –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é –ø—Ä–æ–¥—É–∫—Ç–∞ –≤ AmoCRM
product_name = '–û–¥–Ω–æ–¥–Ω–µ–≤–Ω–∏–∫' -> one-day
product_name = '–¢—Ä–µ—Ö–¥–Ω–µ–≤–Ω–∏–∫' -> three-day
product_name = '–≠–∫—Å–ø—Ä–µ—Å—Å-–∫—É—Ä—Å' -> express-course
```

**–≠–Ω–¥–ø–æ–∏–Ω—Ç**:
```
GET /api/traffic/funnel-analytics?funnel=express-course&period=7d&teamId=123
```

---

## üèóÔ∏è –§–ê–ó–ê 6: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞ YouTube –∏ TikTok

### 6.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Multi-Platform

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –¢–æ–ª—å–∫–æ Facebook Ads

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:

```typescript
type TrafficSource = 'facebook' | 'youtube' | 'tiktok' | 'google';

interface Campaign {
  id: string;
  name: string;
  source: TrafficSource; // –û—Ç–∫—É–¥–∞ –∫–∞–º–ø–∞–Ω–∏—è
  funnel: FunnelType; // –ö –∫–∞–∫–æ–π –≤–æ—Ä–æ–Ω–∫–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è
  status: 'active' | 'paused' | 'completed';
  metrics: FunnelMetrics;
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
}
```

### 6.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å YouTube Ads

**API**: YouTube Data API v3 + Google Ads API

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ**:
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OAuth –¥–ª—è Google
2. –ü–æ–ª—É—á–µ–Ω–∏–µ Google Ads Account ID
3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ YouTube Analytics API

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è**:
```
POST /api/youtube/connect-account
GET /api/youtube/campaigns
GET /api/youtube/campaign-metrics?campaignId=xxx
```

**–ú–µ—Ç—Ä–∏–∫–∏ YouTube**:
- –ü—Ä–æ—Å–º–æ—Ç—Ä—ã –≤–∏–¥–µ–æ
- View Rate (%)
- CPV (Cost Per View)
- –ö–ª–∏–∫–∏ –ø–æ —Å—Å—ã–ª–∫–∞–º
- –ö–æ–Ω–≤–µ—Ä—Å–∏–∏

### 6.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TikTok Ads

**API**: TikTok Marketing API

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ**:
1. TikTok Business Account
2. App ID + Secret –¥–ª—è API
3. Access Token

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è**:
```
POST /api/tiktok/connect-account
GET /api/tiktok/campaigns
GET /api/tiktok/campaign-metrics?campaignId=xxx
```

**–ú–µ—Ç—Ä–∏–∫–∏ TikTok**:
- –ü—Ä–æ—Å–º–æ—Ç—Ä—ã
- –õ–∞–π–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —à–µ—Ä—ã
- Click-through rate
- Conversions
- CPC, CPM

### 6.4 Unified Dashboard –¥–ª—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `src/components/traffic/MultiPlatformDashboard.tsx`

**–§–∏–ª—å—Ç—Ä—ã**:
```tsx
<Filters>
  {/* –í—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ */}
  <Select>
    <option value="all">–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</option>
    <option value="facebook">Facebook</option>
    <option value="youtube">YouTube</option>
    <option value="tiktok">TikTok</option>
  </Select>

  {/* –í—ã–±–æ—Ä –≤–æ—Ä–æ–Ω–∫–∏ */}
  <Select>
    <option value="all">–í—Å–µ –≤–æ—Ä–æ–Ω–∫–∏</option>
    <option value="one-day">–û–¥–Ω–æ–¥–Ω–µ–≤–Ω–∏–∫</option>
    <option value="three-day">–¢—Ä–µ—Ö–¥–Ω–µ–≤–Ω–∏–∫</option>
    <option value="express-course">–≠–∫—Å–ø—Ä–µ—Å—Å-–∫—É—Ä—Å</option>
  </Select>

  {/* –ü–µ—Ä–∏–æ–¥ */}
  <DateRangePicker />
</Filters>
```

---

## üèóÔ∏è –§–ê–ó–ê 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¢–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞

### 7.1 –†–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" –¥–ª—è –¢–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞

**–õ–æ–∫–∞—Ü–∏—è**: `/traffic/settings` (–¥–æ—Å—Ç—É–ø–Ω–æ —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥—É –≤ –µ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–µ)

**–ß—Ç–æ –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥**:

**1. UTM Sources (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏–º–∏ –º–µ—Ç–∫–∞–º–∏)**:
```typescript
interface UTMSourceSettings {
  teamId: string;
  sources: {
    name: string; // "Facebook Kenesary Main"
    utm_source: string; // "fb_kenesary_main"
    platform: TrafficSource; // "facebook"
    isActive: boolean;
  }[];
}
```

**UI**:
- –°–ø–∏—Å–æ–∫ UTM sources —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞
- –ö–Ω–æ–ø–∫–∞ "+ –î–æ–±–∞–≤–∏—Ç—å UTM source"
- –§–æ—Ä–º–∞:
  - –ù–∞–∑–≤–∞–Ω–∏–µ (–¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)
  - UTM source –º–µ—Ç–∫–∞
  - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ (Facebook/YouTube/TikTok)
  - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–≤–∫–ª/–≤—ã–∫–ª)

**2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤**:

```typescript
interface AdAccountSettings {
  facebook: {
    accountId: string;
    accessToken: string; // –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π
    status: 'connected' | 'disconnected';
  }[];
  youtube: {
    accountId: string;
    refreshToken: string; // –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π
    status: 'connected' | 'disconnected';
  }[];
  tiktok: {
    accountId: string;
    accessToken: string; // –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π
    status: 'connected' | 'disconnected';
  }[];
}
```

**UI**:
- –†–∞–∑–¥–µ–ª "–ú–æ–∏ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã"
- –î–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
  - –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å Facebook Ads"
  - –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å YouTube Ads"
  - –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å TikTok Ads"
- OAuth flow –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –°–ø–∏—Å–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º

---

## üèóÔ∏è –§–ê–ó–ê 8: –ö—É—Ä—Å—ã –í–∞–ª—é—Ç

### 8.1 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ö—É—Ä—Å–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù—É–∂–Ω–æ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫—É—Ä—Å USD -> KZT

**–†–µ—à–µ–Ω–∏–µ**:

**API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: https://api.exchangerate-api.com/v4/latest/USD
- –ò–ª–∏: National Bank of Kazakhstan API

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î**:
```sql
CREATE TABLE exchange_rates (
  id SERIAL PRIMARY KEY,
  date DATE NOT NULL UNIQUE,
  usd_to_kzt DECIMAL(10, 4) NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);
```

**Cron Job (–Ω–∞ –±—ç–∫–µ–Ω–¥–µ)**:
```typescript
// –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:01 –ø–æ –ê—Å—Ç–∞–Ω–µ
cron.schedule('1 0 * * *', async () => {
  const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
  const data = await response.json();
  const rate = data.rates.KZT;

  await db.query(`
    INSERT INTO exchange_rates (date, usd_to_kzt)
    VALUES (CURRENT_DATE, $1)
    ON CONFLICT (date) DO UPDATE SET usd_to_kzt = $1
  `, [rate]);
});
```

### 8.2 –£—á–µ—Ç –ö—É—Ä—Å–∞ –≤ –†–∞—Å—á–µ—Ç–∞—Ö

**–ü—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –º–µ—Ç—Ä–∏–∫**:
```typescript
// –ü–æ–ª—É—á–∞–µ–º –∫—É—Ä—Å –Ω–∞ –¥–∞—Ç—É –∫–∞–º–ø–∞–Ω–∏–∏
const rate = await getExchangeRate(campaignDate);

// –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º spend (–µ—Å–ª–∏ –≤ KZT)
const spendUSD = campaign.spend_kzt / rate;

// –°—á–∏—Ç–∞–µ–º ROAS
const roas = campaign.revenue_usd / spendUSD;
```

**–≠–Ω–¥–ø–æ–∏–Ω—Ç**:
```
GET /api/exchange-rate?date=2025-12-30
-> { date: "2025-12-30", usd_to_kzt: 485.50 }
```

---

## üèóÔ∏è –§–ê–ó–ê 9: –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∏ –î–∏–∞–ø–∞–∑–æ–Ω—ã –î–∞—Ç

### 9.1 –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∫–∞–∫ –≤ Facebook Ads

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: React DateRangePicker (–∏–ª–∏ react-day-picker)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- –í—ã–±–æ—Ä –æ–¥–Ω–æ–π –¥–∞—Ç—ã
- –í—ã–±–æ—Ä –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç (date range)
- –ü—Ä–µ—Å–µ—Ç—ã:
  - –°–µ–≥–æ–¥–Ω—è
  - –í—á–µ—Ä–∞
  - –ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
  - –ü–æ—Å–ª–µ–¥–Ω–∏–µ 14 –¥–Ω–µ–π
  - –ü–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π
  - –≠—Ç–æ—Ç –º–µ—Å—è—Ü
  - –ü—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü
  - –ö–∞—Å—Ç–æ–º–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω

**UI Example**:
```tsx
<DateRangeSelector
  value={dateRange}
  onChange={handleDateChange}
  presets={[
    { label: '–°–µ–≥–æ–¥–Ω—è', value: 'today' },
    { label: '–ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π', value: '7d' },
    { label: '–ü–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π', value: '30d' },
    { label: '–≠—Ç–æ—Ç –º–µ—Å—è—Ü', value: 'this-month' },
  ]}
/>
```

### 9.2 –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ –î–∞–Ω–Ω—ã—Ö –ø–æ –î–∞—Ç–∞–º

**–õ–æ–≥–∏–∫–∞**:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç
2. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
   ```
   GET /api/traffic/funnel-analytics?start=2025-12-01&end=2025-12-30
   ```
3. Backend:
   - –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Facebook/YouTube/TikTok API –∑–∞ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥
   - –ü–æ–ª—É—á–∞–µ—Ç —Å–¥–µ–ª–∫–∏ –∏–∑ AmoCRM –∑–∞ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ (–ø–æ `created_at` –∏–ª–∏ `closed_at`)
   - –ü–æ–ª—É—á–∞–µ—Ç –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç –∑–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø–µ—Ä–∏–æ–¥–∞
   - –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç –ø–æ –¥–Ω—è–º/–Ω–µ–¥–µ–ª—è–º/–º–µ—Å—è—Ü–∞–º

**–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö**:
```typescript
interface DailyMetrics {
  date: string; // "2025-12-01"
  spend: number;
  revenue: number;
  profit: number;
  roas: number;
  leads: number;
  purchases: number;
  exchangeRate: number; // –ö—É—Ä—Å –Ω–∞ —ç—Ç—É –¥–∞—Ç—É
}
```

### 9.3 –ì—Ä–∞—Ñ–∏–∫–∏ –ø–æ –î–Ω—è–º

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: Recharts –∏–ª–∏ Chart.js

**–¢–∏–ø—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤**:
1. **Line Chart**: Revenue, Spend, Profit –ø–æ –¥–Ω—è–º
2. **Bar Chart**: Leads, Purchases –ø–æ –¥–Ω—è–º
3. **Area Chart**: ROAS —Ç—Ä–µ–Ω–¥
4. **Combo Chart**: Revenue vs Spend

---

## üèóÔ∏è –§–ê–ó–ê 10: Best Practice –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –ú–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–æ–≤

### 10.1 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ú–µ—Ç—Ä–∏–∫–∏

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏** (—É–∂–µ –µ—Å—Ç—å):
- CPM, CPC, CTR
- Leads, Purchases
- ROAS, ROI
- Revenue, Profit

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:

**1. Audience Metrics**:
- Frequency (—á–∞—Å—Ç–æ—Ç–∞ –ø–æ–∫–∞–∑–∞)
- Reach (–æ—Ö–≤–∞—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- Unique Link Clicks
- Cost per Unique Click

**2. Engagement Metrics**:
- Post Engagement Rate
- Video Watch Time
- Video Completion Rate
- Social Engagement (likes, comments, shares)

**3. Conversion Funnel**:
- Landing Page View Rate
- Add to Cart Rate
- Initiate Checkout Rate
- Purchase Completion Rate
- Cart Abandonment Rate

**4. Lifetime Value**:
- Customer Lifetime Value (LTV)
- Payback Period (—á–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –æ–∫—É–ø–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç)
- Repeat Purchase Rate
- Churn Rate

**5. Attribution Metrics**:
- First Touch Attribution
- Last Touch Attribution
- Multi-Touch Attribution (–µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Å–∞–Ω–∏–π)

**6. Quality Metrics**:
- Quality Score (–¥–ª—è Google Ads)
- Relevance Score (–¥–ª—è Facebook)
- Ad Rank
- Landing Page Experience

### 10.2 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –ú–µ—Ç—Ä–∏–∫

**–§–∞–π–ª**: `src/components/traffic/AdvancedMetricsGrid.tsx`

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ—Ç—Ä–∏–∫**:
```tsx
<MetricsSection title="Performance">
  <MetricCard label="ROAS" value={2.5} trend="up" />
  <MetricCard label="ROI" value={150} suffix="%" trend="up" />
  <MetricCard label="CPA" value={25.50} prefix="$" trend="down" />
</MetricsSection>

<MetricsSection title="Audience">
  <MetricCard label="Reach" value={50000} />
  <MetricCard label="Frequency" value={2.3} />
  <MetricCard label="Unique CTR" value={3.2} suffix="%" />
</MetricsSection>

<MetricsSection title="Conversion Funnel">
  <FunnelMetric stage="Landing Page Views" value={1000} rate={100} />
  <FunnelMetric stage="Add to Cart" value={300} rate={30} />
  <FunnelMetric stage="Purchases" value={100} rate={10} />
</MetricsSection>
```

---

## üèóÔ∏è –§–ê–ó–ê 11: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –∏ API

### 11.1 –¢–∞–±–ª–∏—Ü—ã –ë–î

**1. traffic_teams** (–∫–æ–º–∞–Ω–¥—ã —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–æ–≤):
```sql
CREATE TABLE traffic_teams (
  id SERIAL PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  responsible_name VARCHAR(255) NOT NULL,
  password_hash TEXT NOT NULL,
  utm_sources JSONB DEFAULT '[]', -- ["fb_kenesary", "yt_kenesary"]
  color VARCHAR(7) DEFAULT '#00FF88',
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

**2. ad_accounts** (—Ä–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã):
```sql
CREATE TABLE ad_accounts (
  id SERIAL PRIMARY KEY,
  team_id INT REFERENCES traffic_teams(id),
  platform VARCHAR(50) NOT NULL, -- 'facebook', 'youtube', 'tiktok'
  account_id VARCHAR(255) NOT NULL,
  access_token_encrypted TEXT NOT NULL,
  refresh_token_encrypted TEXT,
  status VARCHAR(50) DEFAULT 'connected',
  last_sync TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);
```

**3. campaigns** (–∫–∞–º–ø–∞–Ω–∏–∏):
```sql
CREATE TABLE campaigns (
  id SERIAL PRIMARY KEY,
  team_id INT REFERENCES traffic_teams(id),
  ad_account_id INT REFERENCES ad_accounts(id),
  platform VARCHAR(50) NOT NULL,
  campaign_id_external VARCHAR(255) NOT NULL, -- ID –≤ Facebook/YouTube/TikTok
  name VARCHAR(255) NOT NULL,
  funnel_type VARCHAR(50), -- 'one-day', 'three-day', 'express-course'
  status VARCHAR(50) DEFAULT 'active',
  utm_source VARCHAR(255),
  utm_medium VARCHAR(255),
  utm_campaign VARCHAR(255),
  created_at TIMESTAMP DEFAULT NOW()
);
```

**4. daily_metrics** (–º–µ—Ç—Ä–∏–∫–∏ –ø–æ –¥–Ω—è–º):
```sql
CREATE TABLE daily_metrics (
  id SERIAL PRIMARY KEY,
  campaign_id INT REFERENCES campaigns(id),
  date DATE NOT NULL,

  -- Spend
  spend_usd DECIMAL(10, 2) DEFAULT 0,
  spend_kzt DECIMAL(10, 2) DEFAULT 0,
  exchange_rate DECIMAL(10, 4),

  -- Traffic
  impressions INT DEFAULT 0,
  clicks INT DEFAULT 0,
  ctr DECIMAL(5, 2) DEFAULT 0,
  cpc DECIMAL(10, 2) DEFAULT 0,
  cpm DECIMAL(10, 2) DEFAULT 0,

  -- Leads
  leads INT DEFAULT 0,
  cpl DECIMAL(10, 2) DEFAULT 0,

  -- Sales
  purchases INT DEFAULT 0,
  revenue_usd DECIMAL(10, 2) DEFAULT 0,
  cpa DECIMAL(10, 2) DEFAULT 0,

  -- Performance
  roas DECIMAL(10, 2) DEFAULT 0,
  roi DECIMAL(10, 2) DEFAULT 0,

  -- Advanced
  reach INT DEFAULT 0,
  frequency DECIMAL(5, 2) DEFAULT 0,
  engagement_rate DECIMAL(5, 2) DEFAULT 0,

  UNIQUE(campaign_id, date),
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 11.2 API Endpoints

**–ö–æ–º–∞–Ω–¥—ã**:
```
GET    /api/teams                    - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
POST   /api/teams                    - –°–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É
PUT    /api/teams/:id                - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
DELETE /api/teams/:id                - –£–¥–∞–ª–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
GET    /api/teams/:id/utm-sources    - UTM sources –∫–æ–º–∞–Ω–¥—ã
POST   /api/teams/:id/utm-sources    - –î–æ–±–∞–≤–∏—Ç—å UTM source
```

**–†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã**:
```
GET    /api/ad-accounts              - –°–ø–∏—Å–æ–∫ –∫–∞–±–∏–Ω–µ—Ç–æ–≤
POST   /api/ad-accounts/facebook     - –ü–æ–¥–∫–ª—é—á–∏—Ç—å Facebook
POST   /api/ad-accounts/youtube      - –ü–æ–¥–∫–ª—é—á–∏—Ç—å YouTube
POST   /api/ad-accounts/tiktok       - –ü–æ–¥–∫–ª—é—á–∏—Ç—å TikTok
DELETE /api/ad-accounts/:id          - –û—Ç–∫–ª—é—á–∏—Ç—å –∫–∞–±–∏–Ω–µ—Ç
GET    /api/ad-accounts/:id/status   - –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```

**–ö–∞–º–ø–∞–Ω–∏–∏**:
```
GET    /api/campaigns                - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞–º–ø–∞–Ω–∏–π
GET    /api/campaigns/:id            - –î–µ—Ç–∞–ª–∏ –∫–∞–º–ø–∞–Ω–∏–∏
POST   /api/campaigns/sync           - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏
```

**–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**:
```
GET /api/analytics/funnel?funnel=express-course&period=7d
GET /api/analytics/source?utm_source=fb_kenesary&start=2025-12-01&end=2025-12-30
GET /api/analytics/team/:teamId?start=2025-12-01&end=2025-12-30
GET /api/analytics/platform/:platform?start=2025-12-01&end=2025-12-30
GET /api/analytics/daily?campaignId=123&start=2025-12-01&end=2025-12-30
```

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```
GET /api/diagnostics/amocrm           - –°—Ç–∞—Ç—É—Å AmoCRM
GET /api/diagnostics/facebook         - –°—Ç–∞—Ç—É—Å Facebook API
GET /api/diagnostics/youtube          - –°—Ç–∞—Ç—É—Å YouTube API
GET /api/diagnostics/tiktok           - –°—Ç–∞—Ç—É—Å TikTok API
POST /api/diagnostics/test-connection - –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```

---

## üèóÔ∏è –§–ê–ó–ê 12: Frontend –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 12.1 –ù–æ–≤—ã–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**1. MultiPlatformSelector.tsx**:
- –í—ã–±–æ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (Facebook/YouTube/TikTok)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –ò–∫–æ–Ω–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º

**2. FunnelTabs.tsx**:
- –í–∫–ª–∞–¥–∫–∏: –û–¥–Ω–æ–¥–Ω–µ–≤–Ω–∏–∫, –¢—Ä–µ—Ö–¥–Ω–µ–≤–Ω–∏–∫, –≠–∫—Å–ø—Ä–µ—Å—Å-–∫—É—Ä—Å
- –°—á–µ—Ç—á–∏–∫–∏: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π –Ω–∞ –∫–∞–∂–¥–æ–π –≤–æ—Ä–æ–Ω–∫–µ

**3. DateRangeCalendar.tsx**:
- –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º–∏
- –ü—Ä–µ—Å–µ—Ç—ã
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

**4. AdvancedMetricsGrid.tsx**:
- –°–µ—Ç–∫–∞ —Å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –¢—Ä–µ–Ω–¥—ã (–≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑/—Å—Ç–∞–±–∏–ª—å–Ω–æ)

**5. CampaignTable.tsx**:
- –¢–∞–±–ª–∏—Ü–∞ –∫–∞–º–ø–∞–Ω–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º
- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV
- Inline —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

**6. AdAccountManager.tsx**:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–Ω—ã–º–∏ –∫–∞–±–∏–Ω–µ—Ç–∞–º–∏
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö
- –°—Ç–∞—Ç—É—Å—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

**7. UTMSourcesManager.tsx**:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UTM –º–µ—Ç–∫–∞–º–∏ —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º

**8. DailyChart.tsx**:
- –ì—Ä–∞—Ñ–∏–∫–∏ –º–µ—Ç—Ä–∏–∫ –ø–æ –¥–Ω—è–º
- –í—ã–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ó—É–º, —Ç—É–ª—Ç–∏–ø—ã, –ª–µ–≥–µ–Ω–¥–∞

### 12.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –°—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö

**TrafficAdminPanel.tsx**:
- –£–±—Ä–∞—Ç—å –≤–∫–ª–∞–¥–∫—É "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" –∏–∑ —Ç–∞–±–æ–≤
- –°–¥–µ–ª–∞—Ç—å "–¢–∞—Ä–≥–µ—Ç Dashboard" –≥–ª–∞–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–æ–π
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**TrafficCabinetLayout.tsx** (—Å–∞–π–¥–±–∞—Ä):
- –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ä–∞–∑–¥–µ–ª—ã
- –î–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫–∏ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º
- –î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫–∏ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π)

**TargetDashboardContent.tsx**:
- –î–æ–±–∞–≤–∏—Ç—å FunnelTabs
- –î–æ–±–∞–≤–∏—Ç—å MultiPlatformSelector
- –î–æ–±–∞–≤–∏—Ç—å DateRangeCalendar
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å AdvancedMetricsGrid

---

## üèóÔ∏è –§–ê–ó–ê 13: Backend Services

### 13.1 –ù–æ–≤—ã–µ –°–µ—Ä–≤–∏—Å—ã

**1. FacebookAdsService.ts** (—É–∂–µ –µ—Å—Ç—å, –Ω—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å):
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–º–ø–∞–Ω–∏–π
- –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∑–∞ –ø–µ—Ä–∏–æ–¥
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

**2. YouTubeAdsService.ts** (–Ω–æ–≤—ã–π):
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Google Ads Account
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è YouTube –∫–∞–º–ø–∞–Ω–∏–π
- –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤–∏–¥–µ–æ-—Ä–µ–∫–ª–∞–º—ã

**3. TikTokAdsService.ts** (–Ω–æ–≤—ã–π):
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ TikTok Business Account
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è TikTok –∫–∞–º–ø–∞–Ω–∏–π
- –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫

**4. ExchangeRateService.ts** (–Ω–æ–≤—ã–π):
- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–∞ –Ω–∞ –¥–∞—Ç—É
- –ò—Å—Ç–æ—Ä–∏—è –∫—É—Ä—Å–æ–≤

**5. AnalyticsService.ts** (—Ä–∞—Å—à–∏—Ä–∏—Ç—å):
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –ø–æ –≤–æ—Ä–æ–Ω–∫–∞–º
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤

**6. UTMTrackerService.ts** (–Ω–æ–≤—ã–π):
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ UTM
- –ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –ª–∏–¥–æ–≤ –∫–æ–º–∞–Ω–¥–∞–º
- –ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂ –∫–æ–º–∞–Ω–¥–∞–º

### 13.2 Cron Jobs

**1. Daily Sync Job** (–∫–∞–∂–¥—ã–π —á–∞—Å):
```typescript
// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º
cron.schedule('0 * * * *', async () => {
  await FacebookAdsService.syncAllCampaigns();
  await YouTubeAdsService.syncAllCampaigns();
  await TikTokAdsService.syncAllCampaigns();
});
```

**2. Exchange Rate Update** (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å):
```typescript
cron.schedule('1 0 * * *', async () => {
  await ExchangeRateService.updateDailyRate();
});
```

**3. AmoCRM Sync** (–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç):
```typescript
cron.schedule('*/15 * * * *', async () => {
  await AmoCRMService.syncNewDeals();
});
```

---

## üìã –ò–¢–û–ì–û–í–´–ô –ß–ï–ö–õ–ò–°–¢ –ó–ê–î–ê–ß

### ‚úÖ –§–ê–ó–ê 1: –û—á–∏—Å—Ç–∫–∞ UI
- [ ] –£–±—Ä–∞—Ç—å "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" –∏–∑ –≤–∫–ª–∞–¥–æ–∫ TrafficAdminPanel
- [ ] –û—Å—Ç–∞–≤–∏—Ç—å "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" —Ç–æ–ª—å–∫–æ –≤ —Å–∞–π–¥–±–∞—Ä–µ
- [ ] –†–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å–∞–π–¥–±–∞—Ä (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞, –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)

### ‚úÖ –§–ê–ó–ê 2: –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ü—Ä–æ–¥–∞–∂
- [ ] –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ AmoCRM –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î (landing_bd, traffic_bd, tripwire_bd)
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç SourcesAnalytics.tsx
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ AmoCRM + –ë–î
- [ ] –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ UTM sources
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫: –ª–∏–¥—ã, –ø—Ä–æ–¥–∞–∂–∏, –∫–æ–Ω–≤–µ—Ä—Å–∏—è

### ‚úÖ –§–ê–ó–ê 3: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ö–æ–º–∞–Ω–¥
- [ ] –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É (–æ–¥–Ω–æ –æ–∫–Ω–æ)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø–∞—Ä–æ–ª—è
- [ ] –ú—É–ª—å—Ç–∏-—Å–µ–ª–µ–∫—Ç –¥–ª—è UTM sources
- [ ] Color picker –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ traffic_teams)

### ‚úÖ –§–ê–ó–ê 4: API –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç APIDiagnostics.tsx
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ API
- [ ] –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ (–∑–µ–ª–µ–Ω—ã–π/–∂–µ–ª—Ç—ã–π/–∫—Ä–∞—Å–Ω—ã–π)
- [ ] –ö–Ω–æ–ø–∫–∏ "–û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω", "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"

### ‚úÖ –§–ê–ó–ê 5: –¢–∞—Ä–≥–µ—Ç Dashboard - –í–æ—Ä–æ–Ω–∫–∏
- [ ] –°–æ–∑–¥–∞—Ç—å FunnelTabs.tsx (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–æ—Ä–æ–Ω–∫–∞–º–∏)
- [ ] –°–æ–∑–¥–∞—Ç—å FunnelDashboardView.tsx (–¥–∞—à–±–æ—Ä–¥ –¥–ª—è –æ–¥–Ω–æ–π –≤–æ—Ä–æ–Ω–∫–∏)
- [ ] –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–æ—Ä–æ–Ω–∫–∏ –ø–æ UTM/–ø—Ä–æ–¥—É–∫—Ç—É
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/analytics/funnel`
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –¥–ª—è –∫–∞–∂–¥–æ–π –≤–æ—Ä–æ–Ω–∫–∏

### ‚úÖ –§–ê–ó–ê 6: YouTube –∏ TikTok
- [ ] –°–æ–∑–¥–∞—Ç—å YouTubeAdsService.ts
- [ ] –°–æ–∑–¥–∞—Ç—å TikTokAdsService.ts
- [ ] OAuth flow –¥–ª—è YouTube
- [ ] OAuth flow –¥–ª—è TikTok
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–º–ø–∞–Ω–∏–π
- [ ] –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫

### ‚úÖ –§–ê–ó–ê 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¢–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/traffic/settings`
- [ ] –†–∞–∑–¥–µ–ª "–ú–æ–∏ UTM sources"
- [ ] CRUD –¥–ª—è UTM sources
- [ ] –†–∞–∑–¥–µ–ª "–†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã"
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Facebook/YouTube/TikTok
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏

### ‚úÖ –§–ê–ó–ê 8: –ö—É—Ä—Å—ã –í–∞–ª—é—Ç
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É exchange_rates
- [ ] –°–æ–∑–¥–∞—Ç—å ExchangeRateService.ts
- [ ] Cron job –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/exchange-rate?date=xxx`
- [ ] –£—á–µ—Ç –∫—É—Ä—Å–∞ –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö ROAS/ROI

### ‚úÖ –§–ê–ó–ê 9: –ö–∞–ª–µ–Ω–¥–∞—Ä—å
- [ ] –°–æ–∑–¥–∞—Ç—å DateRangeCalendar.tsx
- [ ] –ü—Ä–µ—Å–µ—Ç—ã (7d, 14d, 30d, –∏ —Ç.–¥.)
- [ ] –ö–∞—Å—Ç–æ–º–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ start/end
- [ ] –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –ø–æ –¥–Ω—è–º

### ‚úÖ –§–ê–ó–ê 10: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ú–µ—Ç—Ä–∏–∫–∏
- [ ] –°–æ–∑–¥–∞—Ç—å AdvancedMetricsGrid.tsx
- [ ] Audience Metrics (Reach, Frequency)
- [ ] Engagement Metrics
- [ ] Conversion Funnel Metrics
- [ ] LTV, Payback Period
- [ ] Attribution Metrics

### ‚úÖ –§–ê–ó–ê 11: –ë–î –∏ API
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É traffic_teams
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É ad_accounts
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É campaigns
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É daily_metrics
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏–∑ —Å–ø–∏—Å–∫–∞

### ‚úÖ –§–ê–ó–ê 12: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] MultiPlatformSelector.tsx
- [ ] FunnelTabs.tsx
- [ ] DateRangeCalendar.tsx
- [ ] AdvancedMetricsGrid.tsx
- [ ] CampaignTable.tsx
- [ ] AdAccountManager.tsx
- [ ] UTMSourcesManager.tsx
- [ ] DailyChart.tsx

### ‚úÖ –§–ê–ó–ê 13: Backend
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å FacebookAdsService.ts
- [ ] –°–æ–∑–¥–∞—Ç—å YouTubeAdsService.ts
- [ ] –°–æ–∑–¥–∞—Ç—å TikTokAdsService.ts
- [ ] –°–æ–∑–¥–∞—Ç—å ExchangeRateService.ts
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å AnalyticsService.ts
- [ ] –°–æ–∑–¥–∞—Ç—å UTMTrackerService.ts
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Cron Jobs

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´

**High Priority** (—Å–¥–µ–ª–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞):
1. –§–ê–ó–ê 1: –û—á–∏—Å—Ç–∫–∞ UI
2. –§–ê–ó–ê 2: –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ü—Ä–æ–¥–∞–∂
3. –§–ê–ó–ê 3: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ö–æ–º–∞–Ω–¥
4. –§–ê–ó–ê 5: –í–æ—Ä–æ–Ω–∫–∏
5. –§–ê–ó–ê 8: –ö—É—Ä—Å—ã –í–∞–ª—é—Ç
6. –§–ê–ó–ê 9: –ö–∞–ª–µ–Ω–¥–∞—Ä—å

**Medium Priority** (–ø–æ—Å–ª–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ):
7. –§–ê–ó–ê 4: API –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
8. –§–ê–ó–ê 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¢–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∞
9. –§–ê–ó–ê 10: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ú–µ—Ç—Ä–∏–∫–∏

**Low Priority** (–∫–æ–≥–¥–∞ –æ—Å–Ω–æ–≤–Ω–æ–µ –≥–æ—Ç–æ–≤–æ):
10. –§–ê–ó–ê 6: YouTube –∏ TikTok (–º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å YouTube)

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

1. **–ù–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—Ä–æ–∫–∏** - –ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–µ–º –ø–æ –ø–ª–∞–Ω—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
2. **–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î** - –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –∑–∞ –≤—Å–µ –¥–∞—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ª—é–±–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
3. **API –ø–µ—Ä–µ–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ** - Facebook/YouTube/TikTok API –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
4. **AmoCRM - –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ–¥–∞–∂** - –≤—Å–µ –ø—Ä–æ–¥–∞–∂–∏ –∏–¥—É—Ç –æ—Ç—Ç—É–¥–∞ —Å UTM –º–µ—Ç–∫–∞–º–∏
5. **–ö—É—Ä—Å –≤–∞–ª—é—Ç –ø–æ—Å—É—Ç–æ—á–Ω–æ** - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å–≤–æ–π –∫—É—Ä—Å –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤
