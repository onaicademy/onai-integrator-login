# üöÄ –°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Telegram –≥—Ä—É–ø–ø—ã –ø–æ –∫–æ–¥—É 2134 - –ì–û–¢–û–í–ê!

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

–Ø —Å–æ–∑–¥–∞–ª –ø–æ–ª–Ω—É—é —Å–∏—Å—Ç–µ–º—É, –≥–¥–µ —Ç—ã –ø—Ä–æ—Å—Ç–æ –≤–≤–æ–¥–∏—à—å –∫–æ–¥ **2134** –≤ Telegram –≥—Ä—É–ø–ø–µ, –∏ –≤—Å–µ –∑–∞—è–≤–∫–∏ —Å –ª–µ–Ω–¥–∏–Ω–≥–æ–≤ (ProfTest + ExpressCourse) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç —Ç—É–¥–∞! üéâ

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

#### üì± –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥:
1. `backend/src/routes/telegram-leads.ts` - –ë–æ—Ç –¥–ª—è –ª–∏–¥–æ–≤ —Å –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π –ø–æ –∫–æ–¥—É
2. `backend/src/services/telegramService.ts` - –û–±–Ω–æ–≤–ª–µ–Ω (—Ç–µ–ø–µ—Ä—å —á–∏—Ç–∞–µ—Ç –≥—Ä—É–ø–ø—ã –∏–∑ –ë–î)
3. `backend/src/server.ts` - –ü–æ–¥–∫–ª—é—á–µ–Ω –Ω–æ–≤—ã–π —Ä–æ—É—Ç–µ—Ä
4. `backend/supabase/migrations/create_telegram_groups.sql` - –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î

#### üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ–±—è:
1. **`APPLY_MIGRATION_NOW.md`** ‚ö° - –ù–ê–ß–ù–ò –û–¢–°–Æ–î–ê! –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫ –ë–î (5 –º–∏–Ω—É—Ç)
2. **`TELEGRAM_LEADS_BOT_SETUP.md`** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –±–æ—Ç–∞
3. **`TELEGRAM_BOT_READY.md`** - –°–≤–æ–¥–∫–∞ —á—Ç–æ –≥–æ—Ç–æ–≤–æ + –∫–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–° (3 —à–∞–≥–∞):

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏—é (2 –º–∏–Ω—É—Ç—ã) ‚ö°

**–ß–∏—Ç–∞–π:** `APPLY_MIGRATION_NOW.md`

**–ö—Ä–∞—Ç–∫–æ:**
1. –û—Ç–∫—Ä–æ–π: https://supabase.com/dashboard/project/xikaiavwqinamgolmtcy/sql/new
2. –°–∫–æ–ø–∏—Ä—É–π SQL –∏–∑: `backend/supabase/migrations/create_telegram_groups.sql`
3. –í—Å—Ç–∞–≤—å –∏ –Ω–∞–∂–º–∏ **Run**
4. –ì–æ—Ç–æ–≤–æ! ‚úÖ

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend (30 —Å–µ–∫—É–Ω–¥)

```bash
cd backend
npm run dev
# –∏–ª–∏ –µ—Å–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
pm2 restart backend
```

### –®–∞–≥ 3: –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É –≤ Telegram (1 –º–∏–Ω—É—Ç–∞)

1. –û—Ç–∫—Ä–æ–π —Å–≤–æ—é –≥—Ä—É–ø–ø—É "–õ–∏–¥—ã –¢—Ä–∏–ø–≤–∞–µ—Ä" –≤ Telegram
2. –£–±–µ–¥–∏—Å—å —á—Ç–æ –±–æ—Ç —Ç–∞–º –∞–¥–º–∏–Ω (–µ—Å–ª–∏ –Ω–µ—Ç - —Å–¥–µ–ª–∞–π –∞–¥–º–∏–Ω–æ–º)
3. –û—Ç–ø—Ä–∞–≤—å –≤ –≥—Ä—É–ø–ø—É: **`2134`**
4. –ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç:

```
‚úÖ –ë–û–¢ –ê–ö–¢–ò–í–ò–†–û–í–ê–ù!

üìç Chat ID: -1003505301432
üè∑Ô∏è –ì—Ä—É–ø–ø–∞: –õ–∏–¥—ã –¢—Ä–∏–ø–≤–∞–µ—Ä

–¢–µ–ø–µ—Ä—å –≤—Å–µ –Ω–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ —Å —Å–∞–π—Ç–∞ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —Å—é–¥–∞! üöÄ
```

**–í—Å—ë! –ì–æ—Ç–æ–≤–æ! üéâ**

## üß™ –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ API
```bash
curl -X POST http://localhost:3000/api/telegram-leads/test
```

–í –≥—Ä—É–ø–ø—É –ø—Ä–∏–¥–µ—Ç —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†–µ–∞–ª—å–Ω–∞—è –∑–∞—è–≤–∫–∞
–û—Ç–ø—Ä–∞–≤—å –∑–∞—è–≤–∫—É —Å –ª—é–±–æ–≥–æ –ª–µ–Ω–¥–∏–Ω–≥–∞:
- ProfTest: https://onai.academy/integrator/proftest
- ExpressCourse: https://onai.academy/integrator/expresscourse

–ó–∞—è–≤–∫–∞ –ø—Ä–∏–¥–µ—Ç –≤ Telegram –≤ —Ç–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:

```
üéØ –ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê - üéì –≠–ö–°–ü–†–ï–°–° –ö–£–†–°

üë§ –ò–º—è: –ú—É—Ä–∑–∏–ª–∫–∞ –ê—Ä—ã–∫–æ–≤
üì± –¢–µ–ª–µ—Ñ–æ–Ω: +7 777 123 45 67
üìß Email: test@example.com
üí≥ –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã: üí≥ Kaspi –±–∞–Ω–∫
üìç –ò—Å—Ç–æ—á–Ω–∏–∫: expresscourse

‚è∞ 16.12.2024, 23:45
```

## ü§ñ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```
1. –¢—ã –¥–æ–±–∞–≤–∏–ª –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É –∏ —Å–¥–µ–ª–∞–ª –∞–¥–º–∏–Ω–æ–º
   ‚Üì
2. –û—Ç–ø—Ä–∞–≤–∏–ª –∫–æ–¥ "2134"
   ‚Üì
3. –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω–∏–ª chat_id –≥—Ä—É–ø–ø—ã –≤ –ë–î
   ‚Üì
4. –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–µ:
   - –ó–∞—è–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
   - Backend –≤—ã–∑—ã–≤–∞–µ—Ç sendLeadNotification()
   - –§—É–Ω–∫—Ü–∏—è —á–∏—Ç–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã –∏–∑ –ë–î
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–æ –í–°–ï –∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã
   ‚Üì
5. –õ–∏–¥ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ Telegram! üíö
```

## üì± –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø–µ:

- `2134` - –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É
- `/help` - –°–ø—Ä–∞–≤–∫–∞
- `/status` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≥—Ä—É–ø–ø—ã (–∞–∫—Ç–∏–≤–Ω–∞ –ª–∏)
- `/deactivate` - –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∏—à–∫–∏:

### ‚úÖ –ú–æ–∂–Ω–æ –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø
–î–æ–±–∞–≤—å –±–æ—Ç–∞ –≤ –¥—Ä—É–≥–∏–µ –≥—Ä—É–ø–ø—ã –∏ –æ—Ç–ø—Ä–∞–≤—å `2134` - –ª–∏–¥—ã –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤–æ –≤—Å–µ!

–ù–∞–ø—Ä–∏–º–µ—Ä:
- –ì—Ä—É–ø–ø–∞ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- –ì—Ä—É–ø–ø–∞ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
- –¢–≤–æ—è –ª–∏—á–Ω–∞—è –≥—Ä—É–ø–ø–∞

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è
–ï—Å–ª–∏ –±–æ—Ç —É–¥–∞–ª–µ–Ω –∏–∑ –≥—Ä—É–ø–ø—ã –∏–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –≥—Ä—É–ø–ø–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –≤ –ë–î.

### ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–π
–í—Å–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è:
```sql
SELECT * FROM telegram_groups ORDER BY activated_at DESC;
```

## üîß API Endpoints:

### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥—Ä—É–ø–ø:
```bash
GET http://localhost:3000/api/telegram-leads/active-groups
```

### –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
```bash
POST http://localhost:3000/api/telegram-leads/test
```

## üìä –ß—Ç–æ –±—É–¥–µ—Ç –≤ –ª–æ–≥–∞—Ö backend:

### –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≥—Ä—É–ø–ø—ã:
```
üîê Activation code received from chat -1003505301432 (–õ–∏–¥—ã –¢—Ä–∏–ø–≤–∞–µ—Ä)
‚úÖ New group -1003505301432 activated by misolabs
```

### –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ª–∏–¥–∞:
```
üì± Found 1 active group(s) for lead notifications
üì± Sending lead notification to group "–õ–∏–¥—ã –¢—Ä–∏–ø–≤–∞–µ—Ä" (-1003505301432)
‚úÖ Lead notification sent to group "–õ–∏–¥—ã –¢—Ä–∏–ø–≤–∞–µ—Ä"
üìä Lead notification results: 1 success, 0 failed out of 1 groups
```

## üéâ –ì–û–¢–û–í–û!

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–ß–ù–û –∫–∞–∫ –Ω–∞ —Ç–≤–æ–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç–µ:
1. –í–≤–æ–¥–∏—à—å –∫–æ–¥ **2134** –≤ –≥—Ä—É–ø–ø–µ
2. –ë–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏—é
3. –í—Å–µ –∑–∞—è–≤–∫–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ù–∏–∫–∞–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –º–µ–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ - –≤—Å–µ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ!** ‚úÖ

---

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:

- **`APPLY_MIGRATION_NOW.md`** - –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫ –ë–î (–ù–ê–ß–ù–ò –° –≠–¢–û–ì–û!)
- **`TELEGRAM_LEADS_BOT_SETUP.md`** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- **`TELEGRAM_BOT_READY.md`** - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ + troubleshooting

## üö® –ü—Ä–æ–±–ª–µ–º—ã?

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–¥ 2134
1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ backend: `npm run dev`
2. –£–±–µ–¥–∏—Å—å —á—Ç–æ –±–æ—Ç - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã
3. –ü—Ä–æ–≤–µ—Ä—å —Ç–æ–∫–µ–Ω: `TELEGRAM_LEADS_BOT_TOKEN` –≤ `backend/env.env`

### –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç, –Ω–æ –ª–∏–¥—ã –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç
1. –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å –≥—Ä—É–ø–ø—ã: –æ—Ç–ø—Ä–∞–≤—å `/status`
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞: `SELECT * FROM telegram_groups;`
3. –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ backend –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞?
–í—ã–ø–æ–ª–Ω–∏ –≤ Supabase SQL Editor:
```sql
SELECT * FROM telegram_groups LIMIT 10;
```

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ "table does not exist" - –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞, —á–∏—Ç–∞–π `APPLY_MIGRATION_NOW.md`

---

**üéØ –ù–ê–ß–ù–ò –° –≠–¢–û–ì–û:** –û—Ç–∫—Ä–æ–π `APPLY_MIGRATION_NOW.md` –∏ —Å–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º! üöÄ
