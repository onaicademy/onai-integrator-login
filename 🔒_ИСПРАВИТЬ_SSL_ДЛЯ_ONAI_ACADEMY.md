# üîí –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï SSL –î–õ–Ø ONAI.ACADEMY

## ‚ö†Ô∏è –¢–ï–ö–£–©–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:

```
‚ùå –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤—ã–¥–∞–Ω –¥–ª—è: onai.academy
‚ùå –ù—É–∂–µ–Ω —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è: onai.academy
```

**–ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:** "–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ –∑–∞—â–∏—â–µ–Ω–æ" –∏–ª–∏ "NET::ERR_CERT_COMMON_NAME_INVALID"

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï (5 –ú–ò–ù–£–¢):

### **–®–ê–ì 1: –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É**

```bash
ssh root@178.128.203.40
```

---

### **–®–ê–ì 2: –ü–æ–ª—É—á–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è onai.academy**

```bash
# –ü–æ–ª—É—á–∞–µ–º –Ω–æ–≤—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è onai.academy
sudo certbot --nginx -d onai.academy -d www.onai.academy
```

**Certbot —Å–ø—Ä–æ—Å–∏—Ç:**
1. **Email:** –í–≤–µ–¥–∏ —Å–≤–æ–π email (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –≤–≤–æ–¥–∏–ª)
2. **Terms of Service:** –ù–∞–∂–º–∏ `Y`
3. **Share email:** –ù–∞ —Ç–≤–æ—ë —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ `N`
4. **Redirect HTTP to HTTPS:** –ù–∞–∂–º–∏ `2` (–î–ê)

---

### **–®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx**

```bash
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Nginx –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
sudo nginx -t

# –ï—Å–ª–∏ –≤—Å—ë –û–ö, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ Nginx
sudo systemctl reload nginx
```

---

### **–®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**

**–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
```
https://onai.academy
```

**–î–æ–ª–∂–µ–Ω –±—ã—Ç—å:**
- ‚úÖ –ó–µ–ª—ë–Ω—ã–π –∑–∞–º–æ—á–µ–∫ üîí
- ‚úÖ "–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞—â–∏—â–µ–Ω–æ"
- ‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤—ã–¥–∞–Ω Let's Encrypt –¥–ª—è `onai.academy`

---

## üîç –ü–†–û–í–ï–†–ö–ê –°–ï–†–¢–ò–§–ò–ö–ê–¢–ê

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—å:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo certbot certificates
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
Certificate Name: onai.academy
  Domains: onai.academy www.onai.academy
  Expiry Date: 2026-02-05 (–∏–ª–∏ –ø–æ–∑–∂–µ)
  Certificate Path: /etc/letsencrypt/live/onai.academy/fullchain.pem
```

---

## üö® –ï–°–õ–ò –í–û–ó–ù–ò–ö–ù–£–¢ –ü–†–û–ë–õ–ï–ú–´:

### **–ü—Ä–æ–±–ª–µ–º–∞ 1: "Too many certificates already issued"**

Let's Encrypt –ª–∏–º–∏—Ç: 5 —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –≤ –Ω–µ–¥–µ–ª—é –Ω–∞ –¥–æ–º–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
sudo certbot certificates

# –£–¥–∞–ª–∏ —Å—Ç–∞—Ä—ã–µ/–Ω–µ–Ω—É–∂–Ω—ã–µ
sudo certbot delete --cert-name onai.academy

# –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞
sudo certbot --nginx -d onai.academy
```

---

### **–ü—Ä–æ–±–ª–µ–º–∞ 2: DNS –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä**

```bash
# –ü—Ä–æ–≤–µ—Ä—å DNS
dig onai.academy

# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å A-record:
# onai.academy. 300 IN A 178.128.203.40
```

–ï—Å–ª–∏ –Ω–µ—Ç - –Ω–∞—Å—Ç—Ä–æ–π DNS –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–º:
- **Type:** A
- **Name:** @ (–∏–ª–∏ `onai.academy`)
- **Value:** 178.128.203.40
- **TTL:** 300

–ü–æ–¥–æ–∂–¥–∏ 5-10 –º–∏–Ω—É—Ç –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞.

---

### **–ü—Ä–æ–±–ª–µ–º–∞ 3: Nginx –∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤**

```bash
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Nginx —Å–ª—É—à–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã
sudo netstat -tlnp | grep :443
sudo netstat -tlnp | grep :80

# –ï—Å–ª–∏ –ø–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º:
sudo lsof -i :443
sudo lsof -i :80
```

---

## üìã –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê: –î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã –û–î–ò–ù —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Ä–∞–±–æ—Ç–∞–ª –¥–ª—è –û–ë–û–ò–• –¥–æ–º–µ–Ω–æ–≤:

```bash
# –ü–æ–ª—É—á–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è –æ–±–æ–∏—Ö –¥–æ–º–µ–Ω–æ–≤ —Å—Ä–∞–∑—É
sudo certbot --nginx \
  -d onai.academy \
  -d www.onai.academy \
  -d onai.academy \
  -d www.onai.academy

# –í—ã–±–µ—Ä–∏ "Expand" –µ—Å–ª–∏ —Å–ø—Ä–æ—Å–∏—Ç
```

---

## ‚úÖ –ü–û–°–õ–ï –£–°–¢–ê–ù–û–í–ö–ò:

### **–ü—Ä–æ–≤–µ—Ä—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
1. –û—Ç–∫—Ä–æ–π: `https://onai.academy`
2. –ö–ª–∏–∫–Ω–∏ –Ω–∞ –∑–∞–º–æ—á–µ–∫ üîí –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
3. –ù–∞–∂–º–∏ "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç"
4. –ü—Ä–æ–≤–µ—Ä—å:
   - **–í—ã–¥–∞–Ω –¥–ª—è:** `onai.academy`
   - **–í—ã–¥–∞–Ω:** Let's Encrypt
   - **–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ:** ~90 –¥–Ω–µ–π –æ—Ç —Å–µ–≥–æ–¥–Ω—è

### **–ü—Ä–æ–≤–µ—Ä—å —Ä–µ–¥–∏—Ä–µ–∫—Ç:**
```bash
# HTTP –¥–æ–ª–∂–µ–Ω —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å –Ω–∞ HTTPS
curl -I http://onai.academy
```

–î–æ–ª–∂–µ–Ω –±—ã—Ç—å: `301 Moved Permanently` ‚Üí `https://onai.academy`

---

## üîÑ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ï –ü–†–û–î–õ–ï–ù–ò–ï:

Certbot —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–∏–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –¢–µ—Å—Ç (–Ω–µ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ)
sudo certbot renew --dry-run
```

**–ï—Å–ª–∏ –≤—Å—ë –û–ö:**
```
Congratulations, all simulated renewals succeeded
```

---

## üéØ –ò–¢–û–ì:

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã:
```bash
sudo certbot --nginx -d onai.academy -d www.onai.academy
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ HTTPS —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º
- ‚úÖ –ó–µ–ª—ë–Ω—ã–π –∑–∞–º–æ—á–µ–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- ‚úÖ "–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞—â–∏—â–µ–Ω–æ"
- ‚úÖ –ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 90 –¥–Ω–µ–π

**–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç

---

## üÜò –ï–°–õ–ò –ù–ï –†–ê–ë–û–¢–ê–ï–¢:

–ü–æ–∫–∞–∂–∏ –º–Ω–µ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥:
```bash
sudo certbot certificates
sudo nginx -t
curl -I https://onai.academy
```

–Ø –ø–æ–º–æ–≥—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è! üöÄ

