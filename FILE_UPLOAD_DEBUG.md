# üî• –ü–†–û–ë–õ–ï–ú–ê: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (500 Internal Server Error)

## üìã –ö–†–ê–¢–ö–û–ï –û–ü–ò–°–ê–ù–ò–ï

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª (PDF, DOCX, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ) —á–µ—Ä–µ–∑ AI-–ö—É—Ä–∞—Ç–æ—Ä –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ **500 Internal Server Error** –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ `/api/files/process`.

---

## üö® –¢–ï–ö–£–©–ò–ï –û–®–ò–ë–ö–ò (–∏–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞)

### Frontend Console:
```
POST http://localhost:3000/api/files/process 500 (Internal Server Error)
‚ùå API Error: Failed to process file
‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞: Failed to process file
```

### Frontend Stack Trace:
```
at apiRequest (apiClient.ts:70:13)
at async processFile (openai-assistant.ts:97:22)
at async sendMessageToAI (openai-assistant.ts:144:31)
at async AIChatDialog.tsx:338:26
```

---

## üõ†Ô∏è –ß–¢–û –ú–´ –£–ñ–ï –ò–°–ü–†–ê–í–ò–õ–ò

### 1. FormData + multipart/form-data Boundary

**–ü—Ä–æ–±–ª–µ–º–∞:** Frontend –≤—Ä—É—á–Ω—É—é —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª `Content-Type: multipart/form-data` –ë–ï–ó `boundary`, —á—Ç–æ –ª–æ–º–∞–ª–æ –ø–∞—Ä—Å–∏–Ω–≥.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ –£–±—Ä–∞–ª–∏ —Ä—É—á–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É `Content-Type` –≤ `openai-assistant.ts`
- ‚úÖ –î–æ–±–∞–≤–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É `isFormData` –≤ `apiClient.ts`
- ‚úÖ –ë—Ä–∞—É–∑–µ—Ä —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç `boundary`

**–§–∞–π–ª—ã:**
- `src/lib/openai-assistant.ts` (—Å—Ç—Ä–æ–∫–∞ 97)
- `src/utils/apiClient.ts` (—Å—Ç—Ä–æ–∫–∏ 27-53)

### 2. Multer Middleware

**–ü—Ä–æ–±–ª–µ–º–∞:** Middleware `uploadMiddleware` –Ω–µ –±—ã–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ —Ä–æ—É—Ç—É.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–∏–ª–∏ `fileController.uploadMiddleware` –≤ `backend/src/routes/files.ts`
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ `upload.single('file')` –∏–∑ `fileController.ts`

**–§–∞–π–ª—ã:**
- `backend/src/routes/files.ts` (—Å—Ç—Ä–æ–∫–∞ 15)
- `backend/src/controllers/fileController.ts` (—Å—Ç—Ä–æ–∫–∞ 85)

### 3. –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–∏–ª–∏ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤ `fileController.processFile()`
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ–º `req.file`, `req.body`, `buffer.length`, `mimetype`

**–§–∞–π–ª—ã:**
- `backend/src/controllers/fileController.ts` (—Å—Ç—Ä–æ–∫–∏ 24-56)

---

## üîç –ß–¢–û –ù–£–ñ–ù–û –ü–†–û–í–ï–†–ò–¢–¨ –°–ï–ô–ß–ê–°

### –®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Backend –∫–æ–Ω—Å–æ–ª—å

–ö–æ–≥–¥–∞ —Ç—ã –∑–∞–≥—Ä—É–∂–∞–µ—à—å —Ñ–∞–π–ª, **Backend –¥–æ–ª–∂–µ–Ω –≤—ã–≤–æ–¥–∏—Ç—å –ª–æ–≥–∏:**

```
[FileController] üîç –ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞...
[FileController] req.file: true
[FileController] req.body: { userQuestion: '...' }
[FileController] ‚úÖ –§–∞–π–ª –ø–æ–ª—É—á–µ–Ω: {
  filename: '–ö–≤–∏—Ç–∞–Ω—Ü–∏—è.pdf',
  mimetype: 'application/pdf',
  size: 85904,
  bufferLength: 85904,
  userQuestion: 'N/A'
}
[FileController] üìé –í—ã–∑—ã–≤–∞–µ–º fileProcessingService.processFile...
[FileProcessing] –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç –∏–∑ PDF...
```

**–ï—Å–ª–∏ –ù–ï–¢ –ª–æ–≥–æ–≤** ‚Üí —Ñ–∞–π–ª –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ Backend  
**–ï—Å–ª–∏ –ï–°–¢–¨ –ª–æ–≥–∏ + –æ—à–∏–±–∫–∞** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞

### –®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Backend .env

–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤ `backend/.env` –µ—Å—Ç—å:

```env
OPENAI_API_KEY=sk-...
SUPABASE_URL=https://arqhkacellqbhjhbebfh.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGci...
```

### –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã

```bash
cd backend
npm list pdf-parse mammoth multer
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
‚îú‚îÄ‚îÄ pdf-parse@2.4.5
‚îú‚îÄ‚îÄ mammoth@1.11.0
‚îî‚îÄ‚îÄ multer@2.0.2
```

---

## üìù –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´ 500 –û–®–ò–ë–ö–ò

### 1. PDF-–ø–∞—Ä—Å–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–ü—Ä–æ–±–ª–µ–º–∞:** `pdf-parse` —Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –°–º–æ—Ç—Ä–∏–º Backend –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫—É `Cannot find module 'pdf-parse'`

### 2. –§–∞–π–ª –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ Backend
**–ü—Ä–æ–±–ª–µ–º–∞:** `req.file` === `undefined`  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** Backend –ª–æ–≥–∏ `[FileController] req.file: false`

### 3. –ë—É—Ñ–µ—Ä –ø—É—Å—Ç–æ–π
**–ü—Ä–æ–±–ª–µ–º–∞:** `file.buffer` –ø—É—Å—Ç–æ–π –∏–ª–∏ `undefined`  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** Backend –ª–æ–≥–∏ `bufferLength: 0`

### 4. OpenAI API –∫–ª—é—á –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–ü—Ä–æ–±–ª–µ–º–∞:** Vision API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** Backend –ª–æ–≥–∏ —Å –æ—à–∏–±–∫–æ–π –æ—Ç OpenAI

### 5. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏ –¥–ª—è –±–æ–ª—å—à–æ–≥–æ —Ñ–∞–π–ª–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** Multer limit = 10MB, —Ñ–∞–π–ª –±–æ–ª—å—à–µ  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** Backend –ª–æ–≥–∏ `File too large`

---

## üß™ –ö–ê–ö –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–¢–¨

### –¢–µ—Å—Ç 1: –ó–∞–≥—Ä—É–∑–∫–∞ –ú–ê–õ–ï–ù–¨–ö–û–ì–û —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞

1. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `test.txt` —Å —Ç–µ–∫—Å—Ç–æ–º `Hello World`
2. –û—Ç–∫—Ä–æ–π AI-–ö—É—Ä–∞—Ç–æ—Ä
3. –ü—Ä–∏–∫—Ä–µ–ø–∏ `test.txt`
4. –û—Ç–ø—Ä–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ
5. **–°–º–æ—Ç—Ä–∏ Backend –∫–æ–Ω—Å–æ–ª—å**

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚úÖ Backend –ª–æ–≥–∏ `[FileController] ‚úÖ –§–∞–π–ª –ø–æ–ª—É—á–µ–Ω`
- ‚ùå –û—à–∏–±–∫–∞ `Unsupported file type` (–Ω–æ—Ä–º–∞–ª—å–Ω–æ, .txt –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)

### –¢–µ—Å—Ç 2: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è PNG

1. –°–æ–∑–¥–∞–π –ø—Ä–æ—Å—Ç–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (screenshot)
2. –û—Ç–∫—Ä–æ–π AI-–ö—É—Ä–∞—Ç–æ—Ä
3. –ü—Ä–∏–∫—Ä–µ–ø–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
4. –û—Ç–ø—Ä–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ
5. **–°–º–æ—Ç—Ä–∏ Backend –∫–æ–Ω—Å–æ–ª—å**

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚úÖ Backend –ª–æ–≥–∏ `[FileController] Image detected, analyzing with Vision API...`
- ‚úÖ –í—ã–∑–æ–≤ OpenAI Vision API
- ‚úÖ –û—Ç–≤–µ—Ç –æ—Ç AI —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫–∞—Ä—Ç–∏–Ω–∫–∏

### –¢–µ—Å—Ç 3: –ó–∞–≥—Ä—É–∑–∫–∞ PDF

1. –í–æ–∑—å–º–∏ –ª—é–±–æ–π PDF —Ñ–∞–π–ª (–º–∞–ª–µ–Ω—å–∫–∏–π, 1-2 —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
2. –û—Ç–∫—Ä–æ–π AI-–ö—É—Ä–∞—Ç–æ—Ä
3. –ü—Ä–∏–∫—Ä–µ–ø–∏ PDF
4. –û—Ç–ø—Ä–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ
5. **–°–º–æ—Ç—Ä–∏ Backend –∫–æ–Ω—Å–æ–ª—å**

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚úÖ Backend –ª–æ–≥–∏ `[FileProcessing] –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç –∏–∑ PDF...`
- ‚úÖ Backend –ª–æ–≥–∏ `[FileProcessing] ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–æ N —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ PDF`
- ‚úÖ –¢–µ–∫—Å—Ç PDF –¥–æ–±–∞–≤–ª–µ–Ω –∫ —Å–æ–æ–±—â–µ–Ω–∏—é

---

## üîß –ß–¢–û –î–ï–õ–ê–¢–¨ –î–ê–õ–¨–®–ï

### 1. –û—Ç–∫—Ä–æ–π Backend –∫–æ–Ω—Å–æ–ª—å (–≥–¥–µ –∑–∞–ø—É—â–µ–Ω `npm run dev`)
### 2. –ü–æ–ø—Ä–æ–±—É–π –∑–∞–≥—Ä—É–∑–∏—Ç—å –õ–Æ–ë–û–ô —Ñ–∞–π–ª
### 3. –°–∫–æ–ø–∏—Ä—É–π –í–°–Æ –û–®–ò–ë–ö–£ –∏–∑ Backend –∫–æ–Ω—Å–æ–ª–∏
### 4. –°–∫–∏–Ω—å –º–Ω–µ:
   - ‚úÖ Backend –ª–æ–≥–∏ (–Ω–∞—á–∏–Ω–∞—è —Å `[FileController]`)
   - ‚úÖ –ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ –æ—à–∏–±–∫–∏
   - ‚úÖ –¢–∏–ø —Ñ–∞–π–ª–∞, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –∑–∞–≥—Ä—É–∂–∞–µ—à—å

---

## üì¶ –§–ê–ô–õ–´, –ö–û–¢–û–†–´–ï –ú–´ –ò–ó–ú–ï–ù–ò–õ–ò

1. `src/lib/openai-assistant.ts` ‚Äî —É–±—Ä–∞–ª–∏ `Content-Type: multipart/form-data`
2. `src/utils/apiClient.ts` ‚Äî –¥–æ–±–∞–≤–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É `isFormData`
3. `backend/src/routes/files.ts` ‚Äî –¥–æ–±–∞–≤–∏–ª–∏ `uploadMiddleware`
4. `backend/src/controllers/fileController.ts` ‚Äî –¥–æ–±–∞–≤–∏–ª–∏ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
5. `backend/src/services/fileProcessingService.ts` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ PDF/DOCX

---

## ‚ö†Ô∏è –û–ë–ù–û–í–õ–ï–ù–ò–ï: –ù–ê–ô–î–ï–ù–ê –ü–†–û–ë–õ–ï–ú–ê!

**–î–ê–¢–ê:** 2025-11-14, 18:35

### –ü—Ä–æ–±–ª–µ–º–∞:
–í fetch –∑–∞–ø—Ä–æ—Å–µ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ **—Ñ–∞–π–ª –ü–£–°–¢–û–ô!**

```
Content-Disposition: form-data; name="file"; filename="–ö–≤–∏—Ç–∞–Ω—Ü–∏—è.pdf"
Content-Type: application/pdf

(–ü–£–°–¢–ê–Ø –°–¢–†–û–ö–ê - –ù–ï–¢ –î–ê–ù–ù–´–• –§–ê–ô–õ–ê!)
```

**–î–æ–ª–∂–Ω–æ –±—ã–ª–æ –±—ã—Ç—å:**
```
Content-Disposition: form-data; name="file"; filename="–ö–≤–∏—Ç–∞–Ω—Ü–∏—è.pdf"
Content-Type: application/pdf

%PDF-1.4
%√á√§√≥√≥√∑... (–±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ PDF)
```

### –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:
- ‚ùå File –æ–±—ä–µ–∫—Ç –≤ FormData –±—ã–ª **–ü–£–°–¢–´–ú**
- ‚ùå –§–∞–π–ª –ª–∏–±–æ –Ω–µ —á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ª–∏–±–æ File API –ª–æ–º–∞–µ—Ç –µ–≥–æ

### –ß—Ç–æ —è —Å–¥–µ–ª–∞–ª:
1. ‚úÖ –î–æ–±–∞–≤–∏–ª –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤ `src/lib/openai-assistant.ts`
2. ‚úÖ –î–æ–±–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä–∫—É `file.size === 0` –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
3. ‚úÖ –î–æ–±–∞–≤–∏–ª –ª–æ–≥–∏ –≤ `src/components/profile/v2/AIChatDialog.tsx`

### –ù–æ–≤—ã–µ –ª–æ–≥–∏ (Frontend Console):
–¢–µ–ø–µ—Ä—å —Ç—ã —É–≤–∏–¥–∏—à—å:
```
üìé [AIChatDialog] –ü–µ—Ä–µ–¥–∞—ë–º attachments –≤ sendMessageToAI: [{name: "file.pdf", hasFile: true, fileSize: 85904}]
üìé [sendMessageToAI] –ü–æ–ª—É—á–µ–Ω–æ 1 —Ñ–∞–π–ª(–æ–≤)
üìé [sendMessageToAI] –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ñ–∞–π–ª: file.pdf
üìé [processFile] –ü–æ–ª—É—á–µ–Ω —Ñ–∞–π–ª: {name: "file.pdf", size: 85904, type: "application/pdf"}
üìé [processFile] FormData —Å–æ–∑–¥–∞–Ω, —Ñ–∞–π–ª –¥–æ–±–∞–≤–ª–µ–Ω
üìé [processFile] –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ Backend: /api/files/process
```

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

**–¢–ï–ë–ï –ù–£–ñ–ù–û:**
1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:8080/profile`
2. –û—Ç–∫—Ä—ã—Ç—å **F12 ‚Üí Console**
3. –û—Ç–∫—Ä—ã—Ç—å AI-–ö—É—Ä–∞—Ç–æ—Ä
4. –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª (PDF –∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
5. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
6. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å **–í–°–ï –õ–û–ì–ò** –∏–∑ Console (–Ω–∞—á–∏–Ω–∞—è —Å `üìé [AIChatDialog]`)
7. –ü—Ä–∏—Å–ª–∞—Ç—å –º–Ω–µ —ç—Ç–∏ –ª–æ–≥–∏

**–Ø –•–û–ß–£ –£–í–ò–î–ï–¢–¨:**
```
üìé [AIChatDialog] –ü–µ—Ä–µ–¥–∞—ë–º attachments –≤ sendMessageToAI: [...]
üìé [sendMessageToAI] –ü–æ–ª—É—á–µ–Ω–æ N —Ñ–∞–π–ª(–æ–≤)
üìé [sendMessageToAI] –î–µ—Ç–∞–ª–∏ attachments: [...]
üìé [processFile] –ü–æ–ª—É—á–µ–Ω —Ñ–∞–π–ª: {...}
```

**–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:**
- –ï—Å—Ç—å –ª–∏ File –æ–±—ä–µ–∫—Ç –≤ attachments
- –ö–∞–∫–æ–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (0 = –ø—Ä–æ–±–ª–µ–º–∞!)
- –ù–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ —Ñ–∞–π–ª "—Ç–µ—Ä—è–µ—Ç—Å—è"

---

## üí° HINT

–ï—Å–ª–∏ Backend **–ù–ï –ü–û–ö–ê–ó–´–í–ê–ï–¢ –õ–û–ì–ò** –≤–æ–æ–±—â–µ (–¥–∞–∂–µ `[FileController] üîç –ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞...`), –∑–Ω–∞—á–∏—Ç:
- ‚ùå –ó–∞–ø—Ä–æ—Å –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ Backend
- ‚ùå –†–æ—É—Ç `/api/files/process` –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- ‚ùå JWT —Ç–æ–∫–µ–Ω –Ω–µ –≤–∞–ª–∏–¥–Ω—ã–π (401 –æ—à–∏–±–∫–∞)

–ï—Å–ª–∏ Backend **–ü–û–ö–ê–ó–´–í–ê–ï–¢ –õ–û–ì–ò**, –Ω–æ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π, –∑–Ω–∞—á–∏—Ç:
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ –≤ –ø–∞—Ä—Å–∏–Ω–≥–µ —Ñ–∞–π–ª–∞ (`pdf-parse`, `mammoth`)
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å OpenAI API (Vision API)
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å –±—É—Ñ–µ—Ä–æ–º —Ñ–∞–π–ª–∞

---

## üöÄ –ö–û–ú–ú–ò–¢–´

```
1. fix: FormData multipart boundary & token logging with correct assistantType
2. debug: add detailed logging for token stats & file processing
3. feat: dynamic token stats in admin dashboard card
4. feat: dynamic student stats in admin dashboard card
```

---

**–î–ê–¢–ê:** 2025-11-14  
**–°–¢–ê–¢–£–°:** üî¥ –û–®–ò–ë–ö–ê 500 - –ù—É–∂–Ω—ã Backend –ª–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

