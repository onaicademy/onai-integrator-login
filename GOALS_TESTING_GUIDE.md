# üß™ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ –°–ò–°–¢–ï–ú–´ –¶–ï–õ–ï–ô

## –®–ê–ì 1: –ü–†–ò–ú–ï–ù–ò–¢–¨ SQL –ú–ò–ì–†–ê–¶–ò–Æ –í SUPABASE

### 1Ô∏è‚É£ –û—Å–Ω–æ–≤–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (–ë–ï–ó –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í!)

**–§–∞–π–ª:** `supabase/migrations/20251122_user_goals_system_clean.sql`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É `user_goals`
- –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É `goal_achievements` (8 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π)
- –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É `weekly_goal_reports`
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- –°–æ–∑–¥–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è XP

**–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å:**
1. –û—Ç–∫—Ä–æ–π Supabase ‚Üí SQL Editor
2. –°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å —Ñ–∞–π–ª `20251122_user_goals_system_clean.sql`
3. –í—Å—Ç–∞–≤—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
4. –ù–∞–∂–º–∏ **Run**
5. –î–æ–∂–¥–∏—Å—å "Success!"

---

### 2Ô∏è‚É£ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AI –ù–∞—Å—Ç–∞–≤–Ω–∏–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–§–∞–π–ª:** `supabase/migrations/20251122_update_ai_context_with_goals.sql`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `get_student_context_for_ai()`
- –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ü–µ–ª–µ–π —Å—Ç—É–¥–µ–Ω—Ç–∞ –¥–ª—è AI –∞–Ω–∞–ª–∏–∑–∞

**–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å:**
1. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
2. –û—Ç–∫—Ä–æ–π Supabase ‚Üí SQL Editor
3. –°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å —Ñ–∞–π–ª `20251122_update_ai_context_with_goals.sql`
4. –í—Å—Ç–∞–≤—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
5. –ù–∞–∂–º–∏ **Run**

---

## –®–ê–ì 2: –ü–†–û–í–ï–†–ö–ê –¢–ê–ë–õ–ò–¶ –í SUPABASE

```sql
SELECT table_name 
FROM information_schema.tables 
WHERE table_name IN ('user_goals', 'goal_achievements', 'weekly_goal_reports');
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[
  { "table_name": "user_goals" },
  { "table_name": "goal_achievements" },
  { "table_name": "weekly_goal_reports" }
]
```

---

## –®–ê–ì 3: –ü–†–û–í–ï–†–ö–ê –î–û–°–¢–ò–ñ–ï–ù–ò–ô

```sql
SELECT achievement_key, title, xp_reward FROM goal_achievements ORDER BY xp_reward ASC;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 8 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

---

## –®–ê–ì 4: –ó–ê–ü–£–°–ö BACKEND

```bash
cd backend
npm run dev
```

**–ü—Ä–æ–≤–µ—Ä—å –≤ –ª–æ–≥–∞—Ö:**
```
‚úÖ Backend API –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:3000
üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã
```

---

## –®–ê–ì 5: –ó–ê–ü–£–°–ö FRONTEND

```bash
npm run dev
```

**–û—Ç–∫—Ä–æ–π:** http://localhost:8080

---

## –®–ê–ì 6: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ù–ê LOCALHOST

### 6.1 –û—Ç–∫—Ä–æ–π NeuroHub
1. –ó–∞–π–¥–∏ –ø–æ–¥ —Å–≤–æ–∏–º –∞–∫–∫–∞—É–Ω—Ç–æ–º (saint@onaiacademy.kz)
2. –ü–µ—Ä–µ–π–¥–∏ –≤ **NeuroHub**
3. –ù–∞–π–¥–∏ –∫–∞—Ä—Ç–æ—á–∫—É **"–ú–æ–∏ —Ü–µ–ª–∏"**

### 6.2 –°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ª–∏
1. –í –ø–æ–ª–µ –≤–≤–æ–¥–∞ –Ω–∞–ø–∏—à–∏: "–ü—Ä–æ–π—Ç–∏ 5 —É—Ä–æ–∫–æ–≤"
2. –ù–∞–∂–º–∏ **+**
3. **–û–∂–∏–¥–∞–µ—Ç—Å—è:**
   - ‚úÖ –¶–µ–ª—å –ø–æ—è–≤–∏–ª–∞—Å—å –≤ —Å–ø–∏—Å–∫–µ
   - ‚úÖ –°—Ç–∞—Ç—É—Å "TODO" (—Å–µ—Ä—ã–π –∫—Ä—É–∂–æ–∫)
   - ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: `‚úÖ [GoalsAPI] –¶–µ–ª—å —Å–æ–∑–¥–∞–Ω–∞`

### 6.3 –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ü–µ–ª–∏ (–ì–õ–ê–í–ù–û–ï!)
1. –ù–∞–π–¥–∏ —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω—É—é —Ü–µ–ª—å
2. –ù–∞–∂–º–∏ **–≥–∞–ª–æ—á–∫—É** (‚úì) —Å–ø—Ä–∞–≤–∞
3. **–û–∂–∏–¥–∞–µ—Ç—Å—è:**
   - ‚úÖ –ê–Ω–∏–º–∞—Ü–∏—è **"+20 XP"** –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏ —É–ª–µ—Ç–∞–µ—Ç –≤–≤–µ—Ä—Ö
   - ‚úÖ Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "üéâ –¶–µ–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞! +20 XP"
   - ‚úÖ –°—Ç–∞—Ç—É—Å —Ü–µ–ª–∏ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "DONE" (–∑–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞)
   - ‚úÖ –¶–µ–ª—å –∑–∞—á–µ—Ä–∫–∏–≤–∞–µ—Ç—Å—è
   - ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: `üéâ [GoalsAPI] –¶–µ–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞! +XP`

### 6.4 –ü—Ä–æ–≤–µ—Ä–∫–∞ XP –≤ –ø—Ä–æ—Ñ–∏–ª–µ
1. –û—Ç–∫—Ä–æ–π –ø—Ä–æ—Ñ–∏–ª—å –≤ —à–∞–ø–∫–µ
2. **–û–∂–∏–¥–∞–µ—Ç—Å—è:**
   - ‚úÖ XP —É–≤–µ–ª–∏—á–∏–ª—Å—è –Ω–∞ 20
   - ‚úÖ –ï—Å–ª–∏ –±—ã–ª–æ 0 XP ‚Üí —Å—Ç–∞–ª–æ 20 XP
   - ‚úÖ –ï—Å–ª–∏ –±—ã–ª–æ 80 XP ‚Üí —Å—Ç–∞–ª–æ 100 XP (–Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å!)

### 6.5 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î
```sql
SELECT * FROM user_goals WHERE user_id = (SELECT id FROM auth.users WHERE email = 'saint@onaiacademy.kz');
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- ‚úÖ –ó–∞–ø–∏—Å—å —Å `status = 'done'`
- ‚úÖ `completed_at` –∑–∞–ø–æ–ª–Ω–µ–Ω

```sql
SELECT xp FROM profiles WHERE id = (SELECT id FROM auth.users WHERE email = 'saint@onaiacademy.kz');
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- ‚úÖ XP —É–≤–µ–ª–∏—á–∏–ª—Å—è –Ω–∞ 20

### 6.6 –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
1. –°–æ–∑–¥–∞–π –µ—â–µ 4 —Ü–µ–ª–∏ –∏ –≤—ã–ø–æ–ª–Ω–∏ –∏—Ö
2. **–û–∂–∏–¥–∞–µ—Ç—Å—è:**
   - ‚úÖ –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è 1-–π —Ü–µ–ª–∏ ‚Üí –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–ü–µ—Ä–≤–∞—è —Ü–µ–ª—å" (+50 XP)
   - ‚úÖ –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è 5-–π —Ü–µ–ª–∏ ‚Üí –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–¶–µ–ª–µ—É—Å—Ç—Ä–µ–º–ª–µ–Ω–Ω—ã–π" (+100 XP)
   - ‚úÖ –û–±—â–∏–π XP: 20*5 + 50 + 100 = 250 XP

```sql
SELECT * FROM user_achievements 
WHERE user_id = (SELECT id FROM auth.users WHERE email = 'saint@onaiacademy.kz')
  AND is_completed = TRUE;
```

### 6.7 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ö–∞–Ω–±–∞–Ω
1. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **"–ö–∞–Ω–±–∞–Ω"**
2. **–û–∂–∏–¥–∞–µ—Ç—Å—è:**
   - ‚úÖ –û—Ç–∫—Ä—ã–ª—Å—è –ø–æ–ø–∞–ø —Å 3 –∫–æ–ª–æ–Ω–∫–∞–º–∏ (–Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ)
   - ‚úÖ –û—Ç–∫—Ä—ã–ª—Å—è –ø–æ–ø–∞–ø —Å —Ç–∞–±–∞–º–∏ (–Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö)
3. –ü–µ—Ä–µ—Ç–∞—â–∏ —Ü–µ–ª—å –∏–∑ "TODO" –≤ "–í —Ä–∞–±–æ—Ç–µ"
4. **–û–∂–∏–¥–∞–µ—Ç—Å—è:**
   - ‚úÖ –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–∏–ª—Å—è
   - ‚úÖ Toast: "–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω"
5. –ü–µ—Ä–µ—Ç–∞—â–∏ —Ü–µ–ª—å –∏–∑ "–í —Ä–∞–±–æ—Ç–µ" –≤ "–ó–∞–≤–µ—Ä—à–µ–Ω–æ"
6. **–û–∂–∏–¥–∞–µ—Ç—Å—è:**
   - ‚úÖ –ê–Ω–∏–º–∞—Ü–∏—è "+20 XP"
   - ‚úÖ Toast: "üéâ –¶–µ–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞! +20 XP"

---

## üêõ –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "Failed to load goals"
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å backend –Ω–∞ –æ—à–∏–±–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "–ù–µ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è XP"
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç—Ä–∏–≥–≥–µ—Ä —Å–æ–∑–¥–∞–Ω:
```sql
SELECT trigger_name FROM information_schema.triggers 
WHERE event_object_table = 'user_goals';
```
**–û–∂–∏–¥–∞–µ—Ç—Å—è:** `trg_award_xp_for_goal`

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "–ê–Ω–∏–º–∞—Ü–∏—è XP –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è"
**–†–µ—à–µ–Ω–∏–µ:**
- –≠—Ç–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±–∞–≥, XP –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å XP –≤ –ë–î –Ω–∞–ø—Ä—è–º—É—é

### –ü—Ä–æ–±–ª–µ–º–∞ 4: "–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ü–µ–ª–∏"
**–†–µ—à–µ–Ω–∏–µ:**
- –û—Ç–∫—Ä–æ–π Network –≤ DevTools
- –ü–æ—Å–º–æ—Ç—Ä–∏ –æ—Ç–≤–µ—Ç –æ—Ç `/api/goals`
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `user_id` –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –£–°–ü–ï–®–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

- [ ] SQL –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –≤ Supabase
- [ ] 8 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `goal_achievements`
- [ ] Backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ :3000
- [ ] Frontend –∑–∞–ø—É—â–µ–Ω –Ω–∞ :8080
- [ ] –¶–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ UI
- [ ] –¶–µ–ª—å –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
- [ ] –ì–∞–ª–æ—á–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê–Ω–∏–º–∞—Ü–∏—è "+20 XP" –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- [ ] XP –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª—å
- [ ] –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "done"
- [ ] –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–ü–µ—Ä–≤–∞—è —Ü–µ–ª—å" —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (+50 XP)
- [ ] –ö–∞–Ω–±–∞–Ω –ø–æ–ø–∞–ø –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] Drag & Drop —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å (–º–æ–±–∏–ª—å–Ω—ã–µ = —Ç–∞–±—ã, –¥–µ—Å–∫—Ç–æ–ø = –∫–æ–ª–æ–Ω–∫–∏)

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è 1 —Ü–µ–ª–∏:
- XP: +20
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: "–ü–µ—Ä–≤–∞—è —Ü–µ–ª—å" (+50 XP)
- **–ò—Ç–æ–≥–æ: +70 XP**

### –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è 5 —Ü–µ–ª–µ–π:
- XP: 20 * 5 = +100
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: "–ü–µ—Ä–≤–∞—è —Ü–µ–ª—å" (+50 XP)
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: "–¶–µ–ª–µ—É—Å—Ç—Ä–µ–º–ª–µ–Ω–Ω—ã–π" (+100 XP)
- **–ò—Ç–æ–≥–æ: +250 XP**

### –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è 10 —Ü–µ–ª–µ–π:
- XP: 20 * 10 = +200
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è: "–ü–µ—Ä–≤–∞—è —Ü–µ–ª—å", "–¶–µ–ª–µ—É—Å—Ç—Ä–µ–º–ª–µ–Ω–Ω—ã–π", "–ú–∞—Å—Ç–µ—Ä —Ü–µ–ª–µ–π" (+200 XP)
- **–ò—Ç–æ–≥–æ: +550 XP** (—É—Ä–æ–≤–µ–Ω—å 5-6!)

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. ‚úÖ –î–µ–ø–ª–æ–π backend –Ω–∞ DigitalOcean
2. ‚úÖ –î–µ–ø–ª–æ–π frontend –Ω–∞ Vercel
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –±–æ–Ω—É—Å–æ–≤
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ –¥–µ–¥–ª–∞–π–Ω—ã –≤ UI
5. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI –ù–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

**–ü–û–ï–•–ê–õ–ò –¢–ï–°–¢–ò–†–û–í–ê–¢–¨! üéØ**



















