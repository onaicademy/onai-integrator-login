# üìä –ü–†–û–í–ï–†–ö–ê –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò –ë–ê–ó –î–ê–ù–ù–´–•

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** `test-another@gmail.com`

---

## üîç –ß–¢–û –ü–†–û–í–ï–†–Ø–ï–¢–°–Ø:

### **1. auth.users (Supabase Authentication)**
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- ‚úÖ Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω
- ‚úÖ –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (full_name, role)

### **2. public.users (–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)**
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ `total_xp = 0` (–æ–±–Ω—É–ª—ë–Ω)
- ‚úÖ `level = 1` (–Ω–∞—á–∞–ª—å–Ω—ã–π)
- ‚úÖ `role = 'student'` (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–æ–ª—å)
- ‚úÖ `is_ceo = false`
- ‚úÖ `last_login_at` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

### **3. user_stats (–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)**
- ‚úÖ –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ `lessons_completed = 0`
- ‚úÖ `total_study_time_minutes = 0`
- ‚úÖ `current_streak = 0`
- ‚úÖ `longest_streak = 0`
- ‚úÖ `courses_completed = 0`
- ‚úÖ `modules_completed = 0`
- ‚úÖ `achievements_unlocked = 0`
- ‚úÖ `messages_sent_to_ai = 0`

### **4. user_progress (–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫—É—Ä—Å–∞–º)**
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ –ø—É—Å—Ç–∞—è (–Ω–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)
- ‚úÖ –ù–µ—Ç —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π

### **5. user_achievements (–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)**
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ –ø—É—Å—Ç–∞—è (–Ω–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π)
- ‚úÖ –ù–µ—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

---

## ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø:

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
```sql
-- –¢—Ä–∏–≥–≥–µ—Ä: new_user_trigger
-- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤ auth.users –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è:
1. –ó–∞–ø–∏—Å—å –≤ public.users (—Å –æ–±–Ω—É–ª—ë–Ω–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏)
2. –ó–∞–ø–∏—Å—å –≤ user_stats (—Å –Ω—É–ª–µ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏)
```

### **–û–±–Ω—É–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫:**
```sql
-- –î–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –í–°–ï –º–µ—Ç—Ä–∏–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 0 –∏–ª–∏ NULL:
total_xp: 0
level: 1
lessons_completed: 0
current_streak: 0
achievements_unlocked: 0
-- –ò —Ç.–¥.
```

### **–ù–µ—Ç Mock –¥–∞–Ω–Ω—ã—Ö:**
```sql
-- –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- total_xp > 0
- lessons_completed > 0
- current_streak > 0
- achievements (–∑–∞–ø–∏—Å–µ–π –≤ user_achievements)
- progress (–∑–∞–ø–∏—Å–µ–π –≤ user_progress)
```

---

## ‚ùå –ü–†–û–ë–õ–ï–ú–´, –ö–û–¢–û–†–´–ï –ú–û–ì–£–¢ –ë–´–¢–¨:

### **1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤ public.users**
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢—Ä–∏–≥–≥–µ—Ä –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä `handle_new_user()`

### **2. –ù–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ user_stats**
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢—Ä–∏–≥–≥–µ—Ä –Ω–µ —Å–æ–∑–¥–∞–ª —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä `handle_new_user()`

### **3. –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ –æ–±–Ω—É–ª–µ–Ω—ã (–µ—Å—Ç—å Mock –¥–∞–Ω–Ω—ã–µ)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Å—Ç–∞–ª–∏—Å—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Mock  
**–†–µ—à–µ–Ω–∏–µ:** –û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã –∏ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ç—Ä–∏–≥–≥–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω—É–ª–∏

### **4. RLS –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø**
**–ü—Ä–æ–±–ª–µ–º–∞:** Row Level Security –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏

---

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´ SQL:

### **–°–µ–∫—Ü–∏—è "SUMMARY":**
```
email: test-another@gmail.com
full_name: Test User (–∏–ª–∏ NULL)
role: student
XP (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0): 0
–£—Ä–æ–≤–µ–Ω—å (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 1): 1
–£—Ä–æ–∫–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0): 0
–í—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0): 0
–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0): 0
–ö—É—Ä—Å–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–æ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0): 0
–î–æ—Å—Ç–∏–∂–µ–Ω–∏–π (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0): 0
–ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–∫–æ–≤ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0): 0
–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0): 0
```

### **–°–µ–∫—Ü–∏—è "–ü–†–û–í–ï–†–ö–ê –ù–ê MOCK":**
```
status: ‚úÖ –í–°–Å –ß–ò–°–¢–û: –ù–µ—Ç mock –¥–∞–Ω–Ω—ã—Ö
total_xp: 0
level: 1
lessons_completed: 0
current_streak: 0
achievements_count: 0
```

### **–°–µ–∫—Ü–∏—è "–ò–¢–û–ì–û–í–´–ô –í–ï–†–î–ò–ö–¢":**
```
users_status: ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω –≤ public.users
stats_status: ‚úÖ –ó–∞–ø–∏—Å—å –≤ user_stats —Å–æ–∑–¥–∞–Ω–∞
xp_status: ‚úÖ total_xp –æ–±–Ω—É–ª—ë–Ω
level_status: ‚úÖ level = 1 (–Ω–∞—á–∞–ª—å–Ω—ã–π)
lessons_status: ‚úÖ lessons_completed = 0
```

---

## üöÄ –ï–°–õ–ò –í–°–Å –ü–†–ê–í–ò–õ–¨–ù–û:

**–≠—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ:**
1. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. ‚úÖ –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –æ–±–Ω—É–ª–µ–Ω—ã
4. ‚úÖ –ù–µ—Ç Mock –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø—Ä–æ–¥–µ
5. ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
6. ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–Ω–æ—Å—Ç—å—é —á–∏—Å—Ç–∞—è

**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω!** üéâ

---

## üõ†Ô∏è –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï –¢–ê–ö:

–ü–æ–∫–∞–∂–∏ –º–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã SQL, –∏ —è –∏—Å–ø—Ä–∞–≤–ª—é –ø—Ä–æ–±–ª–µ–º—É!

