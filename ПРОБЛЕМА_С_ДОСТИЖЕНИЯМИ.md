# üö® –ü–†–û–ë–õ–ï–ú–ê: –î–û–°–¢–ò–ñ–ï–ù–ò–Ø 0/3

## –ß–¢–û –î–û–õ–ñ–ù–û –ü–†–û–ò–°–•–û–î–ò–¢–¨:

–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –º–æ–¥—É–ª—è (–≤—Å–µ —É—Ä–æ–∫–∏ completed), backend –¥–æ–ª–∂–µ–Ω:

1. ‚úÖ –ó–∞–ø–∏—Å–∞—Ç—å `tripwire_progress` (–†–ê–ë–û–¢–ê–ï–¢ - –≤–∏–¥–Ω–æ 2 –º–æ–¥—É–ª—è completed)
2. ‚úÖ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –º–æ–¥—É–ª—å –≤ `module_unlocks` (–†–ê–ë–û–¢–ê–ï–¢)
3. ‚ùå **–°–æ–∑–¥–∞—Ç—å achievement –≤ `user_achievements`** (–ù–ï –†–ê–ë–û–¢–ê–ï–¢!!!)

## –ö–û–î –°–û–ó–î–ê–ù–ò–Ø ACHIEVEMENT:

`backend/src/routes/tripwire-lessons.ts` (—Å—Ç—Ä–æ–∫–∏ 293-306):

```typescript
const achievementId = module_id === 16 ? 'first_module_complete'
                    : module_id === 17 ? 'second_module_complete'
                    : 'third_module_complete';

const achievementResult = await client.query(`
  INSERT INTO user_achievements (user_id, achievement_id, current_value, is_completed, completed_at)
  VALUES ($1::uuid, $2::text, 1, true, NOW())
  ON CONFLICT (user_id, achievement_id)
  DO UPDATE SET is_completed = true, completed_at = NOW(), current_value = 1
  RETURNING *
`, [main_user_id, achievementId]);
```

## –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´:

### 1. **–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –≤ `tripwire_achievements`**
–¢–∞–±–ª–∏—Ü–∞ `user_achievements` –∏–º–µ–µ—Ç FK –Ω–∞ `tripwire_achievements.id`.  
–ï—Å–ª–∏ —Ç–∞–º –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π —Å ID `'first_module_complete'`, `'second_module_complete'`, `'third_module_complete'` - INSERT —É–ø–∞–¥–µ—Ç!

### 2. **Foreign Key Constraint**
```sql
FOREIGN KEY (achievement_id) REFERENCES tripwire_achievements(id)
```
–ï—Å–ª–∏ —Ç–∞–∫–∞—è –∑–∞–ø–∏—Å—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞!

### 3. **–û—à–∏–±–∫–∞ –ù–ï –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è**
Backend –º–æ–∂–µ—Ç –ø—Ä–æ–≥–ª–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç—É.

---

## üîß –ß–¢–û –ù–£–ñ–ù–û –ü–†–û–í–ï–†–ò–¢–¨:

### 1. –ï—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å–∏ –≤ `tripwire_achievements`?

```sql
SELECT id, name FROM tripwire_achievements 
WHERE id IN ('first_module_complete', 'second_module_complete', 'third_module_complete');
```

### 2. –ï—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å–∏ –≤ `user_achievements` –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?

```sql
SELECT * FROM user_achievements 
WHERE user_id = '23408904-cb2f-4b11-92a6-f435fb7c3905';
```

### 3. Backend –ª–æ–≥–∏

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±—ã–ª–∏ –ª–∏ –æ—à–∏–±–∫–∏:
```
‚ùå [STEP 6b ERROR] Achievement creation failed
```

---

## üéØ –†–ï–®–ï–ù–ò–ï:

–ï—Å–ª–∏ –≤ `tripwire_achievements` –Ω–µ—Ç –Ω—É–∂–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π - **–°–û–ó–î–ê–¢–¨ –ò–•!**

```sql
INSERT INTO tripwire_achievements (id, name, description, icon)
VALUES 
  ('first_module_complete', '–ü–ï–†–í–´–ô –®–ê–ì', '–ó–∞–≤–µ—Ä—à–∏—Ç–µ –ø–µ—Ä–≤—ã–π –º–æ–¥—É–ª—å', 'trophy'),
  ('second_module_complete', '–ù–ê –ü–£–¢–ò –ö –ú–ê–°–¢–ï–†–°–¢–í–£', '–ó–∞–≤–µ—Ä—à–∏—Ç–µ –≤—Ç–æ—Ä–æ–π –º–æ–¥—É–ª—å', 'star'),
  ('third_module_complete', '–ü–û–ß–¢–ò –£ –¶–ï–õ–ò', '–ó–∞–≤–µ—Ä—à–∏—Ç–µ —Ç—Ä–µ—Ç–∏–π –º–æ–¥—É–ª—å', 'rocket')
ON CONFLICT (id) DO NOTHING;
```

---

## üìù –î–ê–õ–¨–ù–ï–ô–®–ò–ï –®–ê–ì–ò:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É `tripwire_achievements`
2. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ - —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å–∏
3. –ü—Ä–æ–π—Ç–∏ —É—Ä–æ–∫ –∑–∞–Ω–æ–≤–æ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ achievement —Å–æ–∑–¥–∞–µ—Ç—Å—è
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ
